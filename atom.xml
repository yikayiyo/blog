<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Misbehavior</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://yikayiyo.github.io/"/>
  <updated>2020-06-18T09:25:42.976Z</updated>
  <id>https://yikayiyo.github.io/</id>
  
  <author>
    <name>yikayiyo</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>surfaceæµ‹è¯•</title>
    <link href="https://yikayiyo.github.io/2020/06/18/surface%E6%B5%8B%E8%AF%95/"/>
    <id>https://yikayiyo.github.io/2020/06/18/surface%E6%B5%8B%E8%AF%95/</id>
    <published>2020-06-18T09:21:24.000Z</published>
    <updated>2020-06-18T09:25:42.976Z</updated>
    
    <content type="html"><![CDATA[<p>surfaceä¸Šå†™åšå®¢ï¼Œå®Œäº‹ä¹‹åå„ç«¯åŒæ­¥æµ‹è¯•ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;surfaceä¸Šå†™åšå®¢ï¼Œå®Œäº‹ä¹‹åå„ç«¯åŒæ­¥æµ‹è¯•ã€‚&lt;/p&gt;
&lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.da
      
    
    </summary>
    
    
    
      <category term="æ‚" scheme="https://yikayiyo.github.io/tags/%E6%9D%82/"/>
    
  </entry>
  
  <entry>
    <title>gitä¿®æ”¹æœ€è¿‘ä¸€æ¬¡commitçš„ä¿¡æ¯</title>
    <link href="https://yikayiyo.github.io/2020/06/18/git%E4%BF%AE%E6%94%B9%E6%9C%80%E8%BF%91%E4%B8%80%E6%AC%A1commit%E7%9A%84%E4%BF%A1%E6%81%AF/"/>
    <id>https://yikayiyo.github.io/2020/06/18/git%E4%BF%AE%E6%94%B9%E6%9C%80%E8%BF%91%E4%B8%80%E6%AC%A1commit%E7%9A%84%E4%BF%A1%E6%81%AF/</id>
    <published>2020-06-18T05:29:00.000Z</published>
    <updated>2020-06-18T05:40:50.201Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘ä¸€æ¬¡æäº¤çš„ä¿¡æ¯ä¸å¤ªå¯¹ï¼Œå·²ç»pushåˆ°è¿œç«¯ã€‚</p><img src="/2020/06/18/git%E4%BF%AE%E6%94%B9%E6%9C%80%E8%BF%91%E4%B8%80%E6%AC%A1commit%E7%9A%84%E4%BF%A1%E6%81%AF/xiugaiqian.png" class="" title="ä¿®æ”¹å‰"><p>ä¿®æ”¹æ­¥éª¤ï¼š</p><ol><li><p>è¾“å…¥å‘½ä»¤ï¼Œä¼šè¿›å…¥ç¼–è¾‘å™¨</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend</span><br></pre></td></tr></tbody></table></figure></li><li><p>ä¿®æ”¹commitä¿¡æ¯ï¼Œé€€å‡ºç¼–è¾‘å™¨</p></li><li><p>å¼ºåˆ¶æ¨é€</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -f</span><br></pre></td></tr></tbody></table></figure></li></ol><p>ä¿®æ”¹åï¼š</p><img src="/2020/06/18/git%E4%BF%AE%E6%94%B9%E6%9C%80%E8%BF%91%E4%B8%80%E6%AC%A1commit%E7%9A%84%E4%BF%A1%E6%81%AF/xiugaihou.png" class="" title="ä¿®æ”¹å"><p>æ³¨æ„åˆ°ï¼š<strong>commitå·æ”¹å˜äº†</strong></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æœ€è¿‘ä¸€æ¬¡æäº¤çš„ä¿¡æ¯ä¸å¤ªå¯¹ï¼Œå·²ç»pushåˆ°è¿œç«¯ã€‚&lt;/p&gt;
&lt;img src=&quot;/2020/06/18/git%E4%BF%AE%E6%94%B9%E6%9C%80%E8%BF%91%E4%B8%80%E6%AC%A1commit%E7%9A%84%E4%BF%A1%E6%81
      
    
    </summary>
    
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="git" scheme="https://yikayiyo.github.io/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>Data flow Synchronization and Pipelining</title>
    <link href="https://yikayiyo.github.io/2020/01/16/Pipelining/"/>
    <id>https://yikayiyo.github.io/2020/01/16/Pipelining/</id>
    <published>2020-01-16T04:02:58.000Z</published>
    <updated>2020-01-16T06:04:22.838Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.coursera.org/learn/parallel-programming-in-java/" target="_blank" rel="noopener">https://www.coursera.org/learn/parallel-programming-in-java/</a></p><h3 id="Split-phase-Barriers-with-Java-Phasers"><a href="#Split-phase-Barriers-with-Java-Phasers" class="headerlink" title="Split-phase Barriers with Java Phasers"></a>Split-phase Barriers with Java Phasers</h3><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://www.coursera.org/learn/parallel-programming-in-java/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.coursera.org/learn/para
      
    
    </summary>
    
    
    
      <category term="java" scheme="https://yikayiyo.github.io/tags/java/"/>
    
      <category term="å¹¶è¡Œç¼–ç¨‹" scheme="https://yikayiyo.github.io/tags/%E5%B9%B6%E8%A1%8C%E7%BC%96%E7%A8%8B/"/>
    
      <category term="å­¦ä¹ " scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>Loop Parallelism</title>
    <link href="https://yikayiyo.github.io/2020/01/13/Loop%20Parallelism/"/>
    <id>https://yikayiyo.github.io/2020/01/13/Loop%20Parallelism/</id>
    <published>2020-01-13T05:49:17.000Z</published>
    <updated>2020-01-19T08:10:19.891Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Parallel-Loops"><a href="#Parallel-Loops" class="headerlink" title="Parallel Loops"></a>Parallel Loops</h3><p>æœªçŸ¥å¾ªç¯æ¬¡æ•°ï¼Œåˆ©ç”¨äº†æŒ‡é’ˆçš„forå¾ªç¯<br>æ¯ä¸€ä¸ªè¿­ä»£å½“ä½œä¸€ä¸ªå­ä»»åŠ¡ï¼Œ<code>finish</code>çº¦æŸæ•´ä¸ªå¾ªç¯</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">finish {</span><br><span class="line">    <span class="keyword">for</span> (p = head; p != <span class="keyword">null</span> ; p = p.next) </span><br><span class="line">        <span class="function">async <span class="title">compute</span><span class="params">(p)</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å·²çŸ¥å¾ªç¯æ¬¡æ•°nï¼Œå¯ä»¥åˆ©ç”¨<code>forall</code></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vector addition</span></span><br><span class="line">forall (i : [<span class="number">0</span>:n-<span class="number">1</span>]) </span><br><span class="line">    a[i] = b[i] + c[i]</span><br></pre></td></tr></tbody></table></figure><p>åˆ©ç”¨ Java streamsï¼Œä¸Šè¿°åŠŸèƒ½æœ‰æ›´åŠ ç®€æ´çš„è¡¨è¾¾æ–¹å¼</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">a = IntStream.rangeClosed(<span class="number">0</span>, N-<span class="number">1</span>).parallel().toArray(i -&gt; b[i] + c[i]);</span><br></pre></td></tr></tbody></table></figure><a id="more"></a><h3 id="Parallel-Matrix-Multiplication"><a href="#Parallel-Matrix-Multiplication" class="headerlink" title="Parallel Matrix Multiplication"></a>Parallel Matrix Multiplication</h3><p>å‡è®¾ä¸¤ä¸ª<code>n*n</code>çš„çŸ©é˜µç›¸ä¹˜ï¼Œæœ‰</p><p>$$<br>c[i][j] = \sum_{k=0}^{n-1} a[i][k] * b[k][j]<br>$$<br>ä¼ªä»£ç è¡¨ç¤ºä¸º</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i : [<span class="number">0</span>:n-<span class="number">1</span>]) {</span><br><span class="line">  <span class="keyword">for</span>(j : [<span class="number">0</span>:n-<span class="number">1</span>]) { c[i][j] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(k : [<span class="number">0</span>:n-<span class="number">1</span>]) {</span><br><span class="line">      c[i][j] = c[i][j] + a[i][k]*b[k][j]</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è¦æ›¿æ¢æˆå¹¶è¡Œè®¡ç®—ï¼Œå¯ä»¥ç®€å•åœ°å°†å¤–ä¸¤å±‚çš„forå¾ªç¯æ”¹æˆ<code>forall</code></p><p>for-k å¿…é¡»æ˜¯çº¿æ€§çš„ï¼Œå› ä¸ºè¿™é‡Œæœ‰å†™æ•°æ®ï¼ˆdata race</p><h3 id="Barriers-in-Parallel-Loops"><a href="#Barriers-in-Parallel-Loops" class="headerlink" title="Barriers in Parallel Loops"></a>Barriers in Parallel Loops</h3><p>ä¸‹é¢æœ‰ä¸€ä¸ªç®€å•çš„å¹¶è¡Œä»»åŠ¡</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">forall (i : [<span class="number">0</span>:n-<span class="number">1</span>]) {</span><br><span class="line">    myId = lookup(i); <span class="comment">// convert int to a string </span></span><br><span class="line">    print HELLO, myId;</span><br><span class="line">    print BYE, myId;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>åœ¨ä¸åŒçš„æ‰§è¡Œä¸‹ä¼šæœ‰ä¸åŒé¡ºåºçš„ç»“æœï¼ˆç›¸åŒmyIdå¯¹åº”çš„HELLOä¸€å®šåœ¨BYEä¹‹å‰</p><p>barrierså¯ä»¥å°†ä¸€ä¸ªparallel loopåˆ†ä¸ºä¸åŒçš„é˜¶æ®µ</p><p>åœ¨ä¸¤ä¸ªprintä¹‹é—´æ’å…¥ä¸€ä¸ªbarrierï¼Œå¯ä»¥ä¿è¯æ‰€æœ‰çš„HELLOå‡ºç°åœ¨BYEä¹‹å‰</p><p>ä¸¤ç§å†™æ³•ï¼š</p><ul><li><p>åœ¨ä¸€ä¸ª<code>forall</code>å¾ªç¯ä¸­æ’å…¥barriersåˆ†ä¸ºä¸åŒçš„é˜¶æ®µ (ä¸¤ä¸ªå¯¹åº”çš„printå…±äº«myId</p></li><li><p>ä¸ºæ¯ä¸ªé˜¶æ®µå†™è‡ªå·±çš„<code>forall</code>å¾ªç¯ (å€ŸåŠ© intermediate data structure  to communicate the myId values from one <em>forall</em> to another <em>forall</em> </p></li></ul><h3 id="Parallel-One-Dimensional-Iterative-Averaging"><a href="#Parallel-One-Dimensional-Iterative-Averaging" class="headerlink" title="Parallel One-Dimensional Iterative Averaging"></a>Parallel One-Dimensional Iterative Averaging</h3><p>Solve the recurrence<br>$$<br>X_i=\frac{X_{i-1}+X_{i+1}}2<br>$$</p><p>with boundary conditions<br>$$<br>X_0=0\ and\ X_n=1<br>$$</p><p><a href="https://en.wikipedia.org/wiki/Jacobi_method" target="_blank" rel="noopener">Jacobi method</a>åˆ©ç”¨ä¸¤ä¸ªæ•°ç»„oldX[] and newX[]è¿­ä»£æ±‚è§£è¯¥é—®é¢˜ï¼Œå¹¶è¡Œä¼ªä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (iter: [<span class="number">0</span>:nsteps-<span class="number">1</span>]) {</span><br><span class="line">  forall (i: [<span class="number">1</span>:n-<span class="number">1</span>]) {</span><br><span class="line">    newX[i] = (oldX[i-<span class="number">1</span>] + oldX[i+<span class="number">1</span>]) / <span class="number">2</span>;</span><br><span class="line">  }</span><br><span class="line">  swap pointers newX and oldX;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä¸Šè¿°æ–¹æ³•åˆ›å»ºäº† <em>nsteps</em> <em>Ã—</em> (<em>n</em> <em>âˆ’</em> 1) ä¸ªä»»åŠ¡</p><p><strong>ä½¿ç”¨Barrierså¯ä»¥å‡å°‘éœ€è¦åˆ›å»ºçš„ä»»åŠ¡ä¸ªæ•°</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">forall ( i: [<span class="number">1</span>:n-<span class="number">1</span>]) {</span><br><span class="line">  <span class="keyword">for</span> (iter: [<span class="number">0</span>:nsteps-<span class="number">1</span>]) {</span><br><span class="line">    newX[i] = (oldX[i-<span class="number">1</span>] + oldX[i+<span class="number">1</span>]) / <span class="number">2</span>;</span><br><span class="line">    NEXT; <span class="comment">// Barrier</span></span><br><span class="line">    swap pointers newX and oldX;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä¸Šè¿°æ–¹æ³•åªéœ€è¦åˆ›å»º <em>(n-1)</em> ä¸ªä»»åŠ¡</p><p>This is a significant improvement since creating tasks is usually more expensive than performing barrier operations.</p><h3 id="Iteration-Grouping-Chunking-in-Parallel-Loops"><a href="#Iteration-Grouping-Chunking-in-Parallel-Loops" class="headerlink" title="Iteration Grouping/Chunking in Parallel Loops"></a>Iteration Grouping/Chunking in Parallel Loops</h3><p>å¯¹äºå‘é‡ç›¸åŠ é—®é¢˜</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">forall (i : [<span class="number">0</span>:n-<span class="number">1</span>]) a[i] = b[i] + c[i]</span><br></pre></td></tr></tbody></table></figure><p>ä¸Šè¿°æ–¹æ³•åˆ›å»ºäº†nä¸ªä»»åŠ¡ï¼Œå½“nå¾ˆå¤§æ—¶overheadsä¹Ÿä¼šå¾ˆå¤§</p><p>è§£å†³æ–¹æ³•</p><p><strong>åˆ†ç»„</strong>ï¼ˆ<em>loop</em> <em>chunking</em> or <em>iteration grouping</em></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">forall (g:[<span class="number">0</span>:ng-<span class="number">1</span>])</span><br><span class="line">  <span class="keyword">for</span> (i : mygroup(g, ng, [<span class="number">0</span>:n-<span class="number">1</span>])) a[i] = b[i] + c[i]</span><br></pre></td></tr></tbody></table></figure><p>ä¸Šè¿°æ–¹æ³•å°†ä»»åŠ¡ä¸ªæ•°ä» <strong>n</strong> é™åˆ°äº† <strong>ng</strong>ï¼ˆåˆ†ç»„ä¸ªæ•°</p><p>åˆ†ç»„æ–¹æ³•æœ‰ä¸¤ç§ï¼š</p><ul><li>block<ul><li>å°†è¿ç»­çš„è¿­ä»£åˆ†ä¸ºä¸€ç»„</li></ul></li><li>cyclic<ul><li>å°†åŒä½™ç±»è¿­ä»£ï¼ˆ iterations in the same congruence classï¼Œåˆ†ä¸ºä¸€ç»„</li></ul></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Parallel-Loops&quot;&gt;&lt;a href=&quot;#Parallel-Loops&quot; class=&quot;headerlink&quot; title=&quot;Parallel Loops&quot;&gt;&lt;/a&gt;Parallel Loops&lt;/h3&gt;&lt;p&gt;æœªçŸ¥å¾ªç¯æ¬¡æ•°ï¼Œåˆ©ç”¨äº†æŒ‡é’ˆçš„forå¾ªç¯&lt;br&gt;æ¯ä¸€ä¸ªè¿­ä»£å½“ä½œä¸€ä¸ªå­ä»»åŠ¡ï¼Œ&lt;code&gt;finish&lt;/code&gt;çº¦æŸæ•´ä¸ªå¾ªç¯&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;finish {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (p = head; p != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt; ; p = p.next) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;function&quot;&gt;async &lt;span class=&quot;title&quot;&gt;compute&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(p)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;å·²çŸ¥å¾ªç¯æ¬¡æ•°nï¼Œå¯ä»¥åˆ©ç”¨&lt;code&gt;forall&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// vector addition&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;forall (i : [&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;:n-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    a[i] = b[i] + c[i]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;åˆ©ç”¨ Java streamsï¼Œä¸Šè¿°åŠŸèƒ½æœ‰æ›´åŠ ç®€æ´çš„è¡¨è¾¾æ–¹å¼&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a = IntStream.rangeClosed(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, N-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;).parallel().toArray(i -&amp;gt; b[i] + c[i]);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="java" scheme="https://yikayiyo.github.io/tags/java/"/>
    
      <category term="å¹¶è¡Œç¼–ç¨‹" scheme="https://yikayiyo.github.io/tags/%E5%B9%B6%E8%A1%8C%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>Functional Parallelism</title>
    <link href="https://yikayiyo.github.io/2020/01/10/Functional-Parallelism/"/>
    <id>https://yikayiyo.github.io/2020/01/10/Functional-Parallelism/</id>
    <published>2020-01-10T06:20:46.000Z</published>
    <updated>2020-01-19T07:38:55.707Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Future-Tasks"><a href="#Future-Tasks" class="headerlink" title="Future Tasks"></a><strong>Future Tasks</strong></h3><p><code>future tasks</code></p><ul><li>tasks with <strong>return values</strong></li></ul><p><code>future objects</code>ï¼ˆalso known as <code>promise objects</code></p><ul><li><p>a â€œhandleâ€ for accessing a taskâ€™s return value</p></li><li><p>ä¸¤ä¸ªä¸»è¦æ“ä½œï¼š</p><ul><li><p>Assignmentï¼Œå½¢å¼å¦‚ä¸‹</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A = future { </span><br><span class="line">    âŸ¨ task-with-<span class="keyword">return</span>-value âŸ© </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>future object è¢«é™åˆ¶ä¸ºåªèƒ½ä¸€æ¬¡èµ‹å€¼ï¼ˆ<em>single assignment</em>ï¼Œç±»ä¼¼äºfinalå˜é‡</p><p>future task å®Œæˆå future objectå°±ä¸èƒ½ä¿®æ”¹äº†</p></li><li><p>Blocking read</p><ul><li>A.get() è¯»æ“ä½œä¼šç­‰å¾…ï¼Œç›´åˆ°ä¸ future object å…³è”çš„ task å®Œæˆï¼Œå°†è¯¥ä»»åŠ¡çš„è¿”å›å€¼ä½œä¸º A.get() çš„å€¼</li><li>A.get() ä¹‹åçš„ä»»ä½•statement S å¼€å§‹æ‰§è¡Œæ—¶ä¸Aå…³è”çš„ä»»åŠ¡å·²ç»å®Œæˆ</li></ul></li></ul></li></ul><a id="more"></a><h3 id="Creating-Future-Tasks-in-Javaâ€™s-Fork-Join-Framework"><a href="#Creating-Future-Tasks-in-Javaâ€™s-Fork-Join-Framework" class="headerlink" title="Creating Future Tasks in Javaâ€™s Fork/Join Framework"></a><strong>Creating Future Tasks in Javaâ€™s Fork/Join Framework</strong></h3><p>future taskså’Œregular tasksçš„ä¸€äº›å…³é”®ä¸åŒï¼š</p><ol><li>future tasks ç»§æ‰¿è‡ªFJæ¡†æ¶çš„ <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/RecursiveTask.html" target="_blank" rel="noopener">RecursiveTask</a> ç±»ï¼Œregular tasks ç»§æ‰¿è‡ª <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/RecursiveAction.html" target="_blank" rel="noopener">RecursiveAction</a> ç±»</li><li>future task çš„ <strong>compute()</strong> æ–¹æ³•å¿…é¡»æœ‰ non-void çš„è¿”å›å€¼</li><li>*<em>left.join() *</em>è¿™æ ·çš„æ–¹æ³•è°ƒç”¨éƒ½ä¼šç­‰leftæŒ‡å‘çš„ä»»åŠ¡æ‰§è¡Œï¼Œåªæ˜¯future task æœ‰è¿”å›å€¼</li></ol><h3 id="Memoization"><a href="#Memoization" class="headerlink" title="Memoization"></a><strong>Memoization</strong></h3><p>è®°å½•f(x)çš„æ‰§è¡Œç»“æœï¼Œé˜²æ­¢é‡å¤è®¡ç®—</p><ol><li><p>åˆ›å»ºç‰¹å®šçš„æ•°æ®ç»“æ„ï¼Œè®°å½•<br>$$<br>{(x_1,y_1=f(x_1)),(x_2,y_2=f(x_2)),â€¦}<br>$$</p></li><li><p>å½“å‡ºç° f çš„è°ƒç”¨æ—¶å…ˆåœ¨è®°å½•ä¸­æŸ¥æ‰¾</p></li></ol><p>future taskåœ¨è¿™é‡Œéå¸¸é€‚åˆï¼Œè®°å½•çš„å½¢å¼å˜ä¸ºäº†<br>$$<br>{(x_1,y_1=future(f(x_1))),(x_2,y_2=future(f(x_2))),â€¦}<br>$$</p><p>å¯¹äºè¾“å…¥xï¼Œå¦‚æœå¯¹åº”çš„futureå¯¹è±¡å·²ç»åˆ›å»ºï¼Œåˆ™å¯ä»¥è°ƒç”¨è¯¥å¯¹è±¡çš„ get() æ–¹æ³•</p><h3 id="Java-Streams"><a href="#Java-Streams" class="headerlink" title="Java Streams"></a><strong>Java Streams</strong></h3><p>æ“ä½œé›†åˆå¯¹è±¡é™¤äº†<code>for loop</code>è¿˜å¯ä»¥åˆ©ç”¨<code>Java streams</code>æä¾›çš„API</p><p>ä¸‹é¢çš„ä¾‹å­æ±‚æ³¨å†Œå­¦ç”Ÿçš„å¹³å‡å¹´é¾„</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">students.stream()</span><br><span class="line">    .filter(s -&gt; s.getStatus() == Student.ACTIVE)</span><br><span class="line">    .mapToInt(a -&gt; a.getAge())</span><br><span class="line">    .average();</span><br></pre></td></tr></tbody></table></figure><p>Java streams æä¾›äº†å¹¶è¡Œç¼–ç¨‹çš„API</p><p>ä¸Šé¢ä»£ç çš„ <em>students.stream()</em> æ›¿æ¢ä¸º <em>students.parallelStream()</em> æˆ–è€… <em>Stream.of(students).parallel()</em> å°±å¯ä»¥äº†</p><h3 id="Determinism-and-Data-Races"><a href="#Determinism-and-Data-Races" class="headerlink" title="Determinism and Data Races"></a><strong>Determinism and Data Races</strong></h3><p><em>functionally deterministic</em></p><ul><li>A parallel program is said to be <em>functionally deterministic</em> if it always computes the same answer when given the same input</li></ul><p><em>structurally deterministic</em></p><ul><li>It always computes the same computation graph, when given the same input. </li></ul><p>æ²¡æœ‰æ•°æ®ç«äº‰ä¸è¶³ä»¥ä¿è¯ç¡®å®šæ€§</p><p>æœ‰æ•°æ®ç«äº‰ä¹Ÿä¸æ„å‘³ç€ç¨‹åºçš„ä¸ç¡®å®šæ€§</p><p>å¸¦æœ‰æ•°æ®ç«äº‰çš„ä¸ç¡®å®šç¨‹åºï¼Œæ¯æ¬¡äº§ç”Ÿçš„ç»“æœä¸åŒï¼Œä½†æ˜¯å¯èƒ½æ¯ä¸ªç»“æœéƒ½æ˜¯å¯æ¥å—çš„ï¼ï¼e.g., different locations for a search pattern in a target string</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Future-Tasks&quot;&gt;&lt;a href=&quot;#Future-Tasks&quot; class=&quot;headerlink&quot; title=&quot;Future Tasks&quot;&gt;&lt;/a&gt;&lt;strong&gt;Future Tasks&lt;/strong&gt;&lt;/h3&gt;&lt;p&gt;&lt;code&gt;future tasks&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;tasks with &lt;strong&gt;return values&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;future objects&lt;/code&gt;ï¼ˆalso known as &lt;code&gt;promise objects&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;a â€œhandleâ€ for accessing a taskâ€™s return value&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ä¸¤ä¸ªä¸»è¦æ“ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Assignmentï¼Œå½¢å¼å¦‚ä¸‹&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;A = future { &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    âŸ¨ task-with-&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;-value âŸ© &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;future object è¢«é™åˆ¶ä¸ºåªèƒ½ä¸€æ¬¡èµ‹å€¼ï¼ˆ&lt;em&gt;single assignment&lt;/em&gt;ï¼Œç±»ä¼¼äºfinalå˜é‡&lt;/p&gt;
&lt;p&gt;future task å®Œæˆå future objectå°±ä¸èƒ½ä¿®æ”¹äº†&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Blocking read&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A.get() è¯»æ“ä½œä¼šç­‰å¾…ï¼Œç›´åˆ°ä¸ future object å…³è”çš„ task å®Œæˆï¼Œå°†è¯¥ä»»åŠ¡çš„è¿”å›å€¼ä½œä¸º A.get() çš„å€¼&lt;/li&gt;
&lt;li&gt;A.get() ä¹‹åçš„ä»»ä½•statement S å¼€å§‹æ‰§è¡Œæ—¶ä¸Aå…³è”çš„ä»»åŠ¡å·²ç»å®Œæˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="java" scheme="https://yikayiyo.github.io/tags/java/"/>
    
      <category term="å¹¶è¡Œç¼–ç¨‹" scheme="https://yikayiyo.github.io/tags/%E5%B9%B6%E8%A1%8C%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>Task Parallelism</title>
    <link href="https://yikayiyo.github.io/2020/01/08/Task%20Parallelism/"/>
    <id>https://yikayiyo.github.io/2020/01/08/Task%20Parallelism/</id>
    <published>2020-01-08T10:59:19.000Z</published>
    <updated>2020-01-09T11:58:58.049Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.coursera.org/learn/parallel-programming-in-java/" target="_blank" rel="noopener">https://www.coursera.org/learn/parallel-programming-in-java/</a></p><h3 id="Task-Creation-and-Termination-Async-Finish"><a href="#Task-Creation-and-Termination-Async-Finish" class="headerlink" title="Task Creation and Termination (Async, Finish)"></a>Task Creation and Termination (Async, Finish)</h3><p>ä»¥æ•°ç»„æ±‚å’Œä½œä¸ºä¾‹å­</p><p>ä¸ºäº†æ±‚å¾—æ•°ç»„çš„å’Œï¼Œå¯ä»¥å°†æ•°ç»„åˆ†ä¸ºå‰åä¸¤ä¸ªéƒ¨åˆ†ã€‚ä¸¤éƒ¨åˆ†çš„æ±‚å’Œå¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œä½†æ˜¯åœ¨æ±‚æ€»å’Œä¹‹å‰è¦ä¿è¯ä¸¤ä¸ªå­ä»»åŠ¡å·²ç»å®Œæˆã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">finish {</span><br><span class="line">  async SUM1;  <span class="comment">// asynchronously compute sum of the lower half of the array</span></span><br><span class="line">  SUM2;  <span class="comment">// compute sum of the upper half of the array in parallel with SUM1</span></span><br><span class="line">}</span><br><span class="line">SUM;  <span class="comment">// combine the two partial sums after both SUM1 and SUM2 have finished</span></span><br></pre></td></tr></tbody></table></figure><p><code>async &lt;stmt1&gt;</code> ï¼šçˆ¶ä»»åŠ¡åˆ›å»ºå­ä»»åŠ¡æ‰§è¡Œ<code>&lt;stmt1&gt;</code>ï¼Œå¹¶ä¸”æ˜¯å¹¶è¡Œäºçˆ¶ä»»åŠ¡çš„å…¶ä½™éƒ¨åˆ†æ‰§è¡Œ</p><p>ä¸Šé¢çš„ä¼ªä»£ç ä¸­ï¼Œ<code>async SUM1;</code>åˆ›å»ºå­ä»»åŠ¡SUM1ï¼Œå’ŒSUM2å¹¶è¡Œæ‰§è¡Œ</p><p><code>finish &lt;stmt2&gt;</code>ï¼šçˆ¶ä»»åŠ¡æ‰§è¡Œ<code>&lt;stmt2&gt;</code>ï¼Œå¹¶ä¸”ç­‰å¾…<code>&lt;stmt2&gt;ä»¥åŠå…¶ä¸­åˆ›å»ºçš„å¼‚æ­¥ä»»åŠ¡</code>å®Œæˆ</p><p>ä¸Šä¾‹ä¸­ï¼Œçˆ¶ä»»åŠ¡ç­‰å¾…SUM1å’ŒSUM2å®Œæˆï¼Œæ‰èƒ½æ‰§è¡ŒSUM</p><h3 id="Tasks-in-Javaâ€™s-Fork-Join-Framework"><a href="#Tasks-in-Javaâ€™s-Fork-Join-Framework" class="headerlink" title="Tasks in Javaâ€™s Fork/Join Framework"></a>Tasks in Javaâ€™s Fork/Join Framework</h3><p>æ•°ç»„æ±‚å’Œçš„<strong>åˆ†æ²»</strong>å†™æ³•<a id="more"></a></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ASum</span></span>{</span><br><span class="line">  <span class="keyword">int</span>[] A; <span class="comment">// input array</span></span><br><span class="line">  <span class="keyword">int</span> LO, HI; <span class="comment">// subrange</span></span><br><span class="line">  <span class="keyword">int</span> SUM; <span class="comment">// return value</span></span><br><span class="line">  ASum(<span class="keyword">int</span>[] array, <span class="keyword">int</span> low, <span class="keyword">int</span> high){</span><br><span class="line">    <span class="keyword">this</span>.A = array;</span><br><span class="line">    <span class="keyword">this</span>.LO = low;</span><br><span class="line">    <span class="keyword">this</span>.HI = high;</span><br><span class="line">  }</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">compute</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (LO==HI) SUM = A[LO];</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(LO&gt;HI) SUM = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">int</span> MID = (LO+HI)/<span class="number">2</span>;</span><br><span class="line">      L = <span class="keyword">new</span> ASum(A, LO, MID);</span><br><span class="line">      R = <span class="keyword">new</span> ASum(A, MID, HI);</span><br><span class="line">      L.compute();</span><br><span class="line">      R.compute();</span><br><span class="line">      SUM = L.SUM + R.SUM;</span><br><span class="line">    }</span><br><span class="line">  } <span class="comment">// compute()</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å¹¶è¡Œå†™æ³•</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.ForkJoinPool;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.RecursiveTask;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ASum</span> <span class="keyword">extends</span> <span class="title">RecursiveTask</span>&lt;<span class="title">Integer</span>&gt; </span>{  <span class="comment">//æ²¡æœ‰è¿”å›å€¼çš„ç»§æ‰¿RecursiveActionï¼Œæ¯”å¦‚å¯¹æ•°ç»„æ’åº</span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> seqThreshold = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">int</span>[] array;</span><br><span class="line">    <span class="keyword">int</span> lo, hi;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ASum</span><span class="params">(<span class="keyword">int</span>[] array, <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.array = array;</span><br><span class="line">        <span class="keyword">this</span>.lo = low;</span><br><span class="line">        <span class="keyword">this</span>.hi = high;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Integer <span class="title">compute</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> ((hi - lo) &lt;= seqThreshold) {  <span class="comment">//ä¸å†åˆ‡åˆ†ä¸ºå­ä»»åŠ¡</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = lo; i &lt; hi; i++)</span><br><span class="line">                res += array[i];</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">int</span> mid = (lo + hi) / <span class="number">2</span>;</span><br><span class="line">            ASum L = <span class="keyword">new</span> ASum(array, lo, mid);</span><br><span class="line">            ASum R = <span class="keyword">new</span> ASum(array, mid, hi);</span><br><span class="line">            <span class="comment">// L.fork();</span></span><br><span class="line">            <span class="comment">// R.fork();</span></span><br><span class="line">            invokeAll(L, R);  <span class="comment">//å’Œä¸Šé¢çš„ä¸¤å¥ç­‰ä»·</span></span><br><span class="line">            res += L.join() + R.join();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">sumOfInts</span><span class="params">(ForkJoinPool pool, <span class="keyword">int</span>[] array)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> n = array.length;</span><br><span class="line">        ASum a = <span class="keyword">new</span> ASum(array, <span class="number">0</span>, n);</span><br><span class="line">        <span class="keyword">return</span> pool.invoke(a);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">final</span> String[] args)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span>[] nums = { <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span> };</span><br><span class="line">        ForkJoinPool pool = <span class="keyword">new</span> ForkJoinPool();</span><br><span class="line">        System.out.println(sumOfInts(pool, nums));</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="Computation-Graphs-Work-Span"><a href="#Computation-Graphs-Work-Span" class="headerlink" title="Computation Graphs, Work, Span"></a>Computation Graphs, Work, Span</h3><h4 id="Computation-Graphs"><a href="#Computation-Graphs" class="headerlink" title="Computation Graphs"></a>Computation Graphs</h4><p>Computation Graphs (CGs) model the execution of a parallel program as a <a href="http://en.wikipedia.org/wiki/Partially_ordered_set" target="_blank" rel="noopener">partially ordered set</a>.</p><p>A CG consist of:</p><ul><li>A set of <em>vertices</em> or <em>nodes</em>, in which each node represents a <em>step</em> consisting of an <strong>arbitrary sequential computation</strong>.</li><li>A set of <em>directed</em> <em>edges</em> that represent <strong>ordering constraints</strong> among steps.</li></ul><p>å¯¹äºfork-joinæ¡†æ¶ï¼Œå¯ä»¥å°†è¿™äº›æœ‰å‘è¾¹åˆ†ä¸ºä¸‰ç±»ï¼š</p><ul><li><em>Continue</em> edgesï¼Œè¿æ¥ä»»åŠ¡ä¸­é¡ºåºæ‰§è¡Œçš„æ­¥éª¤</li><li>Fork edgesï¼Œå°†forkæ“ä½œè¿æ¥åˆ°å­ä»»åŠ¡çš„ç¬¬ä¸€ä¸ªæ­¥éª¤</li><li>join edges connect the last step of a task to all <em>join</em> operations on that task</li></ul><p>ä¸€ä¸ªå°ä¾‹å­</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">S1</span><br><span class="line">fork S2</span><br><span class="line">S3</span><br><span class="line">join S2  <span class="comment">// è¿™é‡Œjoin S2å‘ç”Ÿåœ¨S4ä¹‹å‰</span></span><br><span class="line">S4</span><br><span class="line"><span class="comment">// S5 å¦‚æœæœ‰çš„è¯ï¼Œè¿æ¥åˆ°S4ä¹‹å</span></span><br></pre></td></tr></tbody></table></figure><p>å¯¹åº”çš„CGä¸º</p><img src="/2020/01/08/Task%20Parallelism/image-20200108094903279.png" class=""><h4 id="CGsä¸Šçš„data-race"><a href="#CGsä¸Šçš„data-race" class="headerlink" title="CGsä¸Šçš„data race"></a>CGsä¸Šçš„data race</h4><p>æ²¡æœ‰è¾¹è¿æ¥çš„ä¸¤ä¸ªèŠ‚ç‚¹åŒæ—¶å†™æˆ–è€…è¯»å†™ç›¸åŒçš„ä½ç½®æ—¶å‘ç”Ÿdata race</p><h4 id="CGsä¸Šçš„ç†æƒ³å¹¶è¡Œç¨‹åº¦-ï¼ˆideal-parallelismï¼‰"><a href="#CGsä¸Šçš„ç†æƒ³å¹¶è¡Œç¨‹åº¦-ï¼ˆideal-parallelismï¼‰" class="headerlink" title="CGsä¸Šçš„ç†æƒ³å¹¶è¡Œç¨‹åº¦ ï¼ˆideal parallelismï¼‰"></a>CGsä¸Šçš„ç†æƒ³å¹¶è¡Œç¨‹åº¦ ï¼ˆ<em>ideal parallelism</em>ï¼‰</h4><p>ä¸è®¡ç®—æœºçš„å®é™…å¹¶è¡Œæ€§æ— å…³<br>$$<br>ideal,parallelism = \frac{WORK(G)}{SPAN(G)} \tag{1}<br>$$</p><p>å…¶ä¸­ï¼š</p><ul><li>WORK(G)ä¸ºGä¸­æ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œæ—¶é—´ä¹‹å’Œ</li><li>SPAN(G)ä¸ºGä¸­å…³é”®è·¯å¾„ä¸ŠèŠ‚ç‚¹çš„æ‰§è¡Œæ—¶é—´ä¹‹å’Œï¼Œä¸Šä¾‹ä¸­SPAN(G)ä¸º <strong>max((S1,S3,S4), (S1,S2,S4))</strong></li></ul><h3 id="Multiprocessor-Scheduling-Parallel-Speedup"><a href="#Multiprocessor-Scheduling-Parallel-Speedup" class="headerlink" title="Multiprocessor Scheduling, Parallel Speedup"></a>Multiprocessor Scheduling, Parallel Speedup</h3><h4 id="å‡è®¾"><a href="#å‡è®¾" class="headerlink" title="å‡è®¾"></a>å‡è®¾</h4><p>æœ‰Pä¸ªå¤„ç†å™¨ï¼Œæ¯ä¸ªå¤„ç†å™¨éƒ½ç›¸åŒï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹çš„æ‰§è¡Œæ—¶é—´éƒ½æ˜¯å›ºå®šçš„ï¼ˆä¸ç®¡åœ¨é‚£ä¸ªå¤„ç†å™¨ä¸Šï¼‰ï¼Œå¤„ç†å™¨éƒ½æ˜¯<strong>è´ªå¿ƒ</strong>åœ°æ‰§è¡Œä»»åŠ¡<br>T_pè¡¨ç¤ºåœ¨pä¸ªå¤„ç†å™¨ä¸Šæ‰§è¡Œä¸€ä¸ªCGæ‰€èŠ±çš„æ—¶é—´,<br>ç›¸åŒçš„Pä¸ªå¤„ç†å™¨ï¼Œç›¸åŒçš„CGï¼Œä¸åŒçš„è°ƒåº¦ç®—æ³•ä¹Ÿå¯èƒ½å¯¹åº”ä¸åŒçš„T_p</p><p>$$<br>T_{\infty} \le T_p \le T_1<br>$$</p><h4 id="Speedup-P"><a href="#Speedup-P" class="headerlink" title="Speedup(P)"></a>Speedup(P)</h4><p>the parallel speedup for a given schedule of a CG on <em>P</em> processorsï¼Œæ»¡è¶³ä¸‹é¢ï¼š<br>$$<br>Speedup(P) = \frac{T_1}{T_P} \tag{2}<br>$$</p><p>$$<br>Speedup(P) \le P \tag{3}<br>$$</p><p>$$<br>Speedup(P) \le \frac {WORK}{SPAN} \tag{4}<br>$$</p><p>ï¼ˆ3ï¼‰è¡¨ç¤ºPä¸ªå¤„ç†å™¨ä¸èƒ½å¸¦æ¥På€çš„åŠ é€Ÿ</p><p>ï¼ˆ4ï¼‰è¡¨ç¤ºç°å®éª¨æ„Ÿï¼Œç†æƒ³ä¸°æ»¡</p><h3 id="Amdahlâ€™s-Law"><a href="#Amdahlâ€™s-Law" class="headerlink" title="Amdahlâ€™s Law"></a><strong>Amdahlâ€™s Law</strong></h3><p>if <em>q</em> <em>â‰¤</em> 1 is the fraction of <em>WORK</em> in a parallel program that must be executed <em>sequentially</em>, then the best speedup that can be obtained for that program for any number of processors, <em>P</em> , is <em>Speedup(P)</em> <em>â‰¤</em> 1<em>/q</em>.</p><p>ä¾‹å¦‚ï¼Œå¦‚æœçº¿æ€§å·¥ä½œå æ¯”ä¸º0.5ï¼Œåˆ™ä¸ç®¡å¤„ç†å™¨ä¸ªæ•°å†å¤šï¼Œæœ‰<em>Speedup(P)</em> <em>â‰¤</em> 2</p><p>å› ä¸ºæœ‰<br>$$<br>WORK(G)*q \leq SPAN(G) \tag{5}\<br>==&gt;  \frac{WORK(G)}{SPAN(G)} \leq \frac{1}{q}<br>$$<br>ä¸Šå¼è¡¨ç¤ºå…³é”®è·¯å¾„ç”¨æ—¶ä¸å°äºä»»åŠ¡ä¸­çº¿æ€§éƒ¨åˆ†çš„ç”¨æ—¶</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://www.coursera.org/learn/parallel-programming-in-java/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.coursera.org/learn/parallel-programming-in-java/&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Task-Creation-and-Termination-Async-Finish&quot;&gt;&lt;a href=&quot;#Task-Creation-and-Termination-Async-Finish&quot; class=&quot;headerlink&quot; title=&quot;Task Creation and Termination (Async, Finish)&quot;&gt;&lt;/a&gt;Task Creation and Termination (Async, Finish)&lt;/h3&gt;&lt;p&gt;ä»¥æ•°ç»„æ±‚å’Œä½œä¸ºä¾‹å­&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ±‚å¾—æ•°ç»„çš„å’Œï¼Œå¯ä»¥å°†æ•°ç»„åˆ†ä¸ºå‰åä¸¤ä¸ªéƒ¨åˆ†ã€‚ä¸¤éƒ¨åˆ†çš„æ±‚å’Œå¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œä½†æ˜¯åœ¨æ±‚æ€»å’Œä¹‹å‰è¦ä¿è¯ä¸¤ä¸ªå­ä»»åŠ¡å·²ç»å®Œæˆã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;finish {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  async SUM1;  &lt;span class=&quot;comment&quot;&gt;// asynchronously compute sum of the lower half of the array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  SUM2;  &lt;span class=&quot;comment&quot;&gt;// compute sum of the upper half of the array in parallel with SUM1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SUM;  &lt;span class=&quot;comment&quot;&gt;// combine the two partial sums after both SUM1 and SUM2 have finished&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;code&gt;async &amp;lt;stmt1&amp;gt;&lt;/code&gt; ï¼šçˆ¶ä»»åŠ¡åˆ›å»ºå­ä»»åŠ¡æ‰§è¡Œ&lt;code&gt;&amp;lt;stmt1&amp;gt;&lt;/code&gt;ï¼Œå¹¶ä¸”æ˜¯å¹¶è¡Œäºçˆ¶ä»»åŠ¡çš„å…¶ä½™éƒ¨åˆ†æ‰§è¡Œ&lt;/p&gt;
&lt;p&gt;ä¸Šé¢çš„ä¼ªä»£ç ä¸­ï¼Œ&lt;code&gt;async SUM1;&lt;/code&gt;åˆ›å»ºå­ä»»åŠ¡SUM1ï¼Œå’ŒSUM2å¹¶è¡Œæ‰§è¡Œ&lt;/p&gt;
&lt;p&gt;&lt;code&gt;finish &amp;lt;stmt2&amp;gt;&lt;/code&gt;ï¼šçˆ¶ä»»åŠ¡æ‰§è¡Œ&lt;code&gt;&amp;lt;stmt2&amp;gt;&lt;/code&gt;ï¼Œå¹¶ä¸”ç­‰å¾…&lt;code&gt;&amp;lt;stmt2&amp;gt;ä»¥åŠå…¶ä¸­åˆ›å»ºçš„å¼‚æ­¥ä»»åŠ¡&lt;/code&gt;å®Œæˆ&lt;/p&gt;
&lt;p&gt;ä¸Šä¾‹ä¸­ï¼Œçˆ¶ä»»åŠ¡ç­‰å¾…SUM1å’ŒSUM2å®Œæˆï¼Œæ‰èƒ½æ‰§è¡ŒSUM&lt;/p&gt;
&lt;h3 id=&quot;Tasks-in-Javaâ€™s-Fork-Join-Framework&quot;&gt;&lt;a href=&quot;#Tasks-in-Javaâ€™s-Fork-Join-Framework&quot; class=&quot;headerlink&quot; title=&quot;Tasks in Javaâ€™s Fork/Join Framework&quot;&gt;&lt;/a&gt;Tasks in Javaâ€™s Fork/Join Framework&lt;/h3&gt;&lt;p&gt;æ•°ç»„æ±‚å’Œçš„&lt;strong&gt;åˆ†æ²»&lt;/strong&gt;å†™æ³•&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="java" scheme="https://yikayiyo.github.io/tags/java/"/>
    
      <category term="å¹¶è¡Œç¼–ç¨‹" scheme="https://yikayiyo.github.io/tags/%E5%B9%B6%E8%A1%8C%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>Markdownæ˜¾ç¤º__init__.py</title>
    <link href="https://yikayiyo.github.io/2019/12/25/Markdown%E6%98%BE%E7%A4%BA__/"/>
    <id>https://yikayiyo.github.io/2019/12/25/Markdown%E6%98%BE%E7%A4%BA__/</id>
    <published>2019-12-25T04:59:36.000Z</published>
    <updated>2020-06-18T08:17:51.406Z</updated>
    
    <content type="html"><![CDATA[<p>Markdownè¯­æ³•ä¸­åŒä¸‹åˆ’çº¿ <code>__</code> å’ŒåŒæ˜Ÿ <code>**</code> éƒ½æ˜¯å¼ºè°ƒä½œç”¨<br>pythonä¸­çš„ <strong>init</strong>.pyå°±æ˜¾ç¤ºæˆè¿™ä¸ªæ ·å­äº† <span class="github-emoji" style="color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f612.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f612.png?v8">ğŸ˜’</span></p><p>å¯ä»¥ä½¿ç”¨åå¼•å·å°†å…¶åŒ…å«ï¼Œæ˜¾ç¤ºæ•ˆæœ: <code>__init__.py</code> <span class="github-emoji" style="color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f60b.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f60b.png?v8">ğŸ˜‹</span></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Markdownè¯­æ³•ä¸­åŒä¸‹åˆ’çº¿ &lt;code&gt;__&lt;/code&gt; å’ŒåŒæ˜Ÿ &lt;code&gt;**&lt;/code&gt; éƒ½æ˜¯å¼ºè°ƒä½œç”¨&lt;br&gt;pythonä¸­çš„ &lt;strong&gt;init&lt;/strong&gt;.pyå°±æ˜¾ç¤ºæˆè¿™ä¸ªæ ·å­äº† &lt;span class=&quot;github-emoji&quot; style
      
    
    </summary>
    
    
    
      <category term="æ‚" scheme="https://yikayiyo.github.io/tags/%E6%9D%82/"/>
    
  </entry>
  
  <entry>
    <title>è®°å½•ä¸€æ¬¡æºç é˜…è¯»</title>
    <link href="https://yikayiyo.github.io/2019/05/12/requests%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/"/>
    <id>https://yikayiyo.github.io/2019/05/12/requests%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/</id>
    <published>2019-05-12T08:14:00.000Z</published>
    <updated>2019-05-21T10:04:14.000Z</updated>
    
    <content type="html"><![CDATA[<img src="/2019/05/12/requests%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/requests%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB.svg" class="" title="è®°å½•ä¸€æ¬¡æºç é˜…è¯»"><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;img src=&quot;/2019/05/12/requests%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/requests%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB.svg&quot; class=&quot;&quot; title=&quot;è®°å½•ä¸€æ¬¡æºç é˜…
      
    
    </summary>
    
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="pythonï¼Œè¯»ä¹¦ç¬”è®°" scheme="https://yikayiyo.github.io/tags/python%EF%BC%8C%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>DevOps for dummies</title>
    <link href="https://yikayiyo.github.io/2019/02/25/devops/"/>
    <id>https://yikayiyo.github.io/2019/02/25/devops/</id>
    <published>2019-02-25T09:19:00.000Z</published>
    <updated>2019-03-05T14:37:46.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å…³é”®è¯"><a href="#å…³é”®è¯" class="headerlink" title="å…³é”®è¯"></a>å…³é”®è¯</h3><p>business-driven, people, practice, tools</p><h3 id="åŸåˆ™"><a href="#åŸåˆ™" class="headerlink" title="åŸåˆ™"></a>åŸåˆ™</h3><ul><li>Develop and test against production-like systems </li><li>Deploy with repeatable, reliable processes</li><li>Monitor and validate operational quality</li><li>Amplify feedback loops<a id="more"></a><h3 id="æ¶æ„"><a href="#æ¶æ„" class="headerlink" title="æ¶æ„"></a>æ¶æ„</h3></li></ul><img src="/2019/02/25/devops/devops.png" class="" title="devops"><h3 id="Notes"><a href="#Notes" class="headerlink" title="Notes"></a>Notes</h3><ul><li>DevOps isnâ€™t the goal. It helps you reach your goals</li><li>Any kind of system that needs <strong>rapid</strong> delivery of <strong>innovation</strong> requires DevOps</li></ul><ul><li><p>In broad terms, DevOps is an approach based on <strong>lean and agile principles</strong> in which business owners and the development, operations, and quality assurance departments collaborate to deliver software <strong>in a continuous manner</strong> that enables the business to more quickly seize market opportunities and reduce the time to include customer feedback</p></li><li><p>A true DevOps approach includes lines of business, practitioners, executives, partners, suppliers, and so on</p></li><li><p><strong>Continuous testing</strong> is facilitated by adopting capabilities like <strong>automated testing</strong> and <strong>service virtualization</strong></p></li><li><p>software-defined environments enable you to capture infrastructure as a kind of programmable and repeatable pattern, thereby accelerating deployments</p></li><li><p>Collaboration and communication across stakeholders â€” thatâ€™s the culture of DevOps.</p></li><li><p>Giving all stakeholders <strong>visibility</strong> into a projectâ€™s goals and status is crucial for building a DevOps culture based on trust and collaboration.</p></li><li><p>Processes define what those people do. Your organization can have a great culture of collaboration, but if people are doing the wrong things or doing the right things in the wrong way, failure is still likely.</p></li><li><p>Adopting continuous delivery typically is the most critical part of adopting DevOps.</p></li><li><p>From a process perspective, you need to adopt processes in three areas to enable <strong>continuous testing</strong>:</p><p>âœ“ Test environment provisioning and configuration</p><p>âœ“ Test data management</p><p>âœ“ Test integration, function, performance, and security</p></li><li><p>If an organization is building or maintaining multiple applications, everything it does has to be repeatable, in a reliable manner, to ensure quality across all applications</p></li><li><p>Start by focusing on the critical parts of organization â€” not everything all at once â€” and then gradually broaden to include all stages</p></li><li><p>The build stage is where the code is compiled to create and unit test the binaries to be deployed. Multiple build tools may be used in this stage, based on cross-platform and cross-technology needs</p></li><li><p>Development organizations typically use <strong>build servers</strong> to facilitate the large number of builds required on an ongoing basis to enable continuous integration</p></li><li><p>For any organization that wants to enable <strong>continuous testing</strong>, <strong>managing test data</strong> is an essential function</p></li><li><p>end-to-end Develop/Test environments =  cloud environments + deployment automation + service virtualization</p></li><li><p>Cloud without DevOps means not leveraging all the benefits of cloud</p></li><li><p>When adopting cloud, you first want to decide on the scope of responsibility that you plan to hand over to the cloud platform and what responsibility you want to take on yourself</p></li><li><p>two primary service models for cloud: Infrastructure as a Service (<strong>IaaS</strong>) and Platform as a Service (<strong>PaaS</strong>)</p></li><li><p>treats infrastructure as code best practicesï¼š</p><ul><li>Treat pattern definitions, script packages, and services as code</li><li>version everything</li><li>Automate deployment of topology patterns to the cloud</li><li>Manage versions of patterns across multiple cloud environments</li><li>Automate the testing of patterns</li><li>Cleanup catalog resources to avoid sprawl</li></ul></li><li><p>Ten DevOps myths:</p><ul><li>DevOps Is Only for â€œBorn on the Webâ€ Shops</li><li>DevOps Is Operations Learning How to Code</li><li>DevOps Is Just for Development and Operations</li><li>DevOps Isnâ€™t for ITIL Shops</li><li>DevOps Isnâ€™t for Regulated Industries</li><li>DevOps Isnâ€™t for Outsourced Development</li><li>No Cloud Means No DevOps</li><li>DevOps Isnâ€™t for Large, Complex Systems</li><li>DevOps Is Only about Communication</li><li>DevOps Means Continuous Change Deployment</li></ul></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å…³é”®è¯&quot;&gt;&lt;a href=&quot;#å…³é”®è¯&quot; class=&quot;headerlink&quot; title=&quot;å…³é”®è¯&quot;&gt;&lt;/a&gt;å…³é”®è¯&lt;/h3&gt;&lt;p&gt;business-driven, people, practice, tools&lt;/p&gt;
&lt;h3 id=&quot;åŸåˆ™&quot;&gt;&lt;a href=&quot;#åŸåˆ™&quot; class=&quot;headerlink&quot; title=&quot;åŸåˆ™&quot;&gt;&lt;/a&gt;åŸåˆ™&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Develop and test against production-like systems &lt;/li&gt;
&lt;li&gt;Deploy with repeatable, reliable processes&lt;/li&gt;
&lt;li&gt;Monitor and validate operational quality&lt;/li&gt;
&lt;li&gt;Amplify feedback loops&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="è¯»ä¹¦ç¬”è®°" scheme="https://yikayiyo.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>å¼‚æ­¥ç½‘ç»œç¼–ç¨‹</title>
    <link href="https://yikayiyo.github.io/2018/11/25/python%E5%BC%82%E6%AD%A5/"/>
    <id>https://yikayiyo.github.io/2018/11/25/python%E5%BC%82%E6%AD%A5/</id>
    <published>2018-11-25T08:14:00.000Z</published>
    <updated>2019-05-18T09:14:12.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å…³é”®è¯"><a href="#å…³é”®è¯" class="headerlink" title="å…³é”®è¯"></a>å…³é”®è¯</h3><p>åç¨‹ã€ç”Ÿæˆå™¨</p><h3 id="ç¬”è®°"><a href="#ç¬”è®°" class="headerlink" title="ç¬”è®°"></a>ç¬”è®°</h3><ul><li><p>åç¨‹ï¼šåˆç§°ä½œCoroutineã€‚ä»å­—é¢ä¸Šæ¥ç†è§£ï¼Œå³ååŒè¿è¡Œçš„ä¾‹ç¨‹ï¼Œå®ƒæ˜¯æ¯”æ˜¯çº¿ç¨‹ï¼ˆthreadï¼‰æ›´ç»†é‡çº§çš„ç”¨æˆ·æ€çº¿ç¨‹ï¼Œç‰¹ç‚¹æ˜¯å…è®¸ç”¨æˆ·çš„ä¸»åŠ¨è°ƒç”¨å’Œä¸»åŠ¨é€€å‡ºï¼ŒæŒ‚èµ·å½“å‰çš„ä¾‹ç¨‹ç„¶åè¿”å›å€¼æˆ–å»æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œæ¥ç€è¿”å›åˆ°åŸæ¥åœä¸‹çš„ç‚¹ç»§ç»­æ‰§è¡Œ</p></li><li><p>æœ‰æ—¶é—´å†å†™ã€‚ã€‚ã€‚</p></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;å…³é”®è¯&quot;&gt;&lt;a href=&quot;#å…³é”®è¯&quot; class=&quot;headerlink&quot; title=&quot;å…³é”®è¯&quot;&gt;&lt;/a&gt;å…³é”®è¯&lt;/h3&gt;&lt;p&gt;åç¨‹ã€ç”Ÿæˆå™¨&lt;/p&gt;
&lt;h3 id=&quot;ç¬”è®°&quot;&gt;&lt;a href=&quot;#ç¬”è®°&quot; class=&quot;headerlink&quot; title=&quot;ç¬”è®°&quot;
      
    
    </summary>
    
    
    
      <category term="python" scheme="https://yikayiyo.github.io/tags/python/"/>
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>éå†äºŒå‰æ ‘</title>
    <link href="https://yikayiyo.github.io/2018/06/19/%E9%81%8D%E5%8E%86%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
    <id>https://yikayiyo.github.io/2018/06/19/%E9%81%8D%E5%8E%86%E4%BA%8C%E5%8F%89%E6%A0%91/</id>
    <published>2018-06-19T01:47:01.000Z</published>
    <updated>2020-06-19T06:05:03.130Z</updated>
    
    <content type="html"><![CDATA[<p><span class="github-emoji" style="color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/2b50.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/2b50.png?v8">â­</span>éé€’å½’å®ç°</p><h3 id="ä¸­åºéå†"><a href="#ä¸­åºéå†" class="headerlink" title="ä¸­åºéå†"></a>ä¸­åºéå†</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inorderTraversal</span><span class="params">(self, root: TreeNode)</span> -&gt; List[int]:</span></span><br><span class="line">        cur = root  <span class="comment">#å€ŸåŠ©ä¸´æ—¶çš„curï¼Œä¸è¦ä¿®æ”¹root</span></span><br><span class="line">        res = []</span><br><span class="line">        stack = []</span><br><span class="line">        <span class="keyword">while</span> cur <span class="keyword">or</span> stack:</span><br><span class="line">            <span class="keyword">if</span> cur:  <span class="comment"># ä¸€ç›´å¾€å·¦èµ°ï¼Œå…¨éƒ¨å…¥æ ˆ</span></span><br><span class="line">                stack.append(cur) </span><br><span class="line">                cur = cur.left</span><br><span class="line">            <span class="keyword">else</span>:  <span class="comment"># å–å‡ºæ ˆé¡¶èŠ‚ç‚¹ï¼Œå¤„ç†ï¼Œå†å¤„ç†è¯¥èŠ‚ç‚¹çš„å³å­æ ‘   </span></span><br><span class="line">                cur = stack.pop()</span><br><span class="line">                res.append(cur.val)  </span><br><span class="line">                cur = cur.right</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></tbody></table></figure><h3 id="å‰åºéå†"><a href="#å‰åºéå†" class="headerlink" title="å‰åºéå†"></a>å‰åºéå†</h3><p>å†™æ³•ä¸€</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">preorderTraversal</span><span class="params">(self, root: TreeNode)</span> -&gt; List[int]:</span></span><br><span class="line">        cur = root</span><br><span class="line">        res = []</span><br><span class="line">        stack = []</span><br><span class="line">        <span class="keyword">while</span> cur <span class="keyword">or</span> stack:</span><br><span class="line">            <span class="keyword">if</span> cur:</span><br><span class="line">                stack.append(cur)  <span class="comment"># æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ”¾å…¥æ ˆä¸­</span></span><br><span class="line">                res.append(cur.val)</span><br><span class="line">                cur = cur.left</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                cur = stack.pop()  <span class="comment"># è¿™é‡Œpopå‡ºæ¥çš„æ˜¯å·²ç»è®¿é—®è¿‡çš„èŠ‚ç‚¹</span></span><br><span class="line">                cur = cur.right  <span class="comment"># è¿˜éœ€è¦æŒ‡å‘å³å­æ ‘</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji" style="color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/2764.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png?v8">â¤</span>å†™æ³•äºŒï¼š<a id="more"></a></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">preorderTraversal</span><span class="params">(self, root: TreeNode)</span> -&gt; List[int]:</span></span><br><span class="line">        cur = root</span><br><span class="line">        res = []</span><br><span class="line">        stack = []</span><br><span class="line">        <span class="keyword">while</span> cur <span class="keyword">or</span> stack:</span><br><span class="line">            <span class="keyword">if</span> cur:</span><br><span class="line">                stack.append(cur.right)  <span class="comment"># æ ˆä¸­ç›´æ¥æ”¾å…¥å·²è®¿é—®èŠ‚ç‚¹çš„å³å­æ ‘</span></span><br><span class="line">                res.append(cur.val)</span><br><span class="line">                cur = cur.left</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                cur = stack.pop()  <span class="comment"># å–åˆ°çš„å°±æ˜¯å³å­æ ‘æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></tbody></table></figure><p> <span class="github-emoji" style="color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f610.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f610.png?v8">ğŸ˜</span>å†™æ³•ä¸‰ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">preorderTraversal</span><span class="params">(self, root)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type root: TreeNode</span></span><br><span class="line"><span class="string">        :rtype: List[int]</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        stack, output = [root], []</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> stack:</span><br><span class="line">            root = stack.pop()</span><br><span class="line">            <span class="keyword">if</span> root <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                output.append(root.val)</span><br><span class="line">                <span class="keyword">if</span> root.right <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:  <span class="comment">#å³å­æ ‘å…ˆå…¥æ ˆï¼Œå·¦å­æ ‘åå…¥æ ˆ</span></span><br><span class="line">                    stack.append(root.right)</span><br><span class="line">                <span class="keyword">if</span> root.left <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                    stack.append(root.left)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> output</span><br></pre></td></tr></tbody></table></figure><h3 id="ååºéå†"><a href="#ååºéå†" class="headerlink" title="ååºéå†"></a>ååºéå†</h3><p><a href="https://leetcode-cn.com/problems/binary-tree-postorder-traversal/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/binary-tree-postorder-traversal/</a></p><p>å¯¹äºå½“å‰èŠ‚ç‚¹ï¼Œåªæœ‰å…¶<strong>å³å­æ ‘å·²ç»å¤„ç†</strong>æˆ–<strong>æ²¡æœ‰å³å­æ ‘</strong>æ—¶ï¼Œæ‰èƒ½å¤„ç†å®ƒã€‚</p><p><span class="github-emoji" style="color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f440.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f440.png?v8">ğŸ‘€</span>è¿™é‡Œè¦è®°å½•ä¸€ä¸ªlast_visitedèŠ‚ç‚¹â€‹â€‹</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">postorderTraversal</span><span class="params">(self, root: TreeNode)</span> -&gt; List[int]:</span></span><br><span class="line">        cur = root</span><br><span class="line">        res = []</span><br><span class="line">        stack = []</span><br><span class="line">        last_visited = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">while</span> cur <span class="keyword">or</span> stack:</span><br><span class="line">            <span class="keyword">if</span> cur:</span><br><span class="line">                stack.append(cur)</span><br><span class="line">                cur = cur.left</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                tmp = stack[<span class="number">-1</span>]  <span class="comment"># å®šä½æ ¹èŠ‚ç‚¹ï¼Œè¿™ä¸ªåœ°æ–¹ä¸èƒ½pop(),å› ä¸ºå¯èƒ½æœ‰å³å­æ ‘</span></span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> tmp.right <span class="keyword">or</span> tmp.right == last_visited:  </span><br><span class="line">                    <span class="comment"># æ²¡æœ‰å³å­æ ‘æˆ–è€…å·²ç»è®¿é—®è¿‡äº†ï¼Œå¤„ç†å½“å‰æ ¹èŠ‚ç‚¹</span></span><br><span class="line">                    res.append(tmp.val)</span><br><span class="line">                    last_visited = tmp</span><br><span class="line">                    stack.pop()</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    cur = tmp.right  <span class="comment"># å³å­æ ‘æœªè®¿é—®ï¼Œå¤„ç†å³å­æ ‘</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></tbody></table></figure><p><span class="github-emoji" style="color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/2764.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png?v8">â¤</span>ååºéå†å¯ä»¥å€Ÿå‰åºéå†çš„ä¸€ä¸ªå˜ä½“å®ç°ï¼Œ<strong>å…ˆæ ¹å³å·¦,å†å€’ç½®</strong>ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">preorderTraversal</span><span class="params">(self, root: TreeNode)</span> -&gt; List[int]:</span></span><br><span class="line">        cur = root</span><br><span class="line">        res = []</span><br><span class="line">        stack = []</span><br><span class="line">        <span class="keyword">while</span> cur <span class="keyword">or</span> stack:</span><br><span class="line">            <span class="keyword">if</span> cur:</span><br><span class="line">                stack.append(cur.left)  <span class="comment"># æ ˆä¸­ç›´æ¥æ”¾å…¥å·²è®¿é—®èŠ‚ç‚¹çš„å·¦å­æ ‘</span></span><br><span class="line">                res.append(cur.val)</span><br><span class="line">                cur = cur.right</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                cur = stack.pop()  <span class="comment"># å–åˆ°çš„å°±æ˜¯å·¦å­æ ‘æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> res[::<span class="number">-1</span>]</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;span class=&quot;github-emoji&quot; style=&quot;color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/2b50.png?v8) center/contain&quot; data-src=&quot;https://github.githubassets.com/images/icons/emoji/unicode/2b50.png?v8&quot;&gt;â­&lt;/span&gt;éé€’å½’å®ç°&lt;/p&gt;
&lt;h3 id=&quot;ä¸­åºéå†&quot;&gt;&lt;a href=&quot;#ä¸­åºéå†&quot; class=&quot;headerlink&quot; title=&quot;ä¸­åºéå†&quot;&gt;&lt;/a&gt;ä¸­åºéå†&lt;/h3&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Solution&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;inorderTraversal&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, root: TreeNode)&lt;/span&gt; -&amp;gt; List[int]:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        cur = root  &lt;span class=&quot;comment&quot;&gt;#å€ŸåŠ©ä¸´æ—¶çš„curï¼Œä¸è¦ä¿®æ”¹root&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        res = []&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        stack = []&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; cur &lt;span class=&quot;keyword&quot;&gt;or&lt;/span&gt; stack:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; cur:  &lt;span class=&quot;comment&quot;&gt;# ä¸€ç›´å¾€å·¦èµ°ï¼Œå…¨éƒ¨å…¥æ ˆ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                stack.append(cur) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                cur = cur.left&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;:  &lt;span class=&quot;comment&quot;&gt;# å–å‡ºæ ˆé¡¶èŠ‚ç‚¹ï¼Œå¤„ç†ï¼Œå†å¤„ç†è¯¥èŠ‚ç‚¹çš„å³å­æ ‘   &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                cur = stack.pop()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                res.append(cur.val)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                cur = cur.right&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; res&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&quot;å‰åºéå†&quot;&gt;&lt;a href=&quot;#å‰åºéå†&quot; class=&quot;headerlink&quot; title=&quot;å‰åºéå†&quot;&gt;&lt;/a&gt;å‰åºéå†&lt;/h3&gt;&lt;p&gt;å†™æ³•ä¸€&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Solution&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;preorderTraversal&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(self, root: TreeNode)&lt;/span&gt; -&amp;gt; List[int]:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        cur = root&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        res = []&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        stack = []&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; cur &lt;span class=&quot;keyword&quot;&gt;or&lt;/span&gt; stack:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; cur:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                stack.append(cur)  &lt;span class=&quot;comment&quot;&gt;# æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ”¾å…¥æ ˆä¸­&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                res.append(cur.val)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                cur = cur.left&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                cur = stack.pop()  &lt;span class=&quot;comment&quot;&gt;# è¿™é‡Œpopå‡ºæ¥çš„æ˜¯å·²ç»è®¿é—®è¿‡çš„èŠ‚ç‚¹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                cur = cur.right  &lt;span class=&quot;comment&quot;&gt;# è¿˜éœ€è¦æŒ‡å‘å³å­æ ‘&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; res&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;span class=&quot;github-emoji&quot; style=&quot;color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/2764.png?v8) center/contain&quot; data-src=&quot;https://github.githubassets.com/images/icons/emoji/unicode/2764.png?v8&quot;&gt;â¤&lt;/span&gt;å†™æ³•äºŒï¼š&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="å­¦ä¹ ç¬”è®°ï¼ŒäºŒå‰æ ‘" scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8C%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
    
  </entry>
  
  <entry>
    <title>word2vec + manage experiments</title>
    <link href="https://yikayiyo.github.io/2018/04/05/%E8%AF%8D%E5%90%91%E9%87%8F/"/>
    <id>https://yikayiyo.github.io/2018/04/05/%E8%AF%8D%E5%90%91%E9%87%8F/</id>
    <published>2018-04-05T14:30:10.000Z</published>
    <updated>2018-07-25T06:51:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>å…³é”®è¯ï¼šmodel base, variable sharing, model sharing</p><h4 id="word2vec"><a href="#word2vec" class="headerlink" title="word2vec"></a>word2vec</h4><ul><li>æ–‡æœ¬çš„åˆ†å¸ƒå¼è¡¨ç¤ºæ˜¯è®¸å¤šè‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡çš„åŸºç¡€</li><li>word2vecæ˜¯ç”¨æ¥ç”Ÿæˆè¯è¯­åˆ†å¸ƒå¼è¡¨ç¤ºçš„ä¸€ç»„æ¨¡å‹</li><li>ä¸»è¦æœ‰ä¸¤ç§æ¨¡å‹ï¼šskip-gramå’ŒCBOW</li><li>ç®—æ³•è§’åº¦ï¼šCBOWæ¨¡å‹ä»ä¸Šä¸‹æ–‡è¯é¢„æµ‹ç›®æ ‡è¯ï¼Œskip-gramæ¨¡å‹ä»ç›®æ ‡è¯é¢„æµ‹ä¸Šä¸‹æ–‡è¯<a id="more"></a></li><li>ç»Ÿè®¡è§’åº¦ï¼šCBOWæ¨¡å‹å°†an entire context as one observationï¼Œè¿™æ ·åšsmoothes overäº†è®¸å¤šåˆ†å¸ƒä¿¡æ¯ï¼Œé€‚åˆå°ä¸€äº›çš„æ•°æ®é›†ä¸Šï¼›skip-gramæ¨¡å‹åˆ™æ˜¯å°†<strong>each</strong> context-target pair as a new observationï¼Œåœ¨larger datasetsä¸Šè¡¨ç°æ›´å¥½</li><li>è®­ç»ƒè¯å‘é‡ï¼šå®šä¹‰ä¸€ä¸ªå•å±‚ç½‘ç»œï¼Œä»»åŠ¡æ˜¯ç»™å®šä¸­å¿ƒè¯é¢„æµ‹è¯å…¸ä¸­çš„è¯ä½œä¸ºä¸Šä¸‹æ–‡è¯çš„æ¦‚ç‡ï¼Œæˆ‘ä»¬æœ€åè¦çš„æ˜¯éšå«å±‚çš„æƒé‡å‚æ•°</li><li>ä½¿ç”¨ softmax æ¥è·å¾—å¯èƒ½çš„ç›®æ ‡è¯çš„åˆ†å¸ƒï¼Œåˆ†æ¯è¦å¯¹å­—å…¸ä¸­çš„æ‰€æœ‰è¯å–æŒ‡æ•°å†æ±‚å’Œï¼Œè®¡ç®—æ˜¯ç“¶é¢ˆ</li><li>è§„é¿ç“¶é¢ˆçš„æ–¹æ³•ï¼šå±‚æ¬¡åŒ–çš„softmax å’ŒåŸºäºé‡‡æ ·çš„ softmax </li><li>æ–‡ç« *<em>Distributed Representations of Words and Phrases and their Compositionality *</em>æŒ‡å‡ºï¼Œè®­ç»ƒskip-gramæ¨¡å‹æ—¶ï¼Œä¸æ›´å¤æ‚çš„åˆ†å±‚softmaxç›¸æ¯”ï¼Œè´Ÿé‡‡æ ·å¯ä»¥åŠ å¿«è®­ç»ƒé€Ÿåº¦ï¼Œä¸ºé¢‘ç¹è¯æ±‡æä¾›æ›´å¥½çš„å‘é‡è¡¨ç¤º</li><li>è´Ÿé‡‡æ ·å®é™…ä¸Šæ˜¯ä¸€ç§ç§°ä¸ºå™ªå£°å¯¹æ¯”ä¼°è®¡ï¼ˆNCEï¼‰çš„ç®€åŒ–æ¨¡å‹ï¼ŒåŸºäºå‡è®¾ï¼Œå¦‚å™ªå£°æ ·æœ¬çš„æ•°é‡kå’Œå™ªå£°æ ·æœ¬çš„åˆ†å¸ƒQæ»¡è¶³kQ(w) = 1ï¼Œæ¥ç®€åŒ–è®¡ç®—ï¼›ç†è®ºä¸Šä¸èƒ½ä¿è¯å…¶å¯¼æ•°å’Œsoftmaxæ¢¯åº¦ä¸€è‡´</li><li>NCEåˆ™éšç€noiseæ ·æœ¬å¢å¤šï¼Œæä¾›äº†è¿™ç§ä¿è¯</li><li>è´Ÿé‡‡æ ·å’ŒNCEåªåœ¨è®­ç»ƒæ—¶æœ‰ç”¨</li></ul><h4 id="Implementing"><a href="#Implementing" class="headerlink" title="Implementing"></a>Implementing</h4><ul><li>è¯çš„indicesä½œä¸ºè¾“å…¥ï¼ˆä¸€ä¸ªscalarï¼‰ï¼Œ</li><li>BATCH_SIZEçš„æ ·æœ¬ï¼Œè¾“å…¥ç»´åº¦ä¸º[BATCH_SIZE]ï¼Œè¾“å‡ºç»´åº¦ä¸º[BATCH_SIZE,1]</li><li>è¯å‘é‡çŸ©é˜µç»´åº¦ä¸º[VOCAB_SIZE,EMBED_SIZE]ï¼Œæ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªè¯å‘é‡</li><li>åˆ©ç”¨tf.nn.embedding_lookup()æ‰¾ä¸­å¿ƒè¯å¯¹åº”çš„å‘é‡ï¼Œå…å»äº†ä¸å¿…è¦çš„è®¡ç®—ï¼ˆmatrix and onehot vectorï¼‰</li><li>lossä½¿ç”¨tf.nn.nce_loss()ï¼Œoptimizerä½¿ç”¨GradientDescentOptimizer</li></ul><h4 id="Structure-TF-models"><a href="#Structure-TF-models" class="headerlink" title="Structure TF models"></a>Structure TF models</h4><p>å®šä¹‰å›¾</p><ul><li>å¯¼å…¥æ•°æ®ï¼ˆplaceholder or tf.dataï¼‰</li><li>å®šä¹‰æƒé‡</li><li>å®šä¹‰æ¨¡å‹</li><li>å®šä¹‰æŸå¤±å‡½æ•°</li><li>å®šä¹‰ä¼˜åŒ–å™¨</li></ul><p>æ‰§è¡Œå›¾</p><ul><li>åˆå§‹åŒ–æ‰€æœ‰å˜é‡</li><li>åˆå§‹åŒ–è¿­ä»£å™¨æˆ–è€…feed inè®­ç»ƒæ•°æ®</li><li>æ•°æ®ç»è¿‡æ¨¡å‹å¾—åˆ°ç»“æœ</li><li>è®¡ç®—cost</li><li>è°ƒæ•´æ¨¡å‹å‚æ•°ä½¿å¾—costæœ€å°æˆ–è€…æœ€å¤§</li></ul><p>build model as a class in order to reuse easily.</p><h4 id="Variable-sharing"><a href="#Variable-sharing" class="headerlink" title="Variable sharing"></a>Variable sharing</h4><p>Name scope</p><p>å°†ç›¸å…³çš„opsæ”¾åœ¨ä¸€ä¸ªname_scopeä¸‹ï¼Œè¿™æ ·å¾—åˆ°çš„å›¾åœ¨TensorBoardä¸Šæ˜¯ä¸€å—ä¸€å—çš„ï¼Œæ›´åŠ æ•´æ´ã€‚<br>TensorBoardå›¾ä¸­ä¸‰ç§è¾¹ï¼š</p><ol><li>ç°å®è¾¹ï¼šæ•°æ®æµ</li><li>æ©™å®è¾¹ï¼šå‚è€ƒè¾¹ï¼Œop_lestå½±å“op_right</li><li>ç°è™šè¾¹ï¼šæ§åˆ¶ä¾èµ–è¾¹ï¼Œop_leftä¾èµ–äºop_right</li></ol><p>Variable scope</p><p>å’ŒName scopeä¸€æ ·éƒ½åˆ›å»ºäº†namespaceï¼Œè°ƒç”¨tf.variable_scope(â€œnameâ€)ä¼šéšå¼åœ°è°ƒç”¨tf.name_scope(â€œnameâ€)ï¼ŒVariable scopeä¸»è¦åŠŸèƒ½æ˜¯ä¿ƒè¿›å˜é‡å…±äº«ï¼ˆfacilitate variable sharing)<br>ä¸ºå®ç°å˜é‡å…±äº«:</p><ol><li>ä½¿ç”¨ <strong>tf.get_variable()</strong>,å®ƒä¼šåœ¨åˆ›å»ºå˜é‡ä¹‹å‰æ£€æŸ¥å…¶æ˜¯å¦å­˜åœ¨</li><li>å°†æ‰€ç”¨åˆ°çš„å˜é‡æ”¾åˆ°ä¸€ä¸ªVarScopeï¼Œå°†è¿™ä¸ªVarScopeè®¾ç½®ä¸ºå¯å¤ç”¨çš„ï¼ˆreusableï¼‰</li></ol><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fully_connected</span><span class="params">(x,output_dim,scope_name)</span>:</span> <span class="comment">#åŸºç¡€ç»„ä»¶ï¼šå…¨è¿æ¥å±‚</span></span><br><span class="line">    <span class="keyword">with</span> tf.variable_scope(scope_name):</span><br><span class="line">        w = tf.get_variable(<span class="string">"weights"</span>,[x.shape[<span class="number">1</span>],output_dim],initializer=tf.random_normal_initializer())</span><br><span class="line">        b = tf.get_variable(<span class="string">"bias"</span>,[output_dim],initializer= tf.constant_initializer(<span class="number">0.0</span>))</span><br><span class="line">        <span class="keyword">return</span> tf.matmul(x,w) + b</span><br><span class="line">        </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">two_hidden_layer</span><span class="params">(x)</span>:</span>  <span class="comment">#ç½‘ç»œç»“æ„ï¼šä¸¤ä¸ªå…¨è¿æ¥å±‚</span></span><br><span class="line">    h1 = fully_connected(x,<span class="number">50</span>,<span class="string">'h1'</span>)</span><br><span class="line">    h2 = fully_connected(h1,<span class="number">10</span>,<span class="string">'h2'</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">with</span> tf.variable_scope(<span class="string">'two_layers'</span>) <span class="keyword">as</span> scope: <span class="comment">#è°ƒç”¨ç½‘ç»œï¼Œè¾“å…¥x1ï¼Œx2</span></span><br><span class="line">    logits1 = two_hidden_layer(x1)</span><br><span class="line">    scope.reuse_variables()</span><br><span class="line">    logits2 = two_hidden_layer(x2ï¼‰</span><br></pre></td></tr></tbody></table></figure><p>ä»¥ä¸Šä»£ç æ¨¡å¼ï¼ŒåŸºç¡€ç»„ä»¶å¯ä»¥å®šä¹‰æ›´å¤šï¼Œæ¯”å¦‚convï¼Œreluï¼Œç½‘ç»œç»“æ„å¯ä»¥æ›´å¤æ‚ï¼Œæ¯”å¦‚æ”¾ä¸€ä¸ªResNetï¼Œéå¸¸å®¹æ˜“scaleã€‚<br>ç”±äºä½¿ç”¨äº†å˜é‡å…±äº«ï¼Œå¤šæ¬¡ä¼ å…¥xï¼Œç½‘ç»œTensorBoardå›¾çš„å¤æ‚ç¨‹åº¦ä¸ä¼šçˆ†ç‚¸å¼å¢åŠ ã€‚</p><p>Graph collections</p><p>ä½¿ç”¨è¿™ä¸ªï¼Œå¯ä»¥è·å–æ»¡è¶³ä¸€å®šæ¡ä»¶çš„æ‰€æœ‰å˜é‡ï¼Œtf.get_collection(key,scope=None)<br>æ¯”å¦‚æ‰§è¡Œoptimizerçš„æ—¶å€™ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒä¼šè·å–key=tf.GraphKeys.TRAINABLE_VARIABLESçš„å˜é‡ï¼Œå³æ‰€æœ‰å¯è®­ç»ƒçš„å˜é‡ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥ä¼ å…¥æŒ‡å®šçš„ã€è¦è®­ç»ƒçš„å˜é‡<br>è·å–æŸä¸ªscopeä¸‹çš„æ‰€æœ‰å˜é‡ï¼Œtf.get_collection(tf.GraphKeys.GLOBAL_VARIABLES,scope=â€™scope_nameâ€™)<br>keyè¿˜æœ‰è®¸å¤šå…¶å®ƒçš„å€¼ï¼Œè§å®˜ç½‘ã€‚</p><h4 id="Manage-experiments"><a href="#Manage-experiments" class="headerlink" title="Manage experiments"></a>Manage experiments</h4><p>å®éªŒæ€»æ˜¯å¾ˆä¹…ï¼Œä¸­æ–­éšæ—¶å‘ç”Ÿï¼Œå› æ­¤è®­ç»ƒå¯ä»¥éšæ—¶éšåœ°åœæ­¢ã€åƒæ²¡äº‹ä¸€æ ·æ¢å¤ï¼Œéå¸¸é‡è¦ã€‚<br>å¦å¤–ä¸€ä¸ªé—®é¢˜æ˜¯è®ºæ–‡ç»“æœå¤ç°ï¼Œæ§åˆ¶å®éªŒçš„éšæœºå› å­å¯¹å¤ç°ç»“æœéå¸¸å…³é”®ã€‚</p><p>tf.train.Saver()</p><p><strong>å‘¨æœŸæ€§åœ°ä¿å­˜æ¨¡å‹å‚æ•°</strong>æ˜¯ä¸ªå¥½ä¹ æƒ¯<br>tf.train.Saver()ç±»å°†å›¾çš„<strong>å˜é‡ä¿å­˜</strong>ï¼ˆä¸æ˜¯æ•´å¼ å›¾ï¼‰åˆ°äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªcheckpointï¼ˆå˜é‡ååˆ°tensorsçš„æ˜ å°„ï¼‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®šä¹‰æ¨¡å‹</span></span><br><span class="line">...</span><br><span class="line">global_steps = tf.Variable(<span class="number">0</span>, trainable=<span class="literal">False</span>ï¼Œname=<span class="string">'global_steps'</span>)</span><br><span class="line">optimizer = tf.train.GradientDescentOptimizer(lr).minimize(loss,global_step=global_steps)</span><br><span class="line"><span class="comment">#åˆ›å»ºä¸€ä¸ªsaverå¯¹è±¡</span></span><br><span class="line">saver = tf.train.Saver()</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯åŠ¨ä¸€ä¸ªä¼šè¯æ¥æ‰§è¡Œè®¡ç®—</span></span><br><span class="line"><span class="keyword">with</span> tf.session() <span class="keyword">as</span> sess:</span><br><span class="line"><span class="keyword">for</span> step <span class="keyword">in</span> range(<span class="number">1</span>,training_steps):</span><br><span class="line">        sess.run([optimizer]) <span class="comment">#global_stepä¼šåœ¨æ¯ä¸€æ­¥è®­ç»ƒåè‡ªåŠ 1</span></span><br><span class="line">        <span class="keyword">if</span> step%<span class="number">1000</span>==<span class="number">0</span>:</span><br><span class="line">            <span class="comment">#è¿™é‡Œä¼ å…¥stepä¹Ÿå·®ä¸å¤šå§...é»˜è®¤ä¿å­˜å›¾ä¸­æ‰€æœ‰å˜é‡</span></span><br><span class="line">            saver.save(sess,<span class="string">'checkpoints/model-name'</span>,global_step=global_steps)</span><br></pre></td></tr></tbody></table></figure><p>ç”Ÿæˆçš„checkpointåï¼Œåƒè¿™æ ·ï¼Œâ€™checkpoints/skip-gram-10000â€™<br>åœ¨æ¢å¤æ¨¡å‹æ—¶å¯ä»¥ç›´æ¥ä¼ å…¥checkpointåï¼ˆå¦‚æœæœ‰çš„è¯</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ckpt = tf.train.get_checkpoint_state(os.path.dirname(<span class="string">'checkpoints/model-name'</span>))</span><br><span class="line"><span class="keyword">if</span> ckpt <span class="keyword">and</span> ckpt.model_checkpoint_path:</span><br><span class="line">    saver.restore(sess,ckpt.model_checkpoint_path) <span class="comment">#æ¢å¤çš„æ˜¯æœ€è¿‘çš„ä¸€ä¸ªcheck point</span></span><br></pre></td></tr></tbody></table></figure><p>æ¢å¤çš„æ—¶å€™ï¼Œç½‘ç»œå›¾è¿˜å¾—è‡ªå·±é‡æ–°æ­ï¼ˆstill have to create the graph ourselvesï¼‰ä¹‹åå†åŠ è½½å˜é‡<br>å½“ç„¶ï¼Œç»å¸¸çš„åšæ³•æ˜¯åˆ°ç›®å‰ä¸ºæ­¢è¡¨ç°æœ€å¥½çš„å‚æ•°ä¹Ÿä¿å­˜ä¸‹æ¥ï¼ˆä¸æ­¢æ˜¯æœ€è¿‘çš„ä¸€æ¬¡ï¼‰</p><p>tf.summary</p><p>è®°å½•æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­æŒ‡æ ‡å˜åŒ–ï¼ŒåŒ…æ‹¬lossï¼Œaccuracyç­‰ç­‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºsummaries</span></span><br><span class="line"><span class="keyword">with</span> tf.name_scope(<span class="string">"summaries"</span>):</span><br><span class="line">    tf.summary.scalar(<span class="string">"loss"</span>,loss)</span><br><span class="line">    tf.summary.histogram(<span class="string">"histogram loss"</span>,loss)</span><br><span class="line">    tf.summary.scalar(<span class="string">"accuracy"</span>,accuracy)</span><br><span class="line">    summary_op = tf.summary.merge_all()</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰§è¡Œsummary op</span></span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    <span class="keyword">for</span> step <span class="keyword">in</span> range(steps):</span><br><span class="line">        _loss,_,summary = sess.run([model.loss,model.optimizer,model.summary_op],feed_dict={...})</span><br><span class="line">        writer = tf.summary.FileWriter(<span class="string">'path'</span>+str(lr),sess.graph) <span class="comment">#å°†lrå†™å…¥è·¯å¾„ï¼Œæ–¹ä¾¿tensorboardå¯¹æ¯”</span></span><br><span class="line">        writer.add(summary,global_step=step) <span class="comment">#è®°å½•æ¯ä¸€ä¸ªstepçš„summary</span></span><br><span class="line">    writer.close()</span><br></pre></td></tr></tbody></table></figure><p>control randomization</p><p>ä¸ºäº†ä½¿å¾—åˆ«äººåœ¨å®éªŒæ—¶ç»“æœä¼šä¸ä½ ä¸€è‡´</p><ol><li><p>opçº§åˆ«<br>æ‰€æœ‰çš„tensoråˆå§‹åŒ–æ—¶éƒ½ä¼ å…¥seedå‚æ•°<br>sessionè®°å½•äº†éšæœºçŠ¶æ€ï¼Œæ¯ä¸€ä¸ªæ–°çš„sessionéƒ½ä¼šé‡æ–°start the random state</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">c = tf.random_uniform([],<span class="number">-10</span>,<span class="number">10</span>,seed=<span class="number">2</span>)</span><br><span class="line">d = tf.random_uniform([],<span class="number">-10</span>,<span class="number">10</span>,seed=<span class="number">2</span>)</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    print(sess.run(c)) <span class="comment">#value: a</span></span><br><span class="line">    print(sess.run(d)) <span class="comment">#same value: a</span></span><br><span class="line">    print(sess.run(c)) <span class="comment">#value: b</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>graphçº§åˆ«<br>æ¯”å¦‚demo1.pyå’Œdemo2.pyä»£ç ç›¸åŒï¼Œè®¾ç½®äº†tf.set_random_seed(seed)çš„è¯æ‰§è¡Œç»“æœæ˜¯ç›¸åŒçš„</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tf.set_random_seed(<span class="number">2</span>)</span><br><span class="line">c = tf.random_uniform([],<span class="number">-10</span>,<span class="number">10</span>)</span><br><span class="line">d = tf.random_uniform([],<span class="number">-10</span>,<span class="number">10</span>)</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    print(sess.run(c)) <span class="comment"># éƒ½æ˜¯a</span></span><br><span class="line">    print(sess.run(d)) <span class="comment"># éƒ½æ˜¯b</span></span><br></pre></td></tr></tbody></table></figure></li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å…³é”®è¯ï¼šmodel base, variable sharing, model sharing&lt;/p&gt;
&lt;h4 id=&quot;word2vec&quot;&gt;&lt;a href=&quot;#word2vec&quot; class=&quot;headerlink&quot; title=&quot;word2vec&quot;&gt;&lt;/a&gt;word2vec&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;æ–‡æœ¬çš„åˆ†å¸ƒå¼è¡¨ç¤ºæ˜¯è®¸å¤šè‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡çš„åŸºç¡€&lt;/li&gt;
&lt;li&gt;word2vecæ˜¯ç”¨æ¥ç”Ÿæˆè¯è¯­åˆ†å¸ƒå¼è¡¨ç¤ºçš„ä¸€ç»„æ¨¡å‹&lt;/li&gt;
&lt;li&gt;ä¸»è¦æœ‰ä¸¤ç§æ¨¡å‹ï¼šskip-gramå’ŒCBOW&lt;/li&gt;
&lt;li&gt;ç®—æ³•è§’åº¦ï¼šCBOWæ¨¡å‹ä»ä¸Šä¸‹æ–‡è¯é¢„æµ‹ç›®æ ‡è¯ï¼Œskip-gramæ¨¡å‹ä»ç›®æ ‡è¯é¢„æµ‹ä¸Šä¸‹æ–‡è¯&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="machine learning" scheme="https://yikayiyo.github.io/tags/machine-learning/"/>
    
      <category term="TensorFlow" scheme="https://yikayiyo.github.io/tags/TensorFlow/"/>
    
  </entry>
  
  <entry>
    <title>linear and logistic regression in TensorFlow</title>
    <link href="https://yikayiyo.github.io/2018/03/29/TensorFlow02/"/>
    <id>https://yikayiyo.github.io/2018/03/29/TensorFlow02/</id>
    <published>2018-03-29T03:37:22.000Z</published>
    <updated>2018-05-31T08:29:00.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Linear-Regression"><a href="#Linear-Regression" class="headerlink" title="Linear Regression"></a>Linear Regression</h3><h4 id="é—®é¢˜å®šä¹‰ï¼š"><a href="#é—®é¢˜å®šä¹‰ï¼š" class="headerlink" title="é—®é¢˜å®šä¹‰ï¼š"></a>é—®é¢˜å®šä¹‰ï¼š</h4><p>è®¾Xä¸ºç”Ÿè‚²ç‡ï¼ŒYä¸ºé¢„æœŸå¯¿å‘½ï¼Œèƒ½å¦æ‰¾åˆ°ä¸€ä¸ªçº¿æ€§å‡½æ•°fä½¿å¾—Y = f(X)ï¼Ÿ</p><img src="/2018/03/29/TensorFlow02/f1.png" class=""><a id="more"></a><p>æ•°æ®é›†æè¿°ï¼š</p><p>åç§°: Birth rate - life expectancy in 2010<br>X = ç”Ÿè‚²ç‡. Type: float.<br>Y = é¢„æœŸå¯¿å‘½. Type: foat.<br>æ•°æ®é‡: 190<br>æ•°æ®å½¢å¼: (X,Y)</p><h4 id="æ–¹æ³•1ï¼š"><a href="#æ–¹æ³•1ï¼š" class="headerlink" title="æ–¹æ³•1ï¼š"></a>æ–¹æ³•1ï¼š</h4><p><strong>å‡è®¾</strong>Xå’ŒYä¹‹é—´çš„å…³ç³»æ˜¯çº¿æ€§çš„ï¼Œè¿™æ„å‘³ç€æœ‰wå’Œbï¼Œæ»¡è¶³ï¼šY_pred = wX + b.<br>æœ¬ä¾‹ä¸­wï¼Œbéƒ½æ˜¯scalarï¼Œ</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">w = tf.get_variable(<span class="string">'weights'</span>,initializer=tf.constant(<span class="number">0.0</span>))</span><br><span class="line">b = tf.get_variable(<span class="string">'bias'</span>,initializer=tf.constant(<span class="number">0.0</span>))</span><br></pre></td></tr></tbody></table></figure><p>æŸå¤±å‡½æ•°ä½¿ç”¨å‡æ–¹è¯¯å·®</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Y_pred = w*X+b</span><br><span class="line">loss = tf.square(Y-Y_pred,name=<span class="string">'loss'</span>)</span><br></pre></td></tr></tbody></table></figure><p>å®Œæ•´ä»£ç ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> utils</span><br><span class="line"></span><br><span class="line">DATA_FILE = <span class="string">"data/birth_life_2010.txt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 1: åŠ è½½æ•°æ®ï¼Œå½¢å¼ä¸ºï¼ˆ190ï¼Œ2ï¼‰çš„numpyæ•°ç»„ï¼Œæ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªç‚¹</span></span><br><span class="line">data, n_samples = utils.read_birth_life_data(DATA_FILE)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 2: åˆ›å»ºplaceholders</span></span><br><span class="line">X = tf.placeholder(tf.float32, name=<span class="string">'X'</span>)</span><br><span class="line">Y = tf.placeholder(tf.float32, name=<span class="string">'Y'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 3: åˆ›å»ºå˜é‡ï¼Œåˆå§‹åŒ–ä¸º0</span></span><br><span class="line">w = tf.get_variable(<span class="string">'weights'</span>, initializer=tf.constant(<span class="number">0.0</span>))</span><br><span class="line">b = tf.get_variable(<span class="string">'bias'</span>, initializer=tf.constant(<span class="number">0.0</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 4: æ¨¡å‹</span></span><br><span class="line">Y_predicted = w * X + b </span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 5: æŸå¤±å‡½æ•°</span></span><br><span class="line">loss = tf.square(Y - Y_predicted, name=<span class="string">'loss'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 6: GDæœ€å°åŒ–loss</span></span><br><span class="line">optimizer = tf.train.GradientDescentOptimizer(learning_rate=<span class="number">0.001</span>).minimize(loss)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line"><span class="comment"># Step 7: å˜é‡åˆå§‹åŒ–</span></span><br><span class="line">sess.run(tf.global_variables_initializer()) </span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 8: è®­ç»ƒ100å›</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100</span>): <span class="comment"># run 100 epochs</span></span><br><span class="line"><span class="comment"># æ¯æ¬¡ä¼ å…¥ä¸€ä¸ªæ•°æ®ç‚¹ï¼Œäº‹å®ä¸Šï¼Œä½¿ç”¨batches of dataæ›´å¥½ä¸€ç‚¹ã€‚</span></span><br><span class="line">        <span class="keyword">for</span> x, y <span class="keyword">in</span> data:</span><br><span class="line"><span class="comment"># Session runs train_op to minimize loss</span></span><br><span class="line">sess.run(optimizer, feed_dict={X: x, Y:y}) </span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 9: output the values of w and b</span></span><br><span class="line">w_out, b_out = sess.run([w, b])</span><br></pre></td></tr></tbody></table></figure><p>ç»“è®ºï¼š<br>ç»è¿‡100æ¬¡è®­ç»ƒåï¼Œå¹³å‡æŸå¤±ä¸º30.04ï¼Œw = -6.07ï¼Œb = 84.93ã€‚<br>è¿™è¯å®äº†æˆ‘ä»¬çš„å‡è®¾ï¼Œå³å‡ºç”Ÿç‡ä¸ä¸€ä¸ªå›½å®¶äººå£çš„é¢„æœŸå¯¿å‘½ä¹‹é—´å­˜åœ¨è´Ÿç›¸å…³å…³ç³»ã€‚ ä½†æ˜¯ï¼Œè¿™å¹¶ä¸æ„å‘³ç€å¤šä¸€ä¸ªå­©å­ä¼šå‡å°‘6å¹´çš„å¯¿å‘½ã€‚</p><h4 id="æ–¹æ³•2ï¼š"><a href="#æ–¹æ³•2ï¼š" class="headerlink" title="æ–¹æ³•2ï¼š"></a>æ–¹æ³•2ï¼š</h4><p>å‡è®¾Xå’ŒYæ»¡è¶³ï¼šY_pred = wX^2 + uX + b</p><p>åªéœ€ä¿®æ”¹éƒ¨åˆ†ä»£ç ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Step 3: åˆ›å»ºå˜é‡ï¼Œåˆå§‹åŒ–ä¸º0</span></span><br><span class="line">w = tf.get_variable(<span class="string">'weights_1'</span>, initializer=tf.constant(<span class="number">0.0</span>))</span><br><span class="line">u = tf.get_variable(<span class="string">'weights_2'</span>, initializer=tf.constant(<span class="number">0.0</span>))</span><br><span class="line">b = tf.get_variable(<span class="string">'bias'</span>, initializer=tf.constant(<span class="number">0.0</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 4: æ¨¡å‹</span></span><br><span class="line">Y_predicted = w * X * X + X * u + b</span><br></pre></td></tr></tbody></table></figure><p>ç”±äºå¹³æ–¹æŸå¤±ä¼šç»™ç¦»ç¾¤ç‚¹å¤ªå¤šçš„æƒé‡ï¼Œè¿™é‡ŒæŸå¤±å‡½æ•°è€ƒè™‘ä½¿ç”¨Huber lossï¼š</p><img src="/2018/03/29/TensorFlow02/f2.png" class=""><p>tensorflowæä¾›äº†ä¸€äº›æ§åˆ¶æµæ“ä½œï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…·ä½“å®ç°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">huber_loss</span><span class="params">(labels, predictions, delta=<span class="number">14.0</span>)</span>:</span></span><br><span class="line">    residual = tf.abs(labels - predictions)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">()</span>:</span> <span class="keyword">return</span> <span class="number">0.5</span> * tf.square(residual)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">()</span>:</span> <span class="keyword">return</span> delta * residual - <span class="number">0.5</span> * tf.square(delta)</span><br><span class="line">    <span class="keyword">return</span> tf.cond(residual &lt; delta, f1, f2)</span><br></pre></td></tr></tbody></table></figure><p>æœ€åç»“æœä¸ºï¼š<strong>w: -5.883589, b: 85.124306.</strong></p><h4 id="which-one-is-betterï¼Ÿ"><a href="#which-one-is-betterï¼Ÿ" class="headerlink" title="which one is betterï¼Ÿ"></a>which one is betterï¼Ÿ</h4><p>we do need test data setï¼ï¼ï¼</p><h3 id="tf-data"><a href="#tf-data" class="headerlink" title="tf.data"></a>tf.data</h3><p>ä½¿ç”¨placeholderå’Œfeed_dictsçš„å¥½å¤„æ˜¯å°†æ•°æ®å¤„ç†ä¸TensorFlowåˆ†ç¦»ï¼Œä½¿ç”¨pythonå°±å¯ä»¥è½»æ¾åœ°shuffle, batch, generate arbitrary data. ä¸å¥½çš„åœ°æ–¹æ˜¯ï¼Œæ•°æ®å¤„ç†çš„çº¿ç¨‹å¾ˆæœ‰å¯èƒ½æ˜¯ç“¶é¢ˆï¼Œä½¿æ•´ä¸ªç¨‹åºslow downã€‚</p><p>ä½¿ç”¨é˜Ÿåˆ—ä¹Ÿæ˜¯TFä¸­å¤„ç†æ•°æ®çš„ä¸€ä¸ªé€‰é¡¹ï¼Œé˜Ÿåˆ—å…è®¸pipeliningã€threadingæ“ä½œï¼Œå‡å°‘äº†æ•°æ®åŠ è½½åˆ°placeholdersçš„æ—¶é—´ï¼Œä½†æ˜¯éš¾ä»¥ä½¿ç”¨ä¸”å®¹æ˜“å´©æºƒã€‚</p><p>tf.dataæ¯”placeholderæ›´å¿«ï¼Œæ¯”é˜Ÿåˆ—æ›´å®¹æ˜“ä½¿ç”¨ï¼Œè€Œä¸”ä¸ä¼šcrashã€‚</p><p>æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªtf.data.Datasetå¯¹è±¡ä¸­ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªnon-TensorFLowå¯¹è±¡ï¼ˆnumpy arrayï¼‰</p><h4 id="tf-dataåŸºæ“ï¼š"><a href="#tf-dataåŸºæ“ï¼š" class="headerlink" title="tf.dataåŸºæ“ï¼š"></a>tf.dataåŸºæ“ï¼š</h4><ol><li><p>åˆ›å»ºDataSet</p><ol><li><p>ä»tensoråˆ›å»º</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># features,labelséƒ½æ˜¯tensorsï¼Œä¹Ÿå¯ä»¥æ˜¯numpy arrays</span></span><br><span class="line">tf.data.DataSet.from_tensor_slice((features,labels))</span><br></pre></td></tr></tbody></table></figure></li><li><p>ä»fileåˆ›å»º</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–‡ä»¶æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªæ•°æ®ï¼Œä¾‹å¦‚csvæ–‡ä»¶</span></span><br><span class="line">tf.data.TextLineDataset(filenames)</span><br><span class="line"><span class="comment"># æ¯ä¸€ä¸ªæ–‡ä»¶é•¿åº¦éƒ½å›ºå®šï¼Œæ¯”å¦‚éƒ½æ˜¯28*28çš„å›¾ç‰‡</span></span><br><span class="line">tf.data.FixedLengthRecordDataset([file1,file2,file3,file4,...])</span><br><span class="line"><span class="comment"># tfrecordæ ¼å¼ï¼Œï¼ˆè¿˜æ²¡ç”¨è¿‡</span></span><br><span class="line">tf.data.TFRecordDataset(filenames)</span><br></pre></td></tr></tbody></table></figure></li></ol></li><li><p>åˆ›å»ºIterator</p><p>å–datasetä¸­çš„æ•°æ®éœ€è¦ç”¨åˆ°è¿­ä»£å™¨</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åªèƒ½éå†ä¸€é</span></span><br><span class="line">iterator = dataset.make_one_shot_iterator()</span><br><span class="line"><span class="comment"># å¤šæ¬¡åˆå§‹åŒ–ï¼Œå¤šæ¬¡éå†</span></span><br><span class="line">iterator = dataset.make_initializable_iterator()</span><br><span class="line"><span class="comment"># è¿”å›ä¸€ä¸ªæˆ–è€…ä¸€ç»„æ ·æœ¬</span></span><br><span class="line">iterator.get_next()</span><br></pre></td></tr></tbody></table></figure></li><li><p>è®­ç»ƒ</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">iterator = dataset.make_initializable_iterator()</span><br><span class="line">...</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100</span>): </span><br><span class="line">        <span class="comment"># æ¯ä¸€ä¸ªepochéƒ½è¦åˆå§‹åŒ–iterator</span></span><br><span class="line">        sess.run(iterator.initializer) </span><br><span class="line">        total_loss = <span class="number">0</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">                sess.run([optimizer]) </span><br><span class="line">        <span class="keyword">except</span> tf.errors.OutOfRangeError:</span><br><span class="line">            <span class="keyword">pass</span></span><br></pre></td></tr></tbody></table></figure></li></ol><h4 id="å…¶å®ƒæ“ä½œ"><a href="#å…¶å®ƒæ“ä½œ" class="headerlink" title="å…¶å®ƒæ“ä½œ"></a>å…¶å®ƒæ“ä½œ</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç®€å•çš„å‘½ä»¤æ“ä½œdataset</span></span><br><span class="line">dataset = dataset.shuffle(<span class="number">1000</span>)</span><br><span class="line">dataset = dataset.repeat(<span class="number">100</span>)</span><br><span class="line">dataset = dataset.batch(<span class="number">128</span>)</span><br><span class="line">dataset = dataset.map(<span class="keyword">lambda</span> x: tf.one_hot(x, <span class="number">10</span>)) </span><br><span class="line"><span class="comment"># convert each element of dataset to one_hot vector</span></span><br></pre></td></tr></tbody></table></figure><h3 id="Logistic-Regression-with-MINIST"><a href="#Logistic-Regression-with-MINIST" class="headerlink" title="Logistic Regression with MINIST"></a>Logistic Regression with MINIST</h3><h4 id="ä¸€ä¸ªé—®é¢˜ï¼š"><a href="#ä¸€ä¸ªé—®é¢˜ï¼š" class="headerlink" title="ä¸€ä¸ªé—®é¢˜ï¼š"></a>ä¸€ä¸ªé—®é¢˜ï¼š</h4><p>è¿™ä¸ªå®éªŒæœ‰å¤šä¸ªæ•°æ®é›†ï¼Œè®­ç»ƒé›†ã€éªŒè¯é›†å’Œæµ‹è¯•é›†ï¼Œå¦‚æœæ¯ä¸ªæ•°æ®é›†éƒ½æœ‰å„è‡ªçš„iteratorï¼Œé‚£æˆ‘ä»¬å°±å¾—ä¸ºæ¯ä¸€ä¸ªiteratoråˆ›å»ºä¸€ä¸ªgraphã€‚</p><p> ä¸ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªè¿­ä»£å™¨ï¼Œç”¨ä¸åŒçš„æ•°æ®åˆå§‹åŒ–å®ƒ</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">iterator = tf.data.Iterator.from_structure(train_data.output_types,</span><br><span class="line">                                           train_data.output_shapes)</span><br><span class="line"><span class="comment"># æ¯ä¸€ä¸ªepochçš„è®­ç»ƒå‰ï¼Œéƒ½è¦sess.run(train_init)</span></span><br><span class="line">train_init = iterator.make_initializer(train_data)</span><br><span class="line">test_init = iterator.make_initializer(test_data)</span><br></pre></td></tr></tbody></table></figure><p><a href="https://github.com/yikayiyo/stanford-tensorflow-tutorials/blob/master/examples/03_logreg.py" target="_blank" rel="noopener">å®Œæ•´ä»£ç </a>, tensorboardå›¾ç¤ºå¦‚ä¸‹ï¼š</p><img src="/2018/03/29/TensorFlow02/f3.png" class=""><p>ä¸‹ä¸€æ­¥ï¼Œå°è¯•å°†è¿™ä¸ªgraphæ”¹é€ å¾—æœ‰æ¡ç†ä¸€äº›ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Linear-Regression&quot;&gt;&lt;a href=&quot;#Linear-Regression&quot; class=&quot;headerlink&quot; title=&quot;Linear Regression&quot;&gt;&lt;/a&gt;Linear Regression&lt;/h3&gt;&lt;h4 id=&quot;é—®é¢˜å®šä¹‰ï¼š&quot;&gt;&lt;a href=&quot;#é—®é¢˜å®šä¹‰ï¼š&quot; class=&quot;headerlink&quot; title=&quot;é—®é¢˜å®šä¹‰ï¼š&quot;&gt;&lt;/a&gt;é—®é¢˜å®šä¹‰ï¼š&lt;/h4&gt;&lt;p&gt;è®¾Xä¸ºç”Ÿè‚²ç‡ï¼ŒYä¸ºé¢„æœŸå¯¿å‘½ï¼Œèƒ½å¦æ‰¾åˆ°ä¸€ä¸ªçº¿æ€§å‡½æ•°fä½¿å¾—Y = f(X)ï¼Ÿ&lt;/p&gt;
&lt;img src=&quot;/2018/03/29/TensorFlow02/f1.png&quot; class=&quot;&quot;&gt;
    
    </summary>
    
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="machine learning" scheme="https://yikayiyo.github.io/tags/machine-learning/"/>
    
      <category term="TensorFlow" scheme="https://yikayiyo.github.io/tags/TensorFlow/"/>
    
  </entry>
  
  <entry>
    <title>TensorFlow Ops</title>
    <link href="https://yikayiyo.github.io/2018/03/28/TensorFlow01/"/>
    <id>https://yikayiyo.github.io/2018/03/28/TensorFlow01/</id>
    <published>2018-03-28T01:37:22.000Z</published>
    <updated>2018-05-29T15:46:44.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="ä¸€èˆ¬æµç¨‹ï¼š"><a href="#ä¸€èˆ¬æµç¨‹ï¼š" class="headerlink" title="ä¸€èˆ¬æµç¨‹ï¼š"></a>ä¸€èˆ¬æµç¨‹ï¼š</h4><h4 id="TFboyåŸºæ“ï¼š"><a href="#TFboyåŸºæ“ï¼š" class="headerlink" title="TFboyåŸºæ“ï¼š"></a>TFboyåŸºæ“ï¼š</h4><ul><li>å®šä¹‰å›¾<a id="more"></a></li><li>åˆ›å»ºwriterï¼Œä¸¤ç§æ–¹å¼<ul><li>tf.get_default_graph()</li><li>sess.graph</li></ul></li><li>åˆ›å»ºsessionæ‰§è¡Œå›¾</li><li>å…³é—­writer</li><li>TensorBoardå¯è§†åŒ–</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line">a = tf.constant(<span class="number">2</span>, name=<span class="string">'a'</span>)</span><br><span class="line">b = tf.constant(<span class="number">3</span>, name=<span class="string">'b'</span>)</span><br><span class="line">x = tf.add(a, b, name=<span class="string">'add'</span>)</span><br><span class="line"><span class="comment"># ç¬¬ä¸€ç§</span></span><br><span class="line">writer = tf.summary.FileWriter(<span class="string">'./graphs/low'</span>, tf.get_default_graph()) </span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    <span class="comment"># ç¬¬äºŒç§</span></span><br><span class="line">    <span class="comment"># writer = tf.summary.FileWriter('./graphs', sess.graph) </span></span><br><span class="line">    print(sess.run(x))</span><br><span class="line">writer.close() <span class="comment"># close the writer when youâ€™re done using it</span></span><br></pre></td></tr></tbody></table></figure><p>writerä¼šå°†å›¾ï¼ˆåŒ…å«çš„å„ç§opsï¼‰ä»¥æ—¥å¿—æ–‡ä»¶çš„å½¢å¼å†™å…¥æŒ‡å®šç›®å½•ï¼Œtensorboardå¯ä»¥å°†è¿™äº›æ–‡ä»¶å¯è§†åŒ–å‡ºæ¥</p><p>ä¸Šé¢çš„ç¨‹åºæ¯è·‘ä¸€æ¬¡å°±ä¼šäº§ç”Ÿä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œä¸ç”¨çš„æ—¥å¿—åŠæ—¶åˆ é™¤</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> tensorboard --logdir=<span class="string">'./graphs/low'</span> --port=6006</span></span><br><span class="line"><span class="meta">#</span><span class="bash">æ³¨æ„è·¯å¾„ä¸è¦æé”™</span></span><br></pre></td></tr></tbody></table></figure><img src="/2018/03/28/TensorFlow01/ex1.png" class=""><h4 id="æ²¡è®°ä½çš„"><a href="#æ²¡è®°ä½çš„" class="headerlink" title="æ²¡è®°ä½çš„"></a>æ²¡è®°ä½çš„</h4><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tf.fill([2,3],8) ===&gt; [[8,8,8],[8,8,8]]</span><br><span class="line">tf.lin_space(10.0,13.0,4,name=None) ===&gt;[10.0 11.0 12.0 13.0]</span><br><span class="line"><span class="comment">#å„ç§åˆ†å¸ƒ</span></span><br><span class="line">tf.random_normal</span><br><span class="line">...</span><br><span class="line"><span class="comment">#add multiple tensors</span></span><br><span class="line">tf.add_n([a,b,b]) ====&gt; a+b+b</span><br></pre></td></tr></tbody></table></figure><h4 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h4><h5 id="å˜é‡å®šä¹‰"><a href="#å˜é‡å®šä¹‰" class="headerlink" title="å˜é‡å®šä¹‰"></a>å˜é‡å®šä¹‰</h5><p>è®­ç»ƒä¸­éœ€è¦æ›´æ–°çš„å‚æ•°å®šä¹‰ä¸ºå˜é‡</p><p>å¸¸é‡å­˜å‚¨åœ¨å›¾ä¸­ï¼Œå˜é‡åˆ™å¯èƒ½åœ¨parameter serverä¸Š</p><p>å¸¸é‡å äº†å¾ˆå¤šå­˜å‚¨æ—¶ï¼ŒåŠ è½½å›¾ä¼šå¾ˆæ…¢</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># old way</span></span><br><span class="line">tf.Variable(&lt;initial-value&gt;,name=&lt;optional-name&gt;)</span><br><span class="line"><span class="comment"># now</span></span><br><span class="line">tf.get_variable(...)</span><br><span class="line"><span class="comment"># å½“initializeræ—¶tf.constantæ—¶ï¼Œä¸éœ€è¦å‚æ•°shape</span></span><br><span class="line">s = tf.get_variable(<span class="string">"scalar"</span>, initializer=tf.constant(<span class="number">2</span>)) </span><br><span class="line">m = tf.get_variable(<span class="string">"matrix"</span>, initializer=tf.constant([[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>]]))</span><br><span class="line">W = tf.get_variable(<span class="string">"big_matrix"</span>, shape=(<span class="number">784</span>, <span class="number">10</span>), initializer=tf.zeros_initializer())</span><br></pre></td></tr></tbody></table></figure><h5 id="å˜é‡åˆå§‹åŒ–"><a href="#å˜é‡åˆå§‹åŒ–" class="headerlink" title="å˜é‡åˆå§‹åŒ–"></a>å˜é‡åˆå§‹åŒ–</h5><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸€æ¬¡æ€§åˆå§‹åŒ–æ‰€æœ‰å˜é‡</span></span><br><span class="line">sess.run(tf.global_variables_initializer())</span><br><span class="line"><span class="comment">#åˆå§‹åŒ–éƒ¨åˆ†å˜é‡</span></span><br><span class="line">sess.run(tf.variables_initializer([a, b]))</span><br><span class="line"><span class="comment">#å•ç‹¬åˆå§‹åŒ–</span></span><br><span class="line">sess.run(W.initializer)</span><br><span class="line"><span class="comment">#ä»æ–‡ä»¶åŠ è½½</span></span><br><span class="line">Todo...</span><br></pre></td></tr></tbody></table></figure><h5 id="å˜é‡çš„å€¼"><a href="#å˜é‡çš„å€¼" class="headerlink" title="å˜é‡çš„å€¼"></a>å˜é‡çš„å€¼</h5><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸¤ç§æ–¹å¼</span></span><br><span class="line">print(sess.run(W))</span><br><span class="line">print(W.eval())</span><br></pre></td></tr></tbody></table></figure><h5 id="å˜é‡èµ‹å€¼"><a href="#å˜é‡èµ‹å€¼" class="headerlink" title="å˜é‡èµ‹å€¼"></a>å˜é‡èµ‹å€¼</h5><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># èµ‹å€¼ä¼šå®Œæˆåˆå§‹åŒ–çš„å·¥ä½œ</span></span><br><span class="line">W.assign(<span class="number">100</span>)</span><br><span class="line"><span class="comment"># è‡ªå¢è‡ªå‡ä¸ä¼šåˆå§‹åŒ–å˜é‡</span></span><br><span class="line">W.assign_add(<span class="number">10</span>)</span><br><span class="line">W.assing_sub(<span class="number">2</span>)</span><br><span class="line"><span class="comment"># å˜é‡ä¾èµ–,ä½¿ç”¨initialized_value()ä¿è¯ç”¨Wçš„å€¼æ¥åˆå§‹åŒ–V</span></span><br><span class="line">V = tf.Variable(W.initialized_value()*<span class="number">2</span>)</span><br></pre></td></tr></tbody></table></figure><h4 id="æ§åˆ¶ä¾èµ–"><a href="#æ§åˆ¶ä¾èµ–" class="headerlink" title="æ§åˆ¶ä¾èµ–"></a>æ§åˆ¶ä¾èµ–</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># g has 5 ops: a,b,c,d,e</span></span><br><span class="line"><span class="comment"># è¿˜æ²¡ç”¨åˆ°è¿‡</span></span><br><span class="line"><span class="keyword">with</span> g.control_dependencies([a,b,c]):</span><br><span class="line">    <span class="comment"># d,e only run after a,b,c have executed</span></span><br><span class="line">    d = ...</span><br><span class="line">    e = ...</span><br></pre></td></tr></tbody></table></figure><h4 id="æ•°æ®å¯¼å…¥"><a href="#æ•°æ®å¯¼å…¥" class="headerlink" title="æ•°æ®å¯¼å…¥"></a>æ•°æ®å¯¼å…¥</h4><ol><li><p>old wayï¼šplaceholders and feed_dict</p><p>ä¾‹å¦‚ï¼Œå¯¹äºf(x,y) = 2x + yï¼Œx y å°±æ˜¯çœŸå®å€¼çš„å ä½ç¬¦</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#shape=None æ„å‘³ç€æ¥æ”¶ä»»æ„shapeçš„å¼ é‡</span></span><br><span class="line">tf.placeholder(dtype,shape=<span class="literal">None</span>,name=<span class="literal">None</span>)</span><br><span class="line"><span class="comment">#any tensors that are feedable can be fed</span></span><br><span class="line">tf.Graph.is_feedable(tensor)</span><br><span class="line"><span class="comment">#feed_dictå¯ä»¥ç”¨æ¥æµ‹è¯•æ¨¡å‹ï¼Œ</span></span><br><span class="line"><span class="comment">#ç›´æ¥ä¼ å…¥æŸäº›å€¼å…å»äº†å¤§é‡çš„è®¡ç®—</span></span><br><span class="line">a = tf.add(<span class="number">2</span>, <span class="number">5</span>)</span><br><span class="line">b = tf.multiply(a, <span class="number">3</span>)</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    print(sess.run(b))                                 <span class="comment"># &gt;&gt; 21</span></span><br><span class="line">    <span class="comment"># compute the value of b given the value of a is 15</span></span><br><span class="line">    print(sess.run(b, feed_dict={a: <span class="number">15</span>}))              <span class="comment"># &gt;&gt; 45</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>new way: tf.data</p><p>[ ] todoâ€¦</p></li></ol><h4 id="lazy-loading"><a href="#lazy-loading" class="headerlink" title="lazy loading"></a>lazy loading</h4><p>éœ€è¦è®¡ç®—opçš„æ—¶å€™æ‰åˆ›å»º</p><p>å› ä¸ºè®­ç»ƒç»å¤§æ•°æƒ…å†µéƒ½è¦è®¡ç®—å¤šæ¬¡ï¼Œæ‰€ä»¥lazy loadingä¼šäº§ç”Ÿå¤§é‡çš„å†—ä½™èŠ‚ç‚¹</p><p>è§£å†³åŠæ³•ï¼š</p><ol><li>å°½å¯èƒ½çš„å°†opsçš„å®šä¹‰å’Œè®¡ç®—åˆ†å¼€ï¼ˆä¸è¦åœ¨è®¡ç®—çš„æ—¶å€™åˆ›å»ºop</li><li>å½“ä½ å°†ç›¸å…³opsç»„åˆåœ¨ä¸€èµ·ï¼ˆæ¯”å¦‚ï¼Œ1ä¸­çš„æ­¥éª¤åœ¨ä¸€ä¸ªç±»é‡Œé¢ï¼‰å¯ä»¥ä½¿ç”¨pythonçš„@propertyæœºåˆ¶ç¡®ä¿æŸäº›åŠŸèƒ½åªæ‰§è¡Œä¸€æ¬¡ï¼ˆ!!!æœ‰å¾…ç ”ç©¶ï¼‰</li></ol><p>ç›¸å…³åšå®¢<a href="http://danijar.com/structuring-your-tensorflow-models/" target="_blank" rel="noopener">http://danijar.com/structuring-your-tensorflow-models/</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;ä¸€èˆ¬æµç¨‹ï¼š&quot;&gt;&lt;a href=&quot;#ä¸€èˆ¬æµç¨‹ï¼š&quot; class=&quot;headerlink&quot; title=&quot;ä¸€èˆ¬æµç¨‹ï¼š&quot;&gt;&lt;/a&gt;ä¸€èˆ¬æµç¨‹ï¼š&lt;/h4&gt;&lt;h4 id=&quot;TFboyåŸºæ“ï¼š&quot;&gt;&lt;a href=&quot;#TFboyåŸºæ“ï¼š&quot; class=&quot;headerlink&quot; title=&quot;TFboyåŸºæ“ï¼š&quot;&gt;&lt;/a&gt;TFboyåŸºæ“ï¼š&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;å®šä¹‰å›¾&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="machine learning" scheme="https://yikayiyo.github.io/tags/machine-learning/"/>
    
      <category term="TensorFlow" scheme="https://yikayiyo.github.io/tags/TensorFlow/"/>
    
  </entry>
  
  <entry>
    <title>sparql ç¬”è®°</title>
    <link href="https://yikayiyo.github.io/2018/03/26/sparql/"/>
    <id>https://yikayiyo.github.io/2018/03/26/sparql/</id>
    <published>2018-03-26T10:53:29.000Z</published>
    <updated>2018-05-29T01:00:14.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Jumping-Right-In"><a href="#Jumping-Right-In" class="headerlink" title="Jumping Right In"></a>Jumping Right In</h3><ul><li>FROMæŒ‡å®šçš„æ•°æ®é›†ä¼šè¢«è°ƒç”¨SPARQLå¤„ç†å™¨æ—¶æŒ‡å®šçš„æ•°æ®é›†è¦†ç›–ï¼ˆå¦‚æœéƒ½æŒ‡å®šäº†</li><li>RDFä¸æ˜¯æ•°æ®æ ¼å¼ï¼Œè€Œæ˜¯æ•°æ®æ¨¡å‹ï¼Œå®ƒå¯ä»¥é€‰æ‹©å­˜å‚¨æ•°æ®æ–‡ä»¶çš„è¯­æ³•</li><li>å¦‚æœæˆ‘ä»¬å°†æ•°æ®ä¸å…¶å®ƒæ•°æ®ç»“åˆèµ·æ¥ï¼Œé‚£ä¹ˆRDFä¸‰å…ƒç»„çš„ä¸»è¯­å’Œè°“è¯­éƒ½å¿…é¡»å±äºç‰¹å®šçš„åç§°ç©ºé—´ï¼Œä»¥é˜²æ­¢ç±»ä¼¼åç§°ä¹‹é—´çš„æ··æ·†ï¼Œäºæ˜¯æˆ‘ä»¬ä½¿ç”¨URIæ¥è¡¨ç¤ºå®ƒä»¬</li><li>å½“ä½¿ç”¨å®Œæ•´çš„URIæ—¶ï¼Œå°†å…¶æ”¾åœ¨å°–æ‹¬å·ä¸­ä»¥å‘å¤„ç†å™¨æ˜¾ç¤ºå®ƒæ˜¯ä¸€ä¸ªURI</li><li>åœ¨semantic webå¼€å‘ä¸­ï¼Œè¯æ±‡è¡¨æ˜¯ä¸€ç»„ä½¿ç”¨æ ‡å‡†æ ¼å¼å­˜å‚¨çš„æœ¯è¯­ï¼Œä¾›äººä»¬é‡å¤ä½¿ç”¨</li><li>å‘ç°ä¸åŒæ¥æºä¸‰å…ƒç»„ä¹‹é—´è”ç³»çš„èƒ½åŠ›æ˜¯SPARQLçš„æœ€ä½³ç‰¹æ€§ä¹‹ä¸€</li><li>çº¦å®šï¼šä¸»è°“å®¾åˆ†åˆ«ç”¨?s,?p,?oè¡¨ç¤º</li><li>åªæœ‰æ»¡è¶³å›¾æ¨¡å¼ä¸­æ‰€æœ‰ä¸‰å…ƒç»„çš„æ•°æ®æ‰ä¼šè¢«è¿”å›<a id="more"></a></li></ul><h3 id="The-Semantic-Web-RDF-and-Linked-Data-and-SPARQL"><a href="#The-Semantic-Web-RDF-and-Linked-Data-and-SPARQL" class="headerlink" title="The Semantic Web,RDF,and Linked Data(and SPARQL)"></a>The Semantic Web,RDF,and Linked Data(and SPARQL)</h3><ul><li>the semantic web isnâ€™t about the query language or about the modelâ€”itâ€™s about the data</li><li>RDFä¸­åŸºæœ¬çš„ä¿¡æ¯å•å…ƒæ˜¯ä¸‰å…ƒç»„</li><li>å°†RDFä½œä¸ºä¸€ä¸²å­—èŠ‚ä¿å­˜åœ¨ç£ç›˜ä¸Šçš„æŠ€æœ¯æœ¯è¯­æ˜¯åºåˆ—åŒ–</li><li>RDFS gives people a way to describe vocabularies. It is itself a vocabulary with a schema whose triples declare facts.</li><li>Linked Dataï¼š<ul><li>Use URIs as names for things.</li><li>Use HTTP URIs so that people can look up those names.</li><li>When someone looks up a URI, provide useful information, using the standards (RDF*, SPARQL).</li><li>Include links to other URIs so that they can discover more things.</li></ul></li></ul><h3 id="SPARQL-Queries"><a href="#SPARQL-Queries" class="headerlink" title="SPARQL Queries"></a>SPARQL Queries</h3><p>ä»‹ç»SPARQLæŸ¥è¯¢è¯­è¨€æ›´å¤šæ›´æœ‰ç”¨çš„ç‰¹å¾</p><h4 id="More-Readable-Query-Results"><a href="#More-Readable-Query-Results" class="headerlink" title="More Readable Query Results"></a>More Readable Query Results</h4><ul><li><strong>åˆ†å·</strong>è¡¨ç¤ºæ¥ä¸‹æ¥çš„è°“è¯­-å®¾è¯­å¯¹ä¸ä¹‹å‰çš„å…±æœ‰ä¸€ä¸ªä¸»è¯­  <figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ?<span class="keyword">first</span> ?<span class="keyword">last</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">  ?person ab:firstName ?<span class="keyword">first</span>;</span><br><span class="line">          ab:lastName  ?last.</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li>ä½¿ç”¨é‚£äº›å¯è¯»æ€§å¼ºçš„å±æ€§ï¼Œæ¯”å¦‚æ ‡ç­¾ã€æè¿°ç­‰ç­‰ï¼ˆå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯URI</li><li><strong>rdfs:label</strong> æ˜¯ç¬¬ä¸€ä¸ªåº”è¯¥æ³¨æ„çš„å±æ€§ï¼Œåˆ«çš„ï¼Œ<strong>rdfs:comment</strong>,<strong>skos:prefLabel</strong>ï¼ˆé¦–é€‰æ ‡ç­¾ï¼‰,<strong>skos:altLabel</strong>ï¼ˆå¤‡é€‰æ ‡ç­¾ï¼‰</li><li>ç»™å®šçš„èµ„æºå¹¶ä¸æ€»å¿…é¡»æ˜¯ä¸»è¯­ã€è°“è¯­æˆ–è€…å®¾è¯­ï¼Œåœ¨ä¸åŒçš„ä¸‰å…ƒç»„ä¸­å®ƒå¯ä»¥æ˜¯ä¸åŒçš„ï¼ˆå¤šä¸ªï¼‰è§’è‰²</li></ul><h4 id="Data-That-Might-Not-Be-There"><a href="#Data-That-Might-Not-Be-There" class="headerlink" title="Data That Might Not Be There"></a>Data That Might Not Be There</h4><ul><li>å°†triple patternæ”¾å…¥åˆ°OPTIONAL graph patternsä¸­ï¼Œè¡¨ç¤ºâ€œå¦‚æœæœ‰çš„è¯ï¼Œæ£€ç´¢è¯¥å€¼â€</li><li>OPTIONAL{t1.t2.t3}åŒ…å«ä¸‰ä¸ªä¸‰å…ƒç»„ï¼Œè¿™äº›ä¸‰å…ƒç»„éœ€è¦åŒæ—¶æ»¡è¶³</li><li>OPTIONAL{t1} OPTIONAL{t2} OPTIONAL{t3}åˆ™æ˜¯ä¸‰ä¸ªç‹¬ç«‹çš„æ¡ä»¶</li><li>OPTIONAL graph patternsçš„é¡ºåºå¾ˆé‡è¦  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¼˜å…ˆä½¿ç”¨nickä½œä¸º?first</span></span><br><span class="line"><span class="keyword">SELECT</span> ?<span class="keyword">first</span> ?<span class="keyword">last</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">    ?s ab:lastName ?last.</span><br><span class="line">    OPTIONAL {?s ab:nick ?<span class="keyword">first</span>}</span><br><span class="line">    OPTIONAL {?s ab:firstName ?<span class="keyword">first</span>}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Finding-Data-That-Doesnâ€™t-Meet-Certain-Conditions"><a href="#Finding-Data-That-Doesnâ€™t-Meet-Certain-Conditions" class="headerlink" title="Finding Data That Doesnâ€™t Meet Certain Conditions"></a>Finding Data That Doesnâ€™t Meet Certain Conditions</h4><ul><li>SPARQL1.0  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ©ç”¨FILTERå’Œboundï¼Œ?væ²¡æœ‰ç»‘å®šå€¼æ—¶è¿”å›trueï¼Œç„¶åè¾“å‡º</span></span><br><span class="line">OPTIONAL {?s ?p ?v}</span><br><span class="line">FILTER(!bound(?v))</span><br></pre></td></tr></tbody></table></figure></li><li>SPARQL1.1  <figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å½“æŒ‡å®šçš„patternä¸å­˜åœ¨æ—¶è¿”å›ture</span></span><br><span class="line">NOT EXISTS {?s ?p ?v}</span><br></pre></td></tr></tbody></table></figure>  <figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¦ä¸€ç§æ–¹å¼ï¼Œå‡å»æ»¡è¶³patternçš„èµ„æºï¼ˆå¤šæ•°æƒ…å†µä¸‹è¡¨ç°ç›¸åŒ</span></span><br><span class="line">MINUS {?s ?p ?v}</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Serching-Futher-In-The-Data"><a href="#Serching-Futher-In-The-Data" class="headerlink" title="Serching Futher In The Data"></a>Serching Futher In The Data</h4><ul><li>RDFä¸‰å…ƒç»„ä¸­çš„å¯¹è±¡å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–è€…URIï¼Œå­—ç¬¦ä¸²å€¼æ›´æ˜“è¯»ï¼Œä½†æ˜¯<strong>URIä½¿å¾—å°†è¯¥æ•°æ®å’Œå…¶å®ƒæ•°æ®é“¾æ¥èµ·æ¥æ›´åŠ å®¹æ˜“</strong></li><li>å¦‚æœä¸€ä¸ªæ•°æ®é›†ä¸­èµ„æºçš„URIå¯ä»¥å’Œå¦ä¸€ä¸ªæ•°æ®é›†ä¸­çš„URIå¯¹åº”èµ·æ¥ï¼Œå“ªæ€•æ•°æ®é›†æ¥è‡ªä¸åŒçš„åœ°æ–¹ï¼Œä¸æ¸…æ¥šç»„ç»‡å½¢å¼ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨SPARQLæŸ¥è¯¢åˆ°æ›´å¤šçš„ä¿¡æ¯</li><li><strong>é€—å·</strong>è¡¨ç¤ºâ€œæ¥ä¸‹æ¥çš„ä¸‰å…ƒç»„ä¸»è¯­è°“è¯­å’Œå‰ä¸€ä¸ªä¸‰å…ƒç»„çš„ç›¸åŒâ€</li><li>åˆ©ç”¨å±æ€§è·¯å¾„ï¼ˆproperty pathsï¼‰ï¼š  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å€ŸåŠ©æ­£åˆ™è¡¨è¾¾å¼çš„ç¬¦å·+ï¼ˆone or moreï¼‰,è¿”å›ç›´æ¥å¼•ç”¨ã€é—´æ¥å¼•ç”¨äº†Açš„è®ºæ–‡</span></span><br><span class="line"><span class="keyword">SELECT</span> ?s </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{?s c:cites+ :paperA.}</span><br><span class="line"><span class="comment"># æŒ‡å®šå¼•ç”¨å±‚æ•°</span></span><br><span class="line"><span class="comment">#{?s c:cites{3} :paperA.}</span></span><br><span class="line"><span class="comment">#ç›¸åŒæ•ˆæœ</span></span><br><span class="line"><span class="comment">#{?s c:cites/c:cites/c:cites :paperA.}</span></span><br><span class="line"><span class="comment">#^è¡¨ç¤ºå–ç›¸å,è¿”å›Aå¼•ç”¨çš„æ–‡ç« </span></span><br><span class="line"><span class="comment">#{?s ^c:cites :paperA.}</span></span><br><span class="line"><span class="comment"># ^ç»“åˆproperty pathçš„ä¾‹å­ï¼šå¼•ç”¨äº†Få¼•ç”¨çš„æ–‡ç« çš„æ–‡ç« </span></span><br><span class="line"><span class="comment">#{</span></span><br><span class="line"><span class="comment">#    ?s c:cites/^c:cites :paperF .</span></span><br><span class="line"><span class="comment">#    FILTER(?s != :paperF)</span></span><br><span class="line"><span class="comment">#}</span></span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Searching-With-Blank-Nodes"><a href="#Searching-With-Blank-Nodes" class="headerlink" title="Searching With Blank Nodes"></a>Searching With Blank Nodes</h4><ul><li>ç©ºç™½èŠ‚ç‚¹çš„ä»»ä½•åç§°éƒ½æ˜¯ä¸´æ—¶çš„ï¼Œé€šå¸¸ä¼šç»™ä¸€ä¸ªå˜é‡å</li><li>è¿‡æ¸¡çš„ä¸œè¥¿ï¼Œç”¨æ¥é“¾æ¥ä¸‰å…ƒç»„</li><li>æœ€ç»ˆçš„selectåˆ—è¡¨ä¸­ä¸€èˆ¬ä¸åŒ…å«ç©ºç™½èŠ‚ç‚¹</li></ul><h4 id="Eliminating-Redundant-Output"><a href="#Eliminating-Redundant-Output" class="headerlink" title="Eliminating Redundant Output"></a>Eliminating Redundant Output</h4><ul><li>DISTINCTå…³é”®å­—</li><li>DISTINCTå…³é”®å­—ä¸ä¼šå¢åŠ æŸ¥è¯¢ç»“æ„çš„å¤æ‚æ€§ï¼ˆå°±æ˜¯åœ¨SELECTå†…å®¹å‰é¢åŠ ä¸ªDISTINCT</li></ul><h4 id="Combining-Different-Search-Conditions"><a href="#Combining-Different-Search-Conditions" class="headerlink" title="Combining Different Search Conditions"></a>Combining Different Search Conditions</h4><ul><li>UNIONå…³é”®å­—ï¼šæŒ‡å®šå¤šä¸ªgraph patternsï¼Œè¿”å›æ»¡è¶³ä»»æ„ä¸€ä¸ªpatternçš„æ•°æ®çš„ç»„åˆ(a combination of all the data that fits any of those patterns) </li><li>æœ‰äº›SPARQLå¤„ç†å™¨åœ¨å…¶è¿”å›ç»“æœä¸­ä½¿ç”¨å£°æ˜çš„å‰ç¼€ï¼Œä½¿å¾—ç»“æœå¯è¯»æ€§æ›´å¼º</li></ul><h4 id="Filtering-Data-Based-On-Conditions"><a href="#Filtering-Data-Based-On-Conditions" class="headerlink" title="Filtering Data Based On Conditions"></a>Filtering Data Based On Conditions</h4><ul><li>FILTER() åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¡¨è¾¾å¼åªè¦è¿”å›çš„æ˜¯å¸ƒå°”å€¼å°±å¯ä»¥ä½œä¸ºå‚æ•°</li><li>RDFè§£æå™¨è¯»å…¥è¾“å…¥æ•°æ®æ—¶ï¼Œå®ƒå°†è¿™äº›å‰ç¼€æ˜ å°„åˆ°é€‚å½“çš„åç§°ç©ºé—´URIsï¼Œç„¶åå°†æ•°æ®äº¤ç»™æŸ¥è¯¢å¤„ç†å™¨</li><li>!isURI(?city): å¦‚æœ?cityä¸æ˜¯ä¸€ä¸ªæ­£å¸¸çš„URIï¼Œè¿”å›true</li><li>INå…³é”®å­—ï¼šæŸ¥è¯¢æŸä¸ªå˜é‡å±äºåˆ—è¡¨çš„ä¸‰å…ƒç»„ï¼ˆå‰é¢åŠ NOTå¯ä»¥è¡¨ç¤ºç›¸åçš„æ„æ€  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ask for data where the ?v is either A or B</span></span><br><span class="line">FILTER(?v IN (A,B))</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Retrieving-A-Specific-Number-Of-Results"><a href="#Retrieving-A-Specific-Number-Of-Results" class="headerlink" title="Retrieving A Specific Number Of Results"></a>Retrieving A Specific Number Of Results</h4><ul><li>LIMITå…³é”®å­—</li><li>æ”¾åœ¨èŠ±æ‹¬å·å¤–é¢</li><li>OFFSETå…³é”®å­—:è·³è¿‡å‡ ä¸ªç»“æœ</li></ul><h4 id="Querying-Named-Graphs"><a href="#Querying-Named-Graphs" class="headerlink" title="Querying Named Graphs"></a>Querying Named Graphs</h4><ul><li>å‘½åå›¾(named graph)ï¼šä¸ºä¸‰å…ƒç»„é›†åˆå‘½åï¼Œæ–¹ä¾¿ç®¡ç†ï¼ˆè¿›è¡Œæ›¿æ¢ä¹‹ç±»çš„æ“ä½œ</li><li>æŸ¥è¯¢çš„æ•°æ®é›†å¯ä»¥åœ¨æŸ¥è¯¢å†…éƒ¨ç”¨FROMæŒ‡å®šï¼Œä¹Ÿå¯ä»¥åœ¨å¤–éƒ¨åœ¨ARQå‘½ä»¤è¡Œä¸­æŒ‡å®šï¼Œåè€…ä¼šè¦†ç›–å‰è€…  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * </span><br><span class="line"><span class="keyword">FROM</span>&lt;xx.ttl&gt;</span><br><span class="line"><span class="keyword">FROM</span>&lt;yy.ttl&gt;</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{...}</span><br></pre></td></tr></tbody></table></figure></li><li>æŒ‡å®šçš„æŸ¥è¯¢æ•°æ®é›†æ„æˆäº†é»˜è®¤å›¾(default graph)ï¼Œå®ƒä¸å±äºä»»ä½•å‘½åå›¾</li><li>FROM NAMED :è¡¨ç¤ºæ•°æ®é›†ä¸ä¼šè¢«åŠ å…¥åˆ°é»˜è®¤å›¾ï¼ŒæŸ¥è¯¢æ—¶éœ€è¦æŒ‡å®šå…¶graph nameï¼ˆARQçš„çº¦å®šæ˜¯å°†URIä½œä¸ºå…¶nameï¼‰ï¼Œç¬¬å…­ç« ä¼šæœ‰SPARQL1.1æ ‡å‡†çš„ç›¸å…³å†…å®¹  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ?lname ?courseName</span><br><span class="line"><span class="keyword">FROM</span> &lt;ex069.ttl&gt;</span><br><span class="line"><span class="keyword">FROM</span> NAMED &lt;ex125.ttl&gt;</span><br><span class="line"><span class="keyword">FROM</span> NAMED &lt;ex122.ttl&gt; <span class="comment"># å³ä½¿è¿™é‡Œå†™äº†ï¼Œå¦‚æœåœ¨æŸ¥è¯¢ä¸­æ²¡æœ‰æŒ‡å®šï¼ˆGRAPH &lt;ex125.ttl&gt;ï¼‰ï¼Œå…¶æ•°æ®ä¸ä¼šè¢«ç”¨æ¥æ£€ç´¢</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">    { ?student ab:lastName ?lname }</span><br><span class="line">    <span class="keyword">UNION</span></span><br><span class="line">    { GRAPH &lt;ex125.ttl&gt; { ?course ab:courseTitle ?courseName } }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li>GRAPHå…³é”®å­—ï¼šæŸ¥è¯¢ä¸­ä½¿ç”¨è¿™ä¸ªå…³é”®å­—è¡¨æ˜å¼•ç”¨ç‰¹å®šå‘½åå›¾ä¸­çš„æ•°æ®</li><li>GRAPHåé¢ä¹Ÿå¯ä»¥è·Ÿå˜é‡ï¼Œè®©SPARQLå¤„ç†å™¨å¯»æ‰¾æ»¡è¶³æŸä¸ªæ¨¡å¼çš„å›¾  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¿™é‡Œåªè®¾ç½®äº†ç‰¹å®šçš„å‘½åå›¾æ¥æŸ¥è¯¢ï¼Œå¦‚æœå­˜åœ¨é»˜è®¤å›¾ï¼Œåˆ™æ²¡æœ‰ä»»ä½•è¿”å›ç»“æœ</span></span><br><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> NAMED &lt;yyy.ttl&gt;</span><br><span class="line"><span class="keyword">FROM</span> NAMED &lt;xxx.ttl&gt;</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{GRAPH ?g(?s ?p ?o)}</span><br></pre></td></tr></tbody></table></figure></li><li>SPARQLå¤„ç†å™¨æœ‰ä¸€äº›é¢„å®šä¹‰çš„å‘½åå›¾ï¼Œå½“ä½ åœ¨GRAPHä¸­æŒ‡å®šæ—¶ä¸éœ€è¦äº‹å…ˆæ ‡è¯†  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ?graph ?email </span><br><span class="line"><span class="keyword">FROM</span> &lt;ex134.ttl&gt; </span><br><span class="line"><span class="keyword">FROM</span> NAMED &lt;ex125.ttl&gt; </span><br><span class="line"><span class="keyword">FROM</span> NAMED &lt;ex122.ttl&gt; </span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">{</span><br><span class="line">    ?graph dc:<span class="built_in">date</span> <span class="string">"2011-09-24"</span> . </span><br><span class="line">    { GRAPH ?graph { ?s ab:email ?email } }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Queries-In-Your-Queries"><a href="#Queries-In-Your-Queries" class="headerlink" title="Queries In Your Queries"></a>Queries In Your Queries</h4><ul><li>å­æŸ¥è¯¢ç‰¹å¾ï¼šå¯ä»¥å°†å¤æ‚çš„æŸ¥è¯¢ç»†åˆ†ï¼Œåˆå¯ä»¥å°†æ¥è‡ªä¸åŒæŸ¥è¯¢çš„ç»“æœåˆå¹¶</li><li>æ¯ä¸ªå­æŸ¥è¯¢å¿…é¡»æ”¾åˆ°è‡ªå·±çš„èŠ±æ‹¬å·ä¸­</li></ul><h4 id="Combining-Values-And-Assigning-Values-To-Variables"><a href="#Combining-Values-And-Assigning-Values-To-Variables" class="headerlink" title="Combining Values And Assigning Values To Variables"></a>Combining Values And Assigning Values To Variables</h4><ul><li><p>sparqlæŸ¥è¯¢å‡ºæ¥çš„å€¼å¯ä»¥ç”¨äºæ•°å­¦è¿ç®—ï¼Œå‡½æ•°è°ƒç”¨</p></li><li><p>BINDå…³é”®å­—</p>  <figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ•°å­¦è¿ç®—çš„ä¾‹å­</span></span><br><span class="line"><span class="comment">#è¿™é‡Œåˆ©ç”¨amountåˆ›å»ºäº†å˜é‡tipå’Œtotal</span></span><br><span class="line"><span class="keyword">SELECT</span> ?description </span><br><span class="line">?amount </span><br><span class="line">((?amount * <span class="number">.2</span>) <span class="keyword">AS</span> ?tip) </span><br><span class="line">((?amount + ?tip) <span class="keyword">AS</span> ?total)</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">    ?meal e:description ?description ;</span><br><span class="line">          e:amount ?amount .</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>  <figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å‡½æ•°è°ƒç”¨çš„ä¾‹å­</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">(<span class="keyword">UCASE</span>(<span class="keyword">SUBSTR</span>(?description,<span class="number">1</span>,<span class="number">3</span>))<span class="keyword">as</span> ?mealCode) </span><br><span class="line">?amount </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">    ?meal e:description ?description ;</span><br><span class="line">          e:amount ?amount .</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>  <figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ”¹è¿›,expression calculation moved to a subquery,åˆ©ç”¨BINDå…³é”®å­—ä¸ºå˜é‡èµ‹å€¼</span></span><br><span class="line"><span class="keyword">SELECT</span> ?mealCode ?amount</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">    ?meal e:description ?description ;</span><br><span class="line">          e:amount ?amount .</span><br><span class="line">    BIND (UCASE(SUBSTR(?description,1,3)) as ?mealCode)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Sorting-Aggregating-Finding-The-Biggest-And-Smallest-Andâ€¦"><a href="#Sorting-Aggregating-Finding-The-Biggest-And-Smallest-Andâ€¦" class="headerlink" title="Sorting, Aggregating, Finding The Biggest And Smallest Andâ€¦"></a>Sorting, Aggregating, Finding The Biggest And Smallest Andâ€¦</h4><ul><li>SPARQLä½¿ç”¨<strong>ORDER BY</strong>æ¥æ’åºï¼ˆé»˜è®¤ä»å°åˆ°å¤§ï¼‰.  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¹æ®amountæ’åº</span></span><br><span class="line"><span class="keyword">SELECT</span> ?description ?<span class="built_in">date</span> ?amount</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">    ?meal e:description ?description ;</span><br><span class="line">    e:date ?date ;</span><br><span class="line">    e:amount ?amount .</span><br><span class="line">}</span><br><span class="line">ORDER BY ?amount</span><br></pre></td></tr></tbody></table></figure></li><li>ä»å¤§åˆ°å°æ’åºï¼šåˆ©ç”¨DESC()ï¼Œæ‹¬å·é‡Œé¢æ˜¯æ’åºç”¨çš„æŒ‡æ ‡  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ ¹æ®amountä»å¤§åˆ°å°æ’åº</span></span><br><span class="line"><span class="keyword">SELECT</span> ?description ?<span class="built_in">date</span> ?amount </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">    ?meal e:description ?description ;</span><br><span class="line">        e:date ?date ;</span><br><span class="line">        e:amount ?amount .</span><br><span class="line">}</span><br><span class="line">ORDER BY DESC(?amount)</span><br></pre></td></tr></tbody></table></figure></li><li>å¤šæ¡ä»¶æ’åºï¼Œå„ä¸ªæ¡ä»¶ç©ºæ ¼éš”å¼€  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…ˆæ ¹æ®descriptionæ’åºï¼ˆå­—æ¯è¡¨ï¼‰ï¼Œå†æ ¹æ®amountä»å¤§åˆ°å°æ’åº</span></span><br><span class="line"><span class="keyword">SELECT</span> ?description ?<span class="built_in">date</span> ?amount </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">    ?meal e:description ?description ;</span><br><span class="line">        e:date ?date ;</span><br><span class="line">        e:amount ?amount .</span><br><span class="line">}</span><br><span class="line">ORDER BY ?description DESC(?amount)</span><br></pre></td></tr></tbody></table></figure></li><li>æ‰¾æœ€å€¼<ul><li>sparql1.0: å…ˆæ’åºï¼Œç„¶åLIMIT 1</li><li>sparql1.1: MAX(),MIN()</li></ul></li><li>å‡å€¼ï¼šAVG()  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> (<span class="keyword">AVG</span>(?amount) <span class="keyword">as</span> ?avgAmount)</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">    ?meal e:amount ?amount .</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li>æ±‚å’ŒSUM(),è®¡æ•°COUNT()</li><li>GROUP_CONCAT(): å°†å¾ˆå¤šæ•°æ®ç»‘å®šåˆ°ä¸€ä¸ªå˜é‡ï¼Œé»˜è®¤çš„åˆ†éš”ç¬¦æ˜¯ç©ºæ ¼  <figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿”å›ä¸€ä¸ªamountlistï¼Œå½¢å¦‚â€œ25.05,10.00,6.65,31.45â€</span></span><br><span class="line"><span class="keyword">SELECT</span> (<span class="keyword">GROUP_CONCAT</span>(?amount;SEPARATOR = ',') AS amountlist)</span><br><span class="line">WHERE { ?meal e:amount ?amount.}</span><br></pre></td></tr></tbody></table></figure></li><li>GROUP BY: æ ¹æ®æŸå±æ€§åˆ†ç»„ï¼›ä»£å…¥SUM()å‡½æ•°å¯ä»¥æ±‚å’Œï¼Œç±»ä¼¼çš„ï¼Œå¯ä»¥ä»£å…¥åˆ«çš„å‡½æ•°  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç»Ÿè®¡æ—©ä¸­æ™šé¤æ€»æ•°</span></span><br><span class="line"><span class="keyword">SELECT</span> ?description (<span class="keyword">SUM</span>(?amount) <span class="keyword">AS</span> ?meanTotal)</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{...}</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> ?description</span><br></pre></td></tr></tbody></table></figure></li><li>HAVING å…³é”®å­—ï¼šé™å®šæ˜¾ç¤ºå‡ºæ¥çš„ç»“æœéœ€è¦æ»¡è¶³çš„æ¡ä»¶  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æˆ‘ä»¬åªå¯¹æ€»æ•°è¶…è¿‡20çš„æ„Ÿå…´è¶£</span></span><br><span class="line"><span class="keyword">SELECT</span> ?description (<span class="keyword">SUM</span>(?amount) <span class="keyword">AS</span> ?meanTotal)</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{...}</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> ?description</span><br><span class="line"><span class="keyword">HAVING</span> (<span class="keyword">SUM</span>(?amount)&gt;<span class="number">20</span>)</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Query-A-Remote-SPARQL-Service"><a href="#Query-A-Remote-SPARQL-Service" class="headerlink" title="Query A Remote SPARQL Service"></a>Query A Remote SPARQL Service</h4><ul><li>æŸ¥è¯¢è¿œç¨‹sparqlæœåŠ¡<ul><li>FROM å…³é”®å­—(RDF file)  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ?title</span><br><span class="line"><span class="keyword">FROM</span> &lt;xxx://xxx.xxx.xxxx/xxx&gt;</span><br><span class="line">{?s dc:title ?title}</span><br></pre></td></tr></tbody></table></figure></li><li>SERVICE å…³é”®å­—(SPARQL endpoint)  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨SPAERQL endpointè¿è¡ŒæŸ¥è¯¢å¾—åˆ°ä¸€äº›å†…å®¹ï¼Œå†è¿›è¡Œæ£€ç´¢è¿”å›ç»“æœ</span></span><br><span class="line"><span class="keyword">SELECT</span> ?p ?o</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">    SERVICE &lt;xxx://xxx.xxx/xxx&gt;</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">SELECT</span> ?p ?o</span><br><span class="line">        <span class="keyword">WHERE</span> {xxx ?p ?o}</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul></li><li><strong>ARQ å¿…é¡»æŒ‡å®šâ€“dataå‚æ•°ï¼Œå³ä¾¿æŸ¥è¯¢å¯¹æ•°æ®æ²¡æœ‰ä»»ä½•æ“ä½œï¼ˆä¸Šé¢çš„æŸ¥è¯¢ï¼Œå…¶å®åªæ˜¯æŒ‡å®šäº†å¾…æŸ¥è¯¢çš„endpointï¼Œè€Œä¸æ˜¯æ•°æ®</strong></li><li>å¯ä»¥å€ŸåŠ©<strong>D2RQ</strong>ä½¿ç”¨SPARQLæŸ¥è¯¢å…³ç³»æ•°æ®åº“ï¼ˆRDBï¼‰<h4 id="Federated-Queries-Searching-Multiple-Datasets-With-One-Query"><a href="#Federated-Queries-Searching-Multiple-Datasets-With-One-Query" class="headerlink" title="Federated Queries:Searching Multiple Datasets With One Query"></a>Federated Queries:Searching Multiple Datasets With One Query</h4></li><li>è”åˆæŸ¥è¯¢(Federated Queries):ä¸€ä¸ªqueryæŸ¥è¯¢å¤šä¸ªæ•°æ®é›†<ul><li>ç¬¬ä¸€ä¸ªå­æŸ¥è¯¢ä¸­ç»‘å®šçš„å˜é‡ï¼Œåœ¨ä¹‹åçš„å­æŸ¥è¯¢ä¸­ä¾æ—§å¯ç”¨</li><li>å¦‚æœæ•°æ®é›†ä¹‹é—´å…³ç³»å¯†åˆ‡ï¼Œä¸Šé¢çš„ç‰¹ç‚¹å°±ä¼šå¾ˆæœ‰ç”¨ï¼ˆç”¨æ¥äº¤å‰å¼•ç”¨ï¼‰</li><li>å¦‚æœä¸€ä¸ªæŸ¥è¯¢ç”±ä¸¤ä¸ªå­æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢1è¿”å›aä¸ªç»“æœï¼Œå­æŸ¥è¯¢2è¿”å›bä¸ªç»“æœï¼Œé‚£ä¹ˆæ•´ä½“æŸ¥è¯¢å°±è¿”å›a*bä¸ªç»“æœï¼ˆcross-productï¼‰</li><li>å­æŸ¥è¯¢ä¾æ¬¡æ‰§è¡Œï¼Œå¯èƒ½ä¼šèŠ±ç‚¹æ—¶é—´</li></ul></li></ul><h3 id="Coping-Creating-And-Converting-Data"><a href="#Coping-Creating-And-Converting-Data" class="headerlink" title="Coping,Creating,And Converting Data"></a>Coping,Creating,And Converting Data</h3><p>é™¤äº†æŸ¥è¯¢å‡ºç»“æœè¿˜èƒ½åšæ›´å¤šçš„äº‹</p><h4 id="Query-Forms-SELECT-DESCRIBE-ASK-and-CONSTRUCT"><a href="#Query-Forms-SELECT-DESCRIBE-ASK-and-CONSTRUCT" class="headerlink" title="Query Forms: SELECT, DESCRIBE, ASK, and CONSTRUCT"></a>Query Forms: SELECT, DESCRIBE, ASK, and CONSTRUCT</h4><ul><li>CONSTRUCTè¿”å›ä¸‰å…ƒç»„ï¼›å¯ä»¥è¿”å›åŸæ•°æ®ä¹Ÿå¯ä»¥æŠ½å–å‡ºå€¼æ¥åˆ›å»ºæ–°çš„ä¸‰å…ƒç»„ï¼›å¯ä»¥ç”¨æ¥å¤åˆ¶ã€åˆ›å»ºã€è½¬æ¢</li><li>ASKè¯¢é—®å¤„ç†å™¨ç»™å®šçš„å›¾æ¨¡å¼æ˜¯å¦æè¿°ç‰¹å®šæ•°æ®é›†ä¸­çš„ä¸€ç»„ä¸‰å…ƒç»„ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼›å¯ä»¥ç”¨æ¥è‡ªåŠ¨åŒ–æ•°æ®å¤„ç†æµç¨‹ä¸­çš„è´¨é‡æ§åˆ¶ï¼›</li><li>DESCRIBEè¦æ±‚æä¾›æè¿°ç‰¹å®šèµ„æºçš„ä¸‰å…ƒç»„</li></ul><h4 id="Copying-Data"><a href="#Copying-Data" class="headerlink" title="Copying Data"></a>Copying Data</h4><ul><li>åˆ©ç”¨CONSTRUCTæŠ½å–ä¸‰å…ƒç»„ï¼›ç»“åˆGRAPHå…³é”®å­—å¯ä»¥ä»ç‰¹å®šå‘½åå›¾ä¸­æŠ½å–ï¼›SELECTåé¢è·Ÿçš„æ˜¯å˜é‡åˆ—è¡¨ï¼ŒCONSTRUCTåé¢è·Ÿçš„æ˜¯æƒ³è¦æ„é€ çš„ä¸‰å…ƒç»„      <figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#constructåé¢è·Ÿçš„æ˜¯ä¸‰å…ƒç»„ï¼Œç”¨èŠ±æ‹¬å·åŒ…å›´,é‡Œé¢å¯ä»¥åŒ…å«ä»»æ„ä¸ªä¸‰å…ƒç»„æ¨¡å¼ï¼ˆtriple patternsï¼‰</span></span><br><span class="line">CONSTRUCT</span><br><span class="line">{?person ?p ?o}</span><br><span class="line">WHERE</span><br><span class="line">{...}</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Creating-New-Data"><a href="#Creating-New-Data" class="headerlink" title="Creating New Data"></a>Creating New Data</h4><ul><li>åˆ©ç”¨ä¸€äº›å‡½æ•°å¤„ç†æ•°æ®ï¼Œå¾—åˆ°æ–°çš„å­—æ®µ</li><li>æŒ‡æ˜èµ„æºæ‰€å±çš„ç±»ä¼šè®©ä¿¡æ¯æ¨æ–­æ›´åŠ å®¹æ˜“</li><li>æ‰€è°“çš„åˆ›å»ºä¿¡æ¯å…¶å®æ˜¯å°†éšå«çš„ä¿¡æ¯æ˜ç¡®åŒ–</li></ul><h4 id="Converting-Data"><a href="#Converting-Data" class="headerlink" title="Converting Data"></a>Converting Data</h4><ul><li>å°†ä¸€ä¸ªå‘½åç©ºé—´ä¸­çš„å±æ€§è½¬æ¢åˆ°éœ€è¦çš„å‘½åç©ºé—´</li><li>æ„å‘³ç€è§„èŒƒåŒ–URIä»¥ä¾¿æ›´åŠ å®¹æ˜“åœ°ç»„åˆæ•°æ®</li><li>owl:sameAsæ˜¯DBpediaä¸­ç”¨æ¥å°†ä¸åŒæ¥æºçš„èµ„æºè”ç³»èµ·æ¥çš„æ–¹å¼</li></ul><h4 id="Finding-Bad-Data"><a href="#Finding-Bad-Data" class="headerlink" title="Finding Bad Data"></a>Finding Bad Data</h4><ul><li>schemaæ˜¯ä¸€ç»„å…³äºæ•°æ®ç»“æ„å’Œæ•°æ®ç±»å‹çš„è§„åˆ™</li><li>å¦‚æœæ•°æ®éµå¾ªäº†æŸä¸ªschemaé‚£ä¹ˆå°±ä¸éœ€è¦ç¨‹åºå‘˜å†™ä»£ç åº”å¯¹â€œç»™å­—ç¬¦ä¸²åŠ äº†1â€è¿™æ ·çš„æƒ…å½¢äº†</li><li>è¯­ä¹‰ç½‘åº”ç”¨é‡‡ç”¨äº†åˆ«çš„æ–¹æ³•ï¼Œé€šè¿‡æ·»åŠ æ›´å¤šçš„metadata</li><li>ä½¿ç”¨SPARQLæ·»åŠ é™åˆ¶è€Œä¸æ˜¯OWL</li></ul><h4 id="Defining-Rules-with-SPARQL"><a href="#Defining-Rules-with-SPARQL" class="headerlink" title="Defining Rules with SPARQL"></a>Defining Rules with SPARQL</h4><ul><li>rules expressed as queries</li><li>ä¸€äº›å¸¸ç”¨çš„ï¼š<ul><li>isURI</li><li>datatype(?amount)) != xsd:integer</li><li>!(bound(?grade))</li><li>?grade &lt; 5</li></ul></li></ul><h4 id="Generating-Data-About-Broken-Rules"><a href="#Generating-Data-About-Broken-Rules" class="headerlink" title="Generating Data About Broken Rules"></a>Generating Data About Broken Rules</h4><ul><li>å°†ASKæ¢ä¸ºCONSTRUCT</li><li>é—®é¢˜å»ºæ¨¡ï¼šé—®é¢˜ç±»å‹ã€ç›¸å…³å±æ€§</li><li>å¯ä»¥ä½¿ç”¨Unionå°†ä¸åŒçš„è§„åˆ™åŠ åˆå¹¶ï¼Œä½†æ˜¯éšç€è§„åˆ™çš„å¢å¤šï¼Œè¿™ç§æ–¹å¼ä¼šäº§ç”Ÿè¶Šæ¥è¶Šå¤šçš„é”™è¯¯ï¼ˆ thereâ€™d be greater and greater room for error</li><li>å¥½çš„å¤„ç†æ–¹å¼æ˜¯ï¼šåˆ†å¼€å­˜å‚¨è§„åˆ™ï¼Œä½¿ç”¨æ˜¯æ—¶å€™pipeline</li></ul><h4 id="Using-Existing-SPARQL-Rules-Vocabularies"><a href="#Using-Existing-SPARQL-Rules-Vocabularies" class="headerlink" title="Using Existing SPARQL Rules Vocabularies"></a>Using Existing SPARQL Rules Vocabularies</h4><ul><li>Schemarama</li><li>SPIN</li><li>å…³ç³»æ•°æ®åº“â€“APIâ€“check for rule compliance using SPARQL</li></ul><h4 id="Asking-for-a-Description-of-a-Resource"><a href="#Asking-for-a-Description-of-a-Resource" class="headerlink" title="Asking for a Description of a Resource"></a>Asking for a Description of a Resource</h4><ul><li>DESCRIBE+URI :è¿”å›èµ„æºçš„ä¸€äº›ä¿¡æ¯ï¼Œå…·ä½“è¿”å›ç»“æœå’ŒSPARQLæŸ¥è¯¢å¼•æ“æœ‰å…³</li><li>CONSTRUCTå¯ä»¥å®Œæˆç›¸åŒçš„äº‹æƒ…ï¼Œwith better controlï¼Œå› æ­¤ä¸å¤ªæ¨èåœ¨seriousçš„åº”ç”¨å¼€å‘ä¸­ä½¿ç”¨</li></ul><h3 id="Datatypes-And-Functions"><a href="#Datatypes-And-Functions" class="headerlink" title="Datatypes And Functions"></a>Datatypes And Functions</h3><h4 id="Datatypes-and-Queries"><a href="#Datatypes-and-Queries" class="headerlink" title="Datatypes and Queries"></a>Datatypes and Queries</h4><ul><li>æ•°æ®ç±»å‹å…ƒæ•°æ®çš„å­˜å‚¨æ˜¯è®°å½•è¯­ä¹‰ä¿¡æ¯çš„æœ€æ—©æ–¹å¼ä¹‹ä¸€</li><li>æ ‡æ˜æ•°æ®ç±»å‹æ–¹ä¾¿ç†è§£ï¼Œä¸æ ‡æ˜çš„è¯ä¼šæœ‰é»˜è®¤è®¾ç½®</li><li>str()å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼šFILTER (str(?o) = â€œtwoâ€) #è¿”å›æ‰€æœ‰å€¼ä¸ºâ€twoâ€çš„</li></ul><h4 id="Representing-Strings"><a href="#Representing-Strings" class="headerlink" title="Representing Strings"></a>Representing Strings</h4><ul><li>å•å¼•å·ï¼ŒåŒå¼•å·ï¼Œä¸‰ä¸ªå•å¼•å·æˆ–è€…åŒå¼•å·</li><li>ARQè¾“å‡ºçš„æ—¶å€™:ä½¿ç”¨åŒå¼•å·åˆ†éš”å­—ç¬¦ä¸²ï¼›å›è½¦ä¸º/rï¼Œæ¢è¡Œä¸º/nï¼Œè½¬ä¹‰ä¸º/ï¼›è¾“å‡ºçš„é¡ºåºdoesnâ€™t matter</li></ul><h4 id="Comparing-Values-and-Doing-Arithmetic"><a href="#Comparing-Values-and-Doing-Arithmetic" class="headerlink" title="Comparing Values and Doing Arithmetic"></a>Comparing Values and Doing Arithmetic</h4><ul><li>å½“ä½¿ç”¨ä¸åŒçš„æ•°å­—ç±»å‹æ˜¾å¼é”®å…¥ä¸åŒçš„å€¼æ—¶ï¼Œä»ç„¶å¯ä»¥åœ¨æ‰§è¡Œç®—æœ¯æ—¶å°†å®ƒä»¬ä¸€èµ·ä½¿ç”¨ï¼šæ¯”å¦‚integerå’Œdecimalå¯ä»¥ä¹˜åˆ°ä¸€èµ·</li></ul><h4 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h4><ul><li>SPARQL 1.0è§„èŒƒæä¾›äº†ä¸€äº›åŸºæœ¬å‡½æ•°ï¼ŒSPARQL 1.1æä¾›äº†æ›´å¹¿æ³›çš„é€‰æ‹©ï¼Œå‡ ä¹æ‰€æœ‰éƒ½åŸºäºXPathå‡½æ•°</li><li>SPARQLå¤„ç†å™¨å¯ä»¥æä¾›å…¶å®æ–½è€…æƒ³è¦åŒ…å«çš„ä»»ä½•æ‰©å±•åŠŸèƒ½</li></ul><h4 id="Program-Logic-Functions"><a href="#Program-Logic-Functions" class="headerlink" title="Program Logic Functions"></a>Program Logic Functions</h4><ul><li>IF()å‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ã€‚ å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸ºtrueï¼Œåˆ™è¯¥å‡½æ•°è¿”å›ç¬¬äºŒä¸ªå‚æ•°çš„å€¼; å¦åˆ™è¿”å›ç¬¬ä¸‰ä¸ª</li><li>COALESCE():æ¥å—å¾ˆå¤šå‚æ•°ï¼Œè¿”å›the first one that doesnâ€™t result in an error  <figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ?<span class="keyword">first</span> ?<span class="keyword">last</span> </span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">{</span><br><span class="line">?s ab:lastName ?<span class="keyword">last</span>; </span><br><span class="line">   ab:firstName ?firstname . </span><br><span class="line">OPTIONAL{ ?s ab:nick ?nickname . } </span><br><span class="line">BIND (COALESCE(?nickname,?firstname) AS ?first)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Node-Type-and-Datatype-Checking-Functions"><a href="#Node-Type-and-Datatype-Checking-Functions" class="headerlink" title="Node Type and Datatype Checking Functions"></a>Node Type and Datatype Checking Functions</h4><ul><li>å‡½æ•°å‚æ•°å¯èƒ½éœ€è¦æ˜¯ç‰¹å®šç±»å‹ï¼Œæ•°æ®å­—æ®µä¹Ÿéœ€è¦æ˜¯ç‰¹å®šç±»å‹</li><li>datatype()å‡½æ•°å¯ä»¥ç”¨æ¥æ£€æµ‹ç±»å‹</li><li>isBlank(), isLiteral(), isNumeric(), isIRI(), and isURI()</li><li>æ•°å­—ï¼Œå­—ç¬¦ä¸²å’Œå…³é”®å­—trueå’Œfalseï¼ˆå…¨éƒ¨å†™æˆå°å†™ï¼‰éƒ½æ˜¯literalsï¼Œåªæœ‰URIå’Œç©ºç™½èŠ‚ç‚¹ä¸æ˜¯</li><li>datatype(params) è¿”å›ä¸€ä¸ªURIï¼Œæ ‡è¯†paramsçš„ç±»å‹,paramsä¸ºç©ºç™½èŠ‚ç‚¹å’ŒURIsæ—¶è¿”å›ä¸ºç©º</li><li>bound()å‘Šè¯‰æˆ‘ä»¬ä¸€ä¸ªå˜é‡æ˜¯å¦æœ‰ä¸€ä¸ªç»‘å®šçš„å€¼</li></ul><h4 id="Node-Type-Conversion-Functions"><a href="#Node-Type-Conversion-Functions" class="headerlink" title="Node Type Conversion Functions"></a>Node Type Conversion Functions</h4><ul><li>URI() function lets you convert values to URIs if possible</li><li>åœ¨å°†å€¼ä¼ é€’ç»™URI()æˆ–IRI()å‡½æ•°ä¹‹å‰ï¼Œä½¿ç”¨ENCODE_FOR_URI()å‡½æ•°é¢„å¤„ç†æ˜¯ä¸ªæ¨èçš„åšæ³•ï¼Œä½†è¦æ³¨æ„å®ƒåªæ¥å—simple literalsæˆ–xsdï¼šstring</li><li>str():è¿”å›ä¼ å…¥èµ„æºçš„å­—ç¬¦ä¸²å½¢å¼ï¼Œä¼ å…¥ä¸ºç©ºç™½èŠ‚ç‚¹æ—¶ä¸è¿”å›å€¼</li><li>ä¸€ä¸ªä¾‹å­ï¼š  <figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CONSTRUCT {?s ?p ?testURI.} </span><br><span class="line">WHERE</span><br><span class="line">{</span><br><span class="line">    ?s ?p ?o . </span><br><span class="line">    BIND( IF(isURI(?o), ?o, URI(ENCODE_FOR_URI(str(?o))) ) AS ?testURI)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Datatype-Conversion"><a href="#Datatype-Conversion" class="headerlink" title="Datatype Conversion"></a>Datatype Conversion</h4><ul><li>conversion to boolean is pickier: xsd:boolean(?o)ä¸èƒ½è½¬æ¢Trueï¼Œå¯ä»¥è½¬æ¢true</li><li>xsd:dateTime()ä¸èƒ½è½¬æ¢â€œ2011-11-12â€ ï¼Œå¯ä»¥è½¬æ¢â€œ2011-11-12T14:30:00â€</li><li>STRDT()æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªliteralå€¼å’Œä¸€ä¸ªç±»å‹URIï¼Œåˆ›å»ºä¸€ä¸ªtyped literalï¼ˆè‡ªå®šä¹‰ç±»å‹ï¼‰  <figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CONSTRUCT { ?s u:amount ?newAmount . } </span><br><span class="line">WHERE {</span><br><span class="line">    ?s im:product ?prodName ;</span><br><span class="line">       im:amount ?amount ; </span><br><span class="line">       im:units ?units .</span><br><span class="line">       BIND (STRDT(?amount, URI(CONCAT("http://learningsparql.com/ns/units<span class="comment">#",?units))) AS ?newAmount)</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Checking-Adding-and-Removing-Spoken-Language-Tags"><a href="#Checking-Adding-and-Removing-Spoken-Language-Tags" class="headerlink" title="Checking, Adding, and Removing Spoken Language Tags"></a>Checking, Adding, and Removing Spoken Language Tags</h4><ul><li>FILTER ( lang(?label) = â€œenâ€ ) #åªè¿”å›è‹±æ–‡æ ‡ç­¾</li><li>BIND (str(?label) AS ?strippedLabel) #å»æ‰@enï¼Œåªè¿”å›æ–‡å­—ä¿¡æ¯</li><li>STRLANG()å‡½æ•°å¯ä»¥ä¸ºå±æ€§åŠ æ ‡ç­¾ï¼Œæ¯”å¦‚ï¼šSTRLANG(?USTerm,â€en-USâ€)</li></ul><h4 id="String-Functions"><a href="#String-Functions" class="headerlink" title="String Functions"></a>String Functions</h4><ul><li>STRLEN(), SUBSTR(), UCASE(), and LCASE()</li><li>STRSTARTS(), STRENDS(), CONTAINS(),regex() #è¿”å›å¸ƒå°”å€¼</li><li>The regex() function expects its first argument to be either an xsd:string or a simple literal with no language tagã€‚å¯ä»¥str()ä¸€ä¸‹</li></ul><h4 id="Numeric-Functions"><a href="#Numeric-Functions" class="headerlink" title="Numeric Functions"></a>Numeric Functions</h4><ul><li>abs(),round(),ceil(),flloor()</li><li>rand()+CONSTRUCT :ç”Ÿæˆæ ·æœ¬æ•°æ®</li></ul><h4 id="Date-and-Time-Functions"><a href="#Date-and-Time-Functions" class="headerlink" title="Date and Time Functions"></a>Date and Time Functions</h4><ul><li>now(),timezone(),tz()</li></ul><h4 id="Hash-Functions"><a href="#Hash-Functions" class="headerlink" title="Hash Functions"></a>Hash Functions</h4><ul><li>MD5(),SHA1(),SHA224(),SHA256(),SHA384(),SHA512()</li></ul><h4 id="Extension-Functions"><a href="#Extension-Functions" class="headerlink" title="Extension Functions"></a>Extension Functions</h4><ul><li>ä¸åŒçš„SPARQLå¤„ç†å™¨æ”¯æŒçš„æ‹“å±•å‡½æ•°ä¸åŒ</li><li>less portable</li></ul><h3 id="Updating-Data-With-SPARQL"><a href="#Updating-Data-With-SPARQL" class="headerlink" title="Updating Data With SPARQL"></a>Updating Data With SPARQL</h3><p>query the data with the SPARQL query language and manage it with the update language.</p><h4 id="Getting-Started-with-Fuseki"><a href="#Getting-Started-with-Fuseki" class="headerlink" title="Getting Started with Fuseki"></a>Getting Started with Fuseki</h4><ul><li>ä¸‹è½½ã€å®‰è£…</li></ul><h4 id="Adding-Data-to-a-Dataset"><a href="#Adding-Data-to-a-Dataset" class="headerlink" title="Adding Data to a Dataset"></a>Adding Data to a Dataset</h4><ul><li>æ›´æ–°æ–‡ä»¶åç¼€ä¸º.ruï¼Œæ„æ€æ˜¯ä¸€ä¸ªæ’å…¥è¯·æ±‚ï¼Œnot a query<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># INSERT DATAåé¢è·Ÿè¦æ’å…¥çš„triples</span></span><br><span class="line"><span class="comment"># ç®€å•å¿«é€Ÿæ’å…¥æ•°æ®</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">DATA</span> </span><br><span class="line">{d:i8301 ab:homeTel <span class="string">"(718) 440-9821"</span> . ab:Person a rdfs:<span class="keyword">Class</span> .}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#whereåé¢è·Ÿtriple patternsï¼Œå¯ä»¥å¼•ç”¨ä¸Šé¢çš„å˜é‡</span></span><br><span class="line"><span class="comment"># çµæ´»åˆ›é€ </span></span><br><span class="line"><span class="keyword">INSERT</span> {d:i8301 ab:homeTel <span class="string">"(718) 440-9821"</span> . ab:Person a rdfs:<span class="keyword">Class</span> .}</span><br><span class="line"><span class="keyword">WHERE</span> {}</span><br></pre></td></tr></tbody></table></figure></li><li>ä¸‰å…ƒç»„æ¨¡å¼å°±æ˜¯ä»»æ„ä½ç½®éƒ½å¯ä»¥è¢«å˜é‡æ›¿æ¢çš„ä¸‰å…ƒç»„</li></ul><h4 id="Deleting-Data"><a href="#Deleting-Data" class="headerlink" title="Deleting Data"></a>Deleting Data</h4><ul><li>DELETE DATA{}å’ŒDELETE{}WHERE{}</li><li>DELETE WHERE{} :åˆ é™¤åŒ¹é…whereæ¡ä»¶çš„ä¸‰å…ƒç»„</li><li>CLEAR  DEFAULT</li></ul><h4 id="Changing-Existing-Data"><a href="#Changing-Existing-Data" class="headerlink" title="Changing Existing Data"></a>Changing Existing Data</h4><ul><li>åœ¨ä¸€æ¬¡æ›´æ–°æ“ä½œä¸­ï¼Œåˆ é™¤+æ’å…¥</li><li>å³ä½¿åˆ é™¤å‘ç”Ÿåœ¨æ’å…¥ä¹‹å‰ï¼ŒINSERTå›¾å½¢æ¨¡å¼ä»ç„¶å…·æœ‰WHEREå­å¥å­˜å‚¨çš„æ‰€æœ‰ä¿¡æ¯</li></ul><h4 id="Named-Graphs"><a href="#Named-Graphs" class="headerlink" title="Named Graphs"></a>Named Graphs</h4><ul><li>SPARQLæ›´æ–°å…è®¸ä½¿ç”¨åˆ†å·è¿æ¥å¤šä¸ªæ“ä½œ</li><li>å°†ä¸‰å…ƒç»„æ’å…¥ä¸å­˜åœ¨çš„å›¾æ—¶ï¼ŒSPARQLå¤„ç†å™¨ä¼šåˆ›å»ºè¯¥å›¾</li></ul><h4 id="Dropping-Graphs"><a href="#Dropping-Graphs" class="headerlink" title="Dropping Graphs"></a>Dropping Graphs</h4><ul><li>DROP GRAPH d:g1 #åˆ é™¤å›¾g1</li><li>DROP DEFAULT #æ¸…é™¤é»˜è®¤å›¾ï¼Œï¼ˆå› ä¸ºé»˜è®¤å›¾æ€»æ˜¯å­˜åœ¨ï¼Œå³ä½¿ä¸ºç©º</li><li>DROP NAMEDï¼šåˆ é™¤å‘½åå›¾</li><li>DROP ALL ï¼šåˆ é™¤æ‰€æœ‰å›¾</li><li>SPARQL Updateæ²¡æœ‰UNDOæ“ä½œï¼Œå› æ­¤DROP ALLæ˜¯ä¸ªéœ€è¦æ…é‡çš„åŠ¨ä½œ</li><li>è¿™é‡Œçš„DROPæ¢ä¸ºCLEARè¡¨ç¤ºå›¾ä¸­çš„æ¸…é™¤ä¸‰å…ƒç»„</li><li>CREATE GRAPHï¼šåˆ›å»ºä¸€ä¸ªç©ºç™½å›¾</li></ul><h4 id="Named-Graph-Syntax-Shortcuts-WITH-and-USING"><a href="#Named-Graph-Syntax-Shortcuts-WITH-and-USING" class="headerlink" title="Named Graph Syntax Shortcuts: WITH and USING"></a>Named Graph Syntax Shortcuts: WITH and USING</h4><ul><li>withè¯­å¥æŒ‡æ˜è¦æ“ä½œçš„å›¾ï¼Œæ¯”GRAPHèŠ‚çœ</li><li>USINGçš„ä½œç”¨ç±»ä¼¼äºSELECTè¯­å¥çš„FROM</li><li>USING NAMED === FROM NAMED  <figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">USING NAMED d:g2 </span><br><span class="line">WHERE</span><br><span class="line">{ </span><br><span class="line">    <span class="comment"># è¿™é‡Œä¸€å®šè¦å£°æ˜GRAPH d:g2</span></span><br><span class="line">    GRAPH d:g2 {?s dm:tag "five" . ?s dm:tag "six" .}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li>ä½¿ç”¨USINGå°±ä¸è¦ä½¿ç”¨WITH</li></ul><h4 id="Deleting-and-Replacing-Triples-in-Named-Graphs"><a href="#Deleting-and-Replacing-Triples-in-Named-Graphs" class="headerlink" title="Deleting and Replacing Triples in Named Graphs"></a>Deleting and Replacing Triples in Named Graphs</h4>  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">DATA</span> { GRAPH d:g2{ d:x dm:tag <span class="string">"six"</span> }}</span><br></pre></td></tr></tbody></table></figure>  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># GRAPH+å›¾åæˆ–è€…å˜é‡å</span></span><br><span class="line"><span class="keyword">DELETE</span> { GRAPH ?g { ?s ?p <span class="string">"three"</span> } } </span><br><span class="line"><span class="keyword">WHERE</span> { GRAPH ?g { ?s ?p <span class="string">"three"</span> } }</span><br></pre></td></tr></tbody></table></figure>  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WITH</span> d:g1 </span><br><span class="line"><span class="keyword">DELETE</span> { ?s ?p <span class="string">"four"</span>}</span><br><span class="line"><span class="keyword">WHERE</span> { ?s ?p <span class="string">"four"</span>}</span><br></pre></td></tr></tbody></table></figure><h3 id="Building-Applications-With-SPARQL"><a href="#Building-Applications-With-SPARQL" class="headerlink" title="Building Applications With SPARQL"></a>Building Applications With SPARQL</h3><ul><li>å°†æŸ¥è¯¢å‘é€åˆ°ç«¯ç‚¹çš„æœ€å¸¸è§æ–¹å¼æ˜¯å°†æŸ¥è¯¢çš„è½¬ä¹‰ç‰ˆæœ¬ä½œä¸ºå‚æ•°æ·»åŠ åˆ°ç«¯ç‚¹çš„URI</li><li>D2RQ</li><li>SPARQLWrapper for python</li><li>ARQ source code for java</li></ul><h3 id="Glossary"><a href="#Glossary" class="headerlink" title="Glossary"></a>Glossary</h3><ul><li><strong>blank node</strong>: A subject or object in an RDF graph that has no identity. These are typically used to group together other values</li><li><strong>default graph</strong>: The triples in an RDF dataset that donâ€™t belong to a named graph</li><li><strong>IRI</strong>: Internationalized Resource Identifier: a URI that allows a wider choice of characters,making it â€œinternationalized.â€</li><li><strong>literal</strong>: A value, as opposed to a URI, which is a name for something. A literal may have a datatype or a spoken language tag associated with it, but not both. A simple literal is a literal with no language tag or datatype</li><li><strong>N3</strong>: A non-XML RDF serialization format developed by Tim Berners-Lee. Turtle is a simplified version of N3</li><li><strong>N-Triples</strong>: A very simple RDF serialization format that shows complete URIs with no abbreviation and a triple on each line. Often used as a graph dump format</li><li><strong>named graph</strong>: A set of triples, typically within a larger collection of them, that can be referenced with a particular name. The name is a URI</li><li><strong>RDF/XML</strong>: RDFâ€™s original serialization format, based on XML</li><li><strong>RDFS</strong>: the RDF Schema (RDFS) specification lets you specify classes, properties, and metadata about those classes and properties. These serve as metadata to let you infer new facts about your data, not as validation rules to indicate correct versus incorrect data</li><li><strong>triplestore</strong>: A specialized database manager designed for storing triples</li><li><strong>Turtle</strong>: An increasingly popular RDF serialization format based on N3</li><li><strong>URI</strong>: â€œURIâ€ is used more often to refer to an identifier, and â€œURLâ€ to refer to a locator, or address.We use URIs to identify resources and property names in RDF</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Jumping-Right-In&quot;&gt;&lt;a href=&quot;#Jumping-Right-In&quot; class=&quot;headerlink&quot; title=&quot;Jumping Right In&quot;&gt;&lt;/a&gt;Jumping Right In&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;FROMæŒ‡å®šçš„æ•°æ®é›†ä¼šè¢«è°ƒç”¨SPARQLå¤„ç†å™¨æ—¶æŒ‡å®šçš„æ•°æ®é›†è¦†ç›–ï¼ˆå¦‚æœéƒ½æŒ‡å®šäº†&lt;/li&gt;
&lt;li&gt;RDFä¸æ˜¯æ•°æ®æ ¼å¼ï¼Œè€Œæ˜¯æ•°æ®æ¨¡å‹ï¼Œå®ƒå¯ä»¥é€‰æ‹©å­˜å‚¨æ•°æ®æ–‡ä»¶çš„è¯­æ³•&lt;/li&gt;
&lt;li&gt;å¦‚æœæˆ‘ä»¬å°†æ•°æ®ä¸å…¶å®ƒæ•°æ®ç»“åˆèµ·æ¥ï¼Œé‚£ä¹ˆRDFä¸‰å…ƒç»„çš„ä¸»è¯­å’Œè°“è¯­éƒ½å¿…é¡»å±äºç‰¹å®šçš„åç§°ç©ºé—´ï¼Œä»¥é˜²æ­¢ç±»ä¼¼åç§°ä¹‹é—´çš„æ··æ·†ï¼Œäºæ˜¯æˆ‘ä»¬ä½¿ç”¨URIæ¥è¡¨ç¤ºå®ƒä»¬&lt;/li&gt;
&lt;li&gt;å½“ä½¿ç”¨å®Œæ•´çš„URIæ—¶ï¼Œå°†å…¶æ”¾åœ¨å°–æ‹¬å·ä¸­ä»¥å‘å¤„ç†å™¨æ˜¾ç¤ºå®ƒæ˜¯ä¸€ä¸ªURI&lt;/li&gt;
&lt;li&gt;åœ¨semantic webå¼€å‘ä¸­ï¼Œè¯æ±‡è¡¨æ˜¯ä¸€ç»„ä½¿ç”¨æ ‡å‡†æ ¼å¼å­˜å‚¨çš„æœ¯è¯­ï¼Œä¾›äººä»¬é‡å¤ä½¿ç”¨&lt;/li&gt;
&lt;li&gt;å‘ç°ä¸åŒæ¥æºä¸‰å…ƒç»„ä¹‹é—´è”ç³»çš„èƒ½åŠ›æ˜¯SPARQLçš„æœ€ä½³ç‰¹æ€§ä¹‹ä¸€&lt;/li&gt;
&lt;li&gt;çº¦å®šï¼šä¸»è°“å®¾åˆ†åˆ«ç”¨?s,?p,?oè¡¨ç¤º&lt;/li&gt;
&lt;li&gt;åªæœ‰æ»¡è¶³å›¾æ¨¡å¼ä¸­æ‰€æœ‰ä¸‰å…ƒç»„çš„æ•°æ®æ‰ä¼šè¢«è¿”å›&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>çŸ¥è¯†å›¾è°±å°demo</title>
    <link href="https://yikayiyo.github.io/2018/03/10/kgdemo/"/>
    <id>https://yikayiyo.github.io/2018/03/10/kgdemo/</id>
    <published>2018-03-10T02:14:20.000Z</published>
    <updated>2019-03-15T01:55:28.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®éªŒç¯å¢ƒ"><a href="#å®éªŒç¯å¢ƒ" class="headerlink" title="å®éªŒç¯å¢ƒ"></a>å®éªŒç¯å¢ƒ</h2><p>ç³»ç»Ÿï¼š<br>ubuntu16.04</p><p>è½¯ä»¶ç›®å½•:</p><ul><li>é¡¹ç›®ç›®å½•/home/gao/software/kgdemo/</li><li>æ•°æ®åº“/home/gao/software/mysql</li><li>åº”ç”¨æ¡†æ¶/home/gao/software/apache-jena-3.6.0ï¼ˆè¿™é‡Œä½¿ç”¨äº†å®ƒçš„TDBç»„ä»¶</li><li>SPARQLæœåŠ¡å™¨/home/gao/software/apache-jena-fuseki-3.6.0</li><li>æ•°æ®è½¬åŒ–å·¥å…·/home/gao/software/d2rq-0.8.1</li><li>æœ¬ä½“æ„å»ºå·¥å…·/home/gao/software/Protege-5.2.0<a id="more"></a></li></ul><h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><h3 id="æ•°æ®"><a href="#æ•°æ®" class="headerlink" title="æ•°æ®"></a>æ•°æ®</h3><p>ä¸ç”µå½±ç›¸å…³çš„.åŸºæœ¬ç»Ÿè®¡æ•°æ®å¦‚ä¸‹ï¼š</p><ol><li>æ¼”å‘˜æ•°é‡ï¼š505äºº</li><li>ç”µå½±æ•°é‡ï¼š4518éƒ¨</li><li>ç”µå½±ç±»å‹ï¼š19ç±»</li><li>äººç‰©ä¸ç”µå½±çš„å…³ç³»ï¼š14451</li><li>ç”µå½±ä¸ç±»å‹çš„å…³ç³»ï¼š7898</li></ol><p>æ¼”å‘˜çš„åŸºæœ¬ä¿¡æ¯åŒ…æ‹¬ï¼šå§“åã€è‹±æ–‡åã€å‡ºç”Ÿæ—¥æœŸã€æ­»äº¡æ—¥æœŸã€å‡ºç”Ÿåœ°ã€ä¸ªäººç®€ä»‹.<br>ç”µå½±çš„åŸºæœ¬ä¿¡æ¯åŒ…æ‹¬ï¼šç”µå½±åç§°ã€ç”µå½±ç®€ä»‹ã€ç”µå½±è¯„åˆ†ã€ç”µå½±å‘è¡Œæ—¥æœŸã€ç”µå½±ç±»å‹.</p><img src="/2018/03/10/kgdemo/ErGraph.png" class=""><h3 id="æœ¬ä½“å»ºæ¨¡"><a href="#æœ¬ä½“å»ºæ¨¡" class="headerlink" title="æœ¬ä½“å»ºæ¨¡"></a>æœ¬ä½“å»ºæ¨¡</h3><img src="/2018/03/10/kgdemo/OntoGraph.png" class=""><ul><li><p>æ‰“å¼€protege,åœ¨Ontology IRIä¸­å¡«å†™æ–°å»ºæœ¬ä½“èµ„æºçš„IRIä¸ºâ€<a href="http://www.kgmovie.demo.com&quot;" target="_blank" rel="noopener">http://www.kgmovie.demo.com"</a></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> è¿›å…¥protegeç›®å½•,æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤</span></span><br><span class="line">./run.sh</span><br></pre></td></tr></tbody></table></figure></li><li><p>ç‚¹å‡»â€œEntitiesâ€tabæ ‡ç­¾,é€‰æ‹©â€œClassesâ€æ ‡ç­¾.åœ¨è¿™ä¸ªç•Œé¢,æˆ‘ä»¬åˆ›å»ºç”µå½±çŸ¥è¯†å›¾è°±çš„ç±»/æ¦‚å¿µ.</p><p>åœ¨owl:Thingä¸‹åˆ›å»ºä¸‰ä¸ªå­ç±»,Person,Movie,Genre.ä¸‰ä¸ªç±»çš„é»˜è®¤å…³ç³»æ˜¯äº’æ–¥çš„.</p></li></ul><ul><li><p>åˆ‡æ¢åˆ°â€Object Propertiesâ€é¡µé¢åˆ›å»º<strong>ç±»ä¹‹é—´çš„å…³ç³»,å³,å¯¹è±¡å±æ€§</strong>ã€‚</p><p>åˆ›å»ºäº†ä¸‰ä¸ªå¯¹è±¡å±æ€§ï¼Œâ€hasActedInâ€è¡¨ç¤ºæŸäººå‚æ¼”äº†æŸç”µå½±,è¯¥å±æ€§çš„â€domainâ€æ˜¯äºº,â€rangeâ€æ˜¯ç”µå½±ã€‚(*â€domainâ€è¡¨ç¤ºè¯¥å±æ€§æ˜¯å±äºå“ªä¸ªç±»çš„ï¼Œâ€rangeâ€è¡¨ç¤ºè¯¥å±æ€§çš„å–å€¼èŒƒå›´*),è®¾ç½®è¯¥å±æ€§çš„é€†å±æ€§(Inverse of)æ˜¯â€hasActorâ€,å¯ç”¨äºæ¨ç†.å¦å¤–ä¸€ä¸ªå±æ€§â€hasGenreâ€è¡¨ç¤ºç”µå½±å±äºä»€ä¹ˆç±»å‹.</p></li><li><p>åˆ‡æ¢åˆ°â€Data propertiesâ€é¡µé¢åˆ›å»º<strong>ç±»çš„å±æ€§,å³,æ•°æ®å±æ€§</strong>.</p><p>å…¶å®åŒºåˆ†æ•°æ®å±æ€§å’Œå¯¹è±¡å±æ€§è¿˜æœ‰ä¸€ä¸ªå¾ˆç›´è§‚çš„æ–¹æ³•,æˆ‘ä»¬è§‚å¯Ÿå…¶â€rangeâ€å–å€¼èŒƒå›´å³å¯.</p><p><strong>å¯¹è±¡å±æ€§çš„å–å€¼èŒƒå›´æ˜¯ç±»,è€Œæ•°æ®å±æ€§çš„å–å€¼èŒƒå›´åˆ™æ˜¯å­—é¢é‡.</strong></p></li><li><p>ä¿å­˜æ–‡ä»¶,å‘½åä¸ºâ€kgdemo.owlâ€</p></li><li><p>æ³¨æ„åˆ°,<strong>mysqlä¸­æœ‰äº”ä¸ªè¡¨,æœ¬ä½“ä¸­åªæœ‰ä¸‰ä¸ªç±»</strong></p></li></ul><h2 id="æ•°æ®è½¬æ¢"><a href="#æ•°æ®è½¬æ¢" class="headerlink" title="æ•°æ®è½¬æ¢"></a>æ•°æ®è½¬æ¢</h2><h3 id="mysql-gt-RDF"><a href="#mysql-gt-RDF" class="headerlink" title="mysql -> RDF"></a>mysql -&gt; RDF</h3><ul><li><p>ä¸‹è½½D2RQï¼Œè¿›å…¥å…¶ç›®å½•ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤ç”Ÿæˆ<strong>é»˜è®¤çš„</strong>mappingæ–‡ä»¶ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./generate-mapping -u &lt;username&gt; -p &lt;password&gt; -o ../kgdemo/kg_demo_movie_mapping.ttl jdbc:mysql:///kg_demo_movie</span><br></pre></td></tr></tbody></table></figure></li><li><p>æ ¹æ®æˆ‘ä»¬å®šä¹‰çš„æœ¬ä½“<strong>ä¿®æ”¹mappingæ–‡ä»¶</strong></p><p>ttlæ–‡ä»¶ä¸­æ·»åŠ å‰ç¼€: @prefix : <a href="http://www.kgmovie.demo.com#" target="_blank" rel="noopener">http://www.kgmovie.demo.com#</a> .(åŒ…æ‹¬æœ€åçš„è¿™ä¸ªå¥å·)</p><p>å»é™¤æ²¡ç”¨çš„genre__labelå’Œgenre_genre_idä¿¡æ¯</p><p>vocab:xxxx æ¢æˆäº†æœ¬ä½“æ„å»ºæ—¶å€™çš„ç±»</p><p>d2rq:propertyå±æ€§ä¿®æ”¹ä¸ºæœ¬ä½“ä¸­å®šä¹‰çš„å±æ€§(å¯¹è±¡å±æ€§æˆ–è€…æ•°æ®å±æ€§)</p></li><li><p>æ•°æ®è½¬ä¸ºRDF</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./dump-rdf -o ../kgdemo/kg_demo_movie.nt ../kgdemo/kg_demo_movie_mapping.ttl</span><br></pre></td></tr></tbody></table></figure></li><li><p>æŸ¥è¯¢ç¤ºä¾‹</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ?titles <span class="keyword">WHERE</span> {</span><br><span class="line">  ?p rdf:<span class="keyword">type</span> :Person.</span><br><span class="line">  ?p :personEnglishName <span class="string">'Stephen Chow'</span>.</span><br><span class="line">  ?p :hasActedIn ?movies.</span><br><span class="line">  ?movies :movieTitle ?titles</span><br><span class="line">}</span><br><span class="line"><span class="keyword">limit</span> <span class="number">10</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>è¿”å›ç»“æœä¸º:</p><table><thead><tr><th>titles</th></tr></thead><tbody><tr><td>â€œåŠŸå¤«â€</td></tr><tr><td>â€œï§Œç’ƒæ¨½â€</td></tr><tr><td>â€œè‹±é›„æœ¬è‰²â€</td></tr><tr><td>â€œå°‘æ—è¶³çƒâ€</td></tr><tr><td>â€œè¥¿æ¸¸è®°ç¬¬å£¹ä½°é›¶å£¹å›ä¹‹æœˆå…‰å®ç›’â€</td></tr><tr><td>â€œé•¿æ±Ÿä¸ƒå·â€</td></tr><tr><td>â€œè¥¿æ¸¸è®°å¤§ç»“å±€ä¹‹ä»™å±¥å¥‡ç¼˜â€</td></tr><tr><td>â€œå»ºå›½å¤§ä¸šâ€</td></tr><tr><td>â€œå®¡æ­»å®˜â€</td></tr><tr><td>â€œé¾™åœ¨å¤©æ¶¯â€</td></tr></tbody></table></li></ul><h3 id="Bug-To-Fix"><a href="#Bug-To-Fix" class="headerlink" title="Bug To Fix"></a>Bug To Fix</h3><p>ä½¿ç”¨ä¸­æ–‡å§“åæŸ¥è¯¢ä¸åˆ°person</p><h2 id="jena-SPARQL-endpointåŠæ¨ç†"><a href="#jena-SPARQL-endpointåŠæ¨ç†" class="headerlink" title="jena SPARQL endpointåŠæ¨ç†"></a>jena SPARQL endpointåŠæ¨ç†</h2><h3 id="jenaç¤ºä¾‹"><a href="#jenaç¤ºä¾‹" class="headerlink" title="jenaç¤ºä¾‹"></a>jenaç¤ºä¾‹</h3><ul><li>ä¸‹è½½apache-jenaå’Œapache-jena-fuseki</li><li>åœ¨apache-jenaç›®å½•ä¸‹,ä½¿ç”¨â€œtdbloaderâ€å°†ä¹‹å‰æˆ‘ä»¬çš„RDFæ•°æ®ä»¥TDBçš„æ–¹å¼å­˜å‚¨ã€‚å‘½ä»¤å¦‚ä¸‹ï¼š</li></ul><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">./tdbloader --loc="../../kgdemo/tdb" "../../kgdemo/kg_demo_movie.nt"</span><br><span class="line">16:15:50 INFO  loader               :: -- Start triples data phase</span><br><span class="line">16:15:50 INFO  loader               :: ** Load empty triples table</span><br><span class="line">16:15:50 INFO  loader               :: -- Start quads data phase</span><br><span class="line">16:15:50 INFO  loader               :: ** Load empty quads table</span><br><span class="line">16:15:50 INFO  loader               :: Load: ../../kgdemo/kg_demo_movie.nt -- 2018/03/19 16:15:50 CST</span><br><span class="line">16:15:52 INFO  loader               :: -- Finish triples data phase</span><br><span class="line">16:15:52 INFO  loader               :: ** Data: 47,144 triples loaded in 1.26 seconds [Rate: 37,327.00 per second]</span><br><span class="line">16:15:52 INFO  loader               :: -- Finish quads data phase</span><br><span class="line">16:15:52 INFO  loader               :: -- Start triples index phase</span><br><span class="line">16:15:52 INFO  loader               :: ** Index SPO-&gt;POS: 47,144 slots indexed in 0.14 seconds [Rate: 334,354.63 per second]</span><br><span class="line">16:15:52 INFO  loader               :: ** Index SPO-&gt;OSP: 47,144 slots indexed in 0.13 seconds [Rate: 374,158.72 per second]</span><br><span class="line">16:15:52 INFO  loader               :: -- Finish triples index phase</span><br><span class="line">16:15:52 INFO  loader               :: ** 47,144 triples indexed in 0.27 seconds [Rate: 172,688.64 per second]</span><br><span class="line">16:15:52 INFO  loader               :: -- Finish triples load</span><br><span class="line">16:15:52 INFO  loader               :: ** Completed: 47,144 triples loaded in 1.55 seconds [Rate: 30,356.73 per second]</span><br><span class="line">16:15:52 INFO  loader               :: -- Finish quads load</span><br></pre></td></tr></tbody></table></figure><ul><li>åœ¨fuseki-serverç›®å½•ä¸‹,è¿è¡Œ <em>./fuseki-server</em> æœåŠ¡,ä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆrunæ–‡ä»¶å¤¹,å°†æœ¬ä½“æ–‡ä»¶é‡å‘½åä¸ºâ€kgdemo.ttlâ€æ”¾å…¥run/database,ç„¶ååœ¨run/configurationé‡Œåˆ›å»ºconfig.ttlæ–‡ä»¶,å†…å®¹ä¸º:</li></ul><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">@prefix :      &lt;http://base/#&gt; .</span><br><span class="line">@prefix tdb:   &lt;http://jena.hpl.hp.com/2008/tdb#&gt; .</span><br><span class="line">@prefix rdf:   &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .</span><br><span class="line">@prefix ja:    &lt;http://jena.hpl.hp.com/2005/11/Assembler#&gt; .</span><br><span class="line">@prefix rdfs:  &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .</span><br><span class="line">@prefix fuseki: &lt;http://jena.apache.org/fuseki#&gt; .</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">:service1        a                fuseki:Service ;</span><br><span class="line">fuseki:dataset                    &lt;#dataset&gt; ;</span><br><span class="line">fuseki:name                       "kg_demo_movie" ;</span><br><span class="line">fuseki:serviceQuery               "query" , "sparql" ;</span><br><span class="line">fuseki:serviceReadGraphStore      "get" ;</span><br><span class="line">fuseki:serviceReadWriteGraphStore "data" ;</span><br><span class="line">fuseki:serviceUpdate              "update" ;</span><br><span class="line">fuseki:serviceUpload              "upload" .</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;#dataset&gt; rdf:type ja:RDFDataset ;</span><br><span class="line">    ja:defaultGraph &lt;#model_inf&gt; ;</span><br><span class="line">    .</span><br><span class="line"></span><br><span class="line">&lt;#model_inf&gt; a ja:InfModel ;</span><br><span class="line">    ja:baseModel &lt;#tdbGraph&gt; ;</span><br><span class="line"></span><br><span class="line">    #æœ¬ä½“æ–‡ä»¶çš„è·¯å¾„</span><br><span class="line">    ja:content [ja:externalContent &lt;file:////home/gao/software/apache-jena-fuseki-3.6.0/run/databases/kgdemo.ttl&gt; ] ;</span><br><span class="line">    </span><br><span class="line">    #å¯ç”¨OWLæ¨ç†æœº</span><br><span class="line">    ja:reasoner [ja:reasonerURL &lt;http://jena.hpl.hp.com/2003/OWLFBRuleReasoner&gt;] .</span><br><span class="line"></span><br><span class="line">&lt;#tdbGraph&gt; rdf:type tdb:GraphTDB ;</span><br><span class="line">    tdb:dataset &lt;#tdbDataset&gt; ;</span><br><span class="line">    .</span><br><span class="line"></span><br><span class="line">&lt;#tdbDataset&gt; rdf:type tdb:DatasetTDB ;</span><br><span class="line">    tdb:location "/home/gao/software/kgdemo/tdb" ;</span><br></pre></td></tr></tbody></table></figure><ul><li>é‡å¯è¿è¡Œ <em>./fuseki-server</em></li></ul><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[2018-03-19 16:39:13] Server     INFO  Apache Jena Fuseki 3.6.0</span><br><span class="line">[2018-03-19 16:39:13] Config     INFO  FUSEKI_HOME=/home/gao/software/apache-jena-fuseki-3.6.0</span><br><span class="line">[2018-03-19 16:39:13] Config     INFO  FUSEKI_BASE=/home/gao/software/apache-jena-fuseki-3.6.0/run</span><br><span class="line">[2018-03-19 16:39:13] Config     INFO  Shiro file: file:///home/gao/software/apache-jena-fuseki-3.6.0/run/shiro.ini</span><br><span class="line">[2018-03-19 16:39:13] Config     INFO  Configuration file: /home/gao/software/apache-jena-fuseki-3.6.0/run/config.ttl</span><br><span class="line">[2018-03-19 16:39:13] Config     INFO  Load configuration: file:///home/gao/software/apache-jena-fuseki-3.6.0/run/configuration/conf.ttl</span><br><span class="line">[2018-03-19 16:39:13] Config     INFO  Register: /kg_demo_movie</span><br><span class="line">[2018-03-19 16:39:13] Server     INFO  Started 2018/03/19 16:39:13 CST on port 3030</span><br></pre></td></tr></tbody></table></figure><ul><li>æ‰“å¼€é¡µé¢localhost:3030,æŸ¥è¯¢,è¿™é‡Œä½¿ç”¨ä¸­æ–‡ok</li></ul><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span><br><span class="line">prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span><br><span class="line">prefix owl: &lt;http://www.w3.org/2002/07/owl#&gt;</span><br><span class="line">prefix : &lt;http://www.kgmovie.demo.com#&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> ?titles <span class="keyword">WHERE</span> {</span><br><span class="line">  ?p rdf:<span class="keyword">type</span> :Person.</span><br><span class="line">  ?p :personName <span class="string">'å‘¨æ˜Ÿé©°'</span>.</span><br><span class="line">  ?p :hasActedIn ?movies.</span><br><span class="line">  ?movies :movieTitle ?titles</span><br><span class="line">}</span><br><span class="line"><span class="keyword">limit</span> <span class="number">10</span></span><br></pre></td></tr></tbody></table></figure><table><thead><tr><th></th><th>titles</th></tr></thead><tbody><tr><td>1</td><td>â€œï§Œç’ƒæ¨½â€</td></tr><tr><td>2</td><td>â€œè¥¿æ¸¸è®°ç¬¬å£¹ä½°é›¶å£¹å›ä¹‹æœˆå…‰å®ç›’â€</td></tr><tr><td>3</td><td>â€œå¤§å†…å¯†æ¢é›¶é›¶å‘â€</td></tr><tr><td>4</td><td>â€œåŠŸå¤«â€</td></tr><tr><td>5</td><td>â€œé•¿æ±Ÿä¸ƒå·â€</td></tr><tr><td>6</td><td>â€œå›é­‚å¤œâ€</td></tr><tr><td>7</td><td>â€œç™¾å˜æ˜Ÿå›â€</td></tr><tr><td>8</td><td>â€œè‹±é›„æœ¬è‰²â€</td></tr><tr><td>9</td><td>â€œå»ºå›½å¤§ä¸šâ€</td></tr><tr><td>10</td><td>â€œå”ä¼¯è™ç‚¹ç§‹é¦™â€</td></tr></tbody></table><h3 id="è‡ªå®šä¹‰æ¨ç†è§„åˆ™"><a href="#è‡ªå®šä¹‰æ¨ç†è§„åˆ™" class="headerlink" title="è‡ªå®šä¹‰æ¨ç†è§„åˆ™"></a>è‡ªå®šä¹‰æ¨ç†è§„åˆ™</h3><ul><li>åœ¨â€œdatabasesâ€æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶â€œrules.ttlâ€ï¼Œå¡«å…¥å¦‚ä¸‹å†…å®¹ï¼š</li></ul><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@prefix : &lt;http://www.kgmovie.demo.com#&gt; .</span><br><span class="line">@prefix owl: &lt;http://www.w3.org/2002/07/owl#&gt; .</span><br><span class="line">@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .</span><br><span class="line">@prefix xsd: &lt;XML Schema&gt; .</span><br><span class="line">@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .</span><br><span class="line"></span><br><span class="line">[ruleComedian: (?p :hasActedIn ?m) (?m :hasGenre ?g) (?g :genreName 'å–œå‰§') -&gt; (?p rdf:type :Comedian)]</span><br><span class="line">[ruleInverse: (?p :hasActedIn ?m) -&gt; (?m :hasActor ?p)]</span><br></pre></td></tr></tbody></table></figure><ul><li>ä¿®æ”¹juseki-serveré…ç½®æ–‡ä»¶:</li></ul><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">@prefix :      &lt;http://base/#&gt; .</span><br><span class="line">@prefix tdb:   &lt;http://jena.hpl.hp.com/2008/tdb#&gt; .</span><br><span class="line">@prefix rdf:   &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .</span><br><span class="line">@prefix ja:    &lt;http://jena.hpl.hp.com/2005/11/Assembler#&gt; .</span><br><span class="line">@prefix rdfs:  &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .</span><br><span class="line">@prefix fuseki: &lt;http://jena.apache.org/fuseki#&gt; .</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">:service1        a                fuseki:Service ;</span><br><span class="line">fuseki:dataset                    &lt;#dataset&gt; ;</span><br><span class="line">fuseki:name                       "kg_demo_movie" ;</span><br><span class="line">fuseki:serviceQuery               "query" , "sparql" ;</span><br><span class="line">fuseki:serviceReadGraphStore      "get" ;</span><br><span class="line">fuseki:serviceReadWriteGraphStore "data" ;</span><br><span class="line">fuseki:serviceUpdate              "update" ;</span><br><span class="line">fuseki:serviceUpload              "upload" .</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;#dataset&gt; rdf:type ja:RDFDataset ;</span><br><span class="line">    ja:defaultGraph &lt;#model_inf&gt; ;</span><br><span class="line">    .</span><br><span class="line"></span><br><span class="line">&lt;#model_inf&gt; a ja:InfModel ;</span><br><span class="line">    ja:baseModel &lt;#tdbGraph&gt; ;</span><br><span class="line"></span><br><span class="line">    #æœ¬ä½“æ–‡ä»¶çš„è·¯å¾„</span><br><span class="line">    ja:content [ja:externalContent &lt;file:////home/gao/software/apache-jena-fuseki-3.6.0/run/databases/kgdemo.ttl&gt; ] ;</span><br><span class="line">    </span><br><span class="line">    #å…³é—­OWLæ¨ç†æœº</span><br><span class="line">    #ja:reasoner [ja:reasonerURL &lt;http://jena.hpl.hp.com/2003/OWLFBRuleReasoner&gt;] .</span><br><span class="line"></span><br><span class="line">#å¼€å¯è§„åˆ™æ¨ç†æœºï¼Œå¹¶æŒ‡å®šè§„åˆ™æ–‡ä»¶è·¯å¾„</span><br><span class="line">    ja:reasoner [</span><br><span class="line">        ja:reasonerURL &lt;http://jena.hpl.hp.com/2003/GenericRuleReasoner&gt; ; </span><br><span class="line">        ja:rulesFrom &lt;file:////home/gao/software/apache-jena-fuseki-3.6.0/run/databases/rules.ttl&gt; ; ]</span><br><span class="line">    .</span><br><span class="line">&lt;#tdbGraph&gt; rdf:type tdb:GraphTDB ;</span><br><span class="line">    tdb:dataset &lt;#tdbDataset&gt; ;</span><br><span class="line">    .</span><br><span class="line"></span><br><span class="line">&lt;#tdbDataset&gt; rdf:type tdb:DatasetTDB ;</span><br><span class="line">    tdb:location "/home/gao/software/kgdemo/tdb" ;</span><br><span class="line">    .</span><br></pre></td></tr></tbody></table></figure><ul><li>æŸ¥è¯¢:</li></ul><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> n <span class="keyword">WHERE</span> {</span><br><span class="line">?x rdf:<span class="keyword">type</span> :Comedian.</span><br><span class="line">?x :personName ?n.</span><br><span class="line">}</span><br><span class="line"><span class="keyword">limit</span> <span class="number">10</span></span><br></pre></td></tr></tbody></table></figure><p>ç»“æœå¦‚ä¸‹:</p><table><thead><tr><th></th><th>n</th></tr></thead><tbody><tr><td>1</td><td>â€œé‚“æµ©å…‰â€</td></tr><tr><td>2</td><td>â€œæ¢æœä¼Ÿâ€</td></tr><tr><td>3</td><td>â€œæ¨æ­å¦‚â€</td></tr><tr><td>4</td><td>â€œæ¢éŸµè•Šâ€</td></tr><tr><td>5</td><td>â€œå´å®‡æ£®â€</td></tr><tr><td>6</td><td>â€œå¾é”¦æ±Ÿâ€</td></tr><tr><td>7</td><td>â€œé»„å®¶é©¹â€</td></tr><tr><td>8</td><td>â€œå¶è¿›â€</td></tr><tr><td>9</td><td>â€œåˆé©¬â€</td></tr><tr><td>10</td><td>â€œæ¢å’çªâ€</td></tr></tbody></table><h3 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h3><p>ä¸ç”¨sparqlï¼Œç”¨natural languageæŸ¥è¯¢ç»“æœ<br>query-answer</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å®éªŒç¯å¢ƒ&quot;&gt;&lt;a href=&quot;#å®éªŒç¯å¢ƒ&quot; class=&quot;headerlink&quot; title=&quot;å®éªŒç¯å¢ƒ&quot;&gt;&lt;/a&gt;å®éªŒç¯å¢ƒ&lt;/h2&gt;&lt;p&gt;ç³»ç»Ÿï¼š&lt;br&gt;ubuntu16.04&lt;/p&gt;
&lt;p&gt;è½¯ä»¶ç›®å½•:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é¡¹ç›®ç›®å½•/home/gao/software/kgdemo/&lt;/li&gt;
&lt;li&gt;æ•°æ®åº“/home/gao/software/mysql&lt;/li&gt;
&lt;li&gt;åº”ç”¨æ¡†æ¶/home/gao/software/apache-jena-3.6.0ï¼ˆè¿™é‡Œä½¿ç”¨äº†å®ƒçš„TDBç»„ä»¶&lt;/li&gt;
&lt;li&gt;SPARQLæœåŠ¡å™¨/home/gao/software/apache-jena-fuseki-3.6.0&lt;/li&gt;
&lt;li&gt;æ•°æ®è½¬åŒ–å·¥å…·/home/gao/software/d2rq-0.8.1&lt;/li&gt;
&lt;li&gt;æœ¬ä½“æ„å»ºå·¥å…·/home/gao/software/Protege-5.2.0&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="çŸ¥è¯†å›¾è°±" scheme="https://yikayiyo.github.io/tags/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/"/>
    
  </entry>
  
  <entry>
    <title>æ„å»ºITé¢†åŸŸæ¦‚å¿µå›¾è°±</title>
    <link href="https://yikayiyo.github.io/2018/01/10/%E6%9E%84%E5%BB%BAIT%E9%A2%86%E5%9F%9F%E6%A6%82%E5%BF%B5%E5%9B%BE%E8%B0%B1/"/>
    <id>https://yikayiyo.github.io/2018/01/10/%E6%9E%84%E5%BB%BAIT%E9%A2%86%E5%9F%9F%E6%A6%82%E5%BF%B5%E5%9B%BE%E8%B0%B1/</id>
    <published>2018-01-10T09:17:14.000Z</published>
    <updated>2018-01-10T10:08:30.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.sciencedirect.com/science/article/pii/S0957417415005941" target="_blank" rel="noopener">åŸæ–‡åœ°å€</a></p><h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>â€‹    <strong>å…³è”å¼€æ”¾æ•°æ®</strong>ï¼ˆLODï¼‰ä¸­åŒ…å«ä¸°å¯Œçš„çŸ¥è¯†å’Œè¯­ä¹‰ï¼Œå®ƒçš„å‘å±•ä¿ƒä½¿äº†å¾ˆå¤šçŸ¥è¯†å‹åº”ç”¨çš„è¯ç”Ÿå’Œå…´èµ·ã€‚åœ¨è¿™äº›åº”ç”¨ä¸­ï¼Œå®ä½“é—´çš„ç›¸å…³æ€§ï¼ˆä¸åŒäºç›¸ä¼¼æ€§ï¼‰è¿™ä¸€æ¦‚å¿µæ‰®æ¼”äº†é‡è¦è§’è‰²ã€‚</p><p>â€‹    åœ¨ç»™å®šä¸€ä¸ªæŸ¥è¯¢åæˆ‘ä»¬æ„Ÿå…´è¶£çš„ä¸åªæ˜¯ç¡®åˆ‡çš„è¿”å›å€¼ï¼ˆexact answers ï¼‰ï¼Œè¿˜æœ‰é‚£äº›ä¸æŸ¥è¯¢ç´§å¯†ç›¸å…³çš„ä¸œè¥¿ã€‚</p><p>â€‹    åˆ©ç”¨DBpediaä¸­ITé¢†åŸŸæ•°æ®æ„å»ºæ¦‚å¿µå›¾è°±çš„æ–¹æ³•ï¼Œä¸ä»…åˆ©ç”¨å­—ç¬¦ä¸²åŒ¹é…ï¼Œè¿˜å¯ä»¥åˆ©ç”¨LODæ•°æ®é›†ä¸­ç¼–ç çš„æ˜¾ç¤ºæˆ–éšå¼è¯­ä¹‰ã€‚åœ¨æ­¤åŸºç¡€ä¸Šæ„å»ºçš„ä¸“å®¶ç³»ç»Ÿï¼Œå¯ä»¥å¸®åŠ©é‚£äº›åœ¨ITé¢†åŸŸè¿›è¡Œ<strong>å®ä½“æœç´¢</strong>ä»»åŠ¡çš„ç”¨æˆ·ã€‚</p><p>â€‹    ä¸ºäº†å¯¹ç›¸å…³å®ä½“è¿›è¡Œ<strong>æ’åº</strong>éœ€è¦è®¡ç®—ç›¸å…³åº¦ï¼Œè¿™å°±æ¶‰åŠåˆ°ä¸åŒçš„<strong>ç›¸å…³æ€§åº¦é‡</strong>ï¼ˆrelatedness measuresï¼‰ã€‚</p><h3 id="å¯¼è¯»"><a href="#å¯¼è¯»" class="headerlink" title="å¯¼è¯»"></a>å¯¼è¯»</h3><p>â€‹    åŸºäºå…³é”®è¯åŒ¹é…çš„æœç´¢åœ¨åŒä¹‰ã€æ­§ä¹‰å‘ç”Ÿæ—¶ï¼Œè¡¨ç°å¾—å¾ˆæŒ£æ‰ï¼ˆsufferï¼‰ã€‚å“ªæ€•æŸ¥è¯¢è¯­å¥ã€èµ„æºæè¿°éƒ½ç»“æ„åŒ–äº†ï¼ŒåŒæ ·çš„é—®é¢˜ä¾ç„¶å­˜åœ¨ã€‚å¯¼è‡´è¿™ä¸€é—®é¢˜çš„ä¸»è¦åŸå› æ˜¯ï¼Œå®ƒä»¬éƒ½<strong>æ— æ³•æ•è·</strong>æŸ¥è¯¢ã€èµ„æºæè¿°ä¸­çš„è¯è¯­çš„<strong>è¯ä¹‰(meaning of terms)ä»¥åŠè¯­ä¹‰å…³è”(the semantic relation)</strong>ã€‚</p><p>â€‹    ç›¸å…³æ€§ï¼ˆrelatednessï¼‰æ˜¯è¯­ä¹‰ä¸Šçš„ï¼Œæ¯”ç›¸ä¼¼æ€§æ¦‚å¿µå®½æ³›ï¼ˆwiderï¼‰ã€‚ä¸¾ä¾‹æ¥è¯´ï¼ŒMySQLå’ŒPostgreSQLå¾ˆç›¸ä¼¼çš„ï¼ŒPHPå’ŒMySQLåˆ™æ˜¯å¾ˆç›¸å…³çš„ã€‚</p><p>â€‹    æ„å»ºå›¾è°±çš„å…³é”®åœ¨äºï¼Œæ€ä¹ˆè¡¡é‡ä¸¤ä¸ªå®ä½“é—´çš„ç›¸å…³åº¦ã€‚</p><p>â€‹    æœ¬æ–‡æå‡ºäº†ä¸€ç§è¯­ä¹‰æ„ŸçŸ¥çš„åº¦é‡æ¥è¯„ä¼°å®ä½“é—´ç›¸å…³åº¦ï¼Œå¹¶åˆ©ç”¨è¿™ä¸ªåº¦é‡æ„å»ºITé¢†åŸŸæ¦‚å¿µå›¾è°±ï¼Œå›¾ä¸Šæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ITæ¦‚å¿µï¼ˆç¼–ç¨‹è¯­è¨€ã€æ•°æ®åº“ã€æŠ€æœ¯ã€æ¡†æ¶ï¼Œç­‰ç­‰ï¼‰ã€‚</p><p>â€‹    æ„å»ºå›¾è°±æ—¶ï¼Œåˆ©ç”¨äº†æ¥è‡ªwebçš„æ•°æ®çš„<strong>ç»Ÿè®¡ç‰¹å¾</strong>ä»¥åŠä»LODæ•°æ®é›†ä¸­æŠ½å–çš„<strong>è¯­ä¹‰çŸ¥è¯†</strong>ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://www.sciencedirect.com/science/article/pii/S0957417415005941&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;åŸæ–‡åœ°å€&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;æ‘˜è¦&quot;&gt;&lt;a 
      
    
    </summary>
    
    
    
      <category term="çŸ¥è¯†å›¾è°±" scheme="https://yikayiyo.github.io/tags/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/"/>
    
      <category term="å…³è”æ•°æ®" scheme="https://yikayiyo.github.io/tags/%E5%85%B3%E8%81%94%E6%95%B0%E6%8D%AE/"/>
    
      <category term="DBpedia" scheme="https://yikayiyo.github.io/tags/DBpedia/"/>
    
  </entry>
  
  <entry>
    <title>çº¿æ€§æ¨¡å‹</title>
    <link href="https://yikayiyo.github.io/2017/11/11/%E7%BA%BF%E6%80%A7%E6%A8%A1%E5%9E%8B/"/>
    <id>https://yikayiyo.github.io/2017/11/11/%E7%BA%BF%E6%80%A7%E6%A8%A1%E5%9E%8B/</id>
    <published>2017-11-11T03:22:45.000Z</published>
    <updated>2018-04-10T08:52:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>èƒ½ä¸èƒ½ä½¿ç”¨çº¿æ€§åˆ†ç±»å™¨å¾—åˆ°å½¢çŠ¶ä¸ºåœ†åœˆçš„å†³ç­–è¾¹ç•Œï¼Ÿ</p><a id="more"></a><ul><li>å¯ä»¥çš„ï¼æ‰€è°“çš„çº¿æ€§åˆ†ç±»å™¨ï¼Œ<strong>çº¿æ€§</strong>æŒ‡çš„æ˜¯æƒé‡å‘é‡<strong>w</strong>å’Œæ ‡ç­¾yçš„å…³ç³»ï¼Œè€Œå†³ç­–è¾¹ç•ŒæŒ‡çš„æ˜¯yå¦‚ä½•éšç€xçš„å˜åŒ–è€Œå˜åŒ–</li></ul><p><strong>the prediction is driven by the score w Â· Ï†(x)</strong>ï¼Œå…¶ä¸­xæ˜¯åŸå§‹è¾“å…¥ï¼ŒÏ†(x)æ˜¯æå–åˆ°çš„ç‰¹å¾</p><p>æœºå™¨å­¦ä¹ é—®é¢˜ï¼šå®šä¹‰ä¼˜åŒ–é—®é¢˜ï¼Œæ±‚è§£å¾—åˆ°<strong>w</strong>ï¼ˆåœ¨ Ï†(x)å›ºå®šçš„æƒ…å†µä¸‹ï¼‰</p><p>æ„é€ ç‰¹å¾ï¼š</p><ul><li>å…ˆéªŒçŸ¥è¯†</li><li>ç‰¹å¾æ¨¡æ¿</li></ul><p>å®šä¹‰ç‰¹å¾ï¼š</p><ul><li>æ•°ç»„ï¼šé€‚ç”¨äºç‰¹å¾ç¨ å¯†çš„æƒ…å†µï¼Œå‡å®šç‰¹å¾æ’åºå›ºå®š</li><li>å­—å…¸ï¼šç‰¹å¾ç¨€ç–(few nonzeros)æ—¶ç”¨å­—å…¸è¡¨ç¤ºå­—æ®µåˆ°double<br>çš„æ˜ å°„æ›´æœ‰æ•ˆ</li></ul><p>å®šä¹‰ç‰¹å¾æ—¶ä¸€å®šè¦æ˜ç¡®ç‰¹å¾çš„å«ä¹‰</p><p>æ¨¡å‹çš„è¡¨è¾¾ï¼ˆè¡¨ç°ï¼‰èƒ½åŠ›â€”â€”Expressivityï¼š</p><ul><li>hypothesis classï¼šç‰¹å¾Ï†(x)å›ºå®šè€Œ<strong>w</strong>ä¸åŒçš„é¢„æµ‹å™¨çš„é›†åˆ<br>$$<br>F = {f_w : w âˆˆ R^d}<br>$$</li><li>å­¦ä¹ çš„ç›®çš„ï¼šåˆ©ç”¨è®­ç»ƒæ•°æ®ä»Fä¸­æ‰¾åˆ°ä¸€ä¸ªç‰¹å®šçš„é¢„æµ‹å™¨</li><li>å¦‚æœ<strong>Ï†(x)å®šä¹‰çš„F</strong>ä¸­çš„é¢„æµ‹å™¨éƒ½å¾ˆå·®åŠ²ï¼Œno amount of learning can help.</li><li>å…³é”®åœ¨äºï¼šÏ†(x)èƒ½ä¸èƒ½æŠŠå¥½çš„é¢„æµ‹å™¨è¡¨è¾¾å‡ºæ¥</li><li>Fæ˜¯ä¸æ˜¯<strong>è¶Šå¤§è¶Šå¥½ï¼Ÿ</strong></li></ul><p><strong>non-linearities in the original measurements(åŸå§‹åº¦é‡ä¸­çš„éçº¿æ€§)</strong> :</p><ul><li>Non-monotonicity(éå•è°ƒæ€§)ï¼š<ul><li>ä½“æ¸©å’Œå¥åº·ç¨‹åº¦çš„å…³ç³»å°±ä¸æ˜¯å•è°ƒçš„ï¼Œä½ ä¸èƒ½è¯´ä½“æ¸©è¶Šé«˜è¶Šå¥åº·ï¼Œåä¹‹äº¦ç„¶</li><li>Ï†(x) = [1, temperature(x)]   bad</li><li>Ï†(x) = [1, (temperature(x) âˆ’ 37)^2] è½¬æ¢ç‰¹å¾ï¼Œåˆ©ç”¨äº†å…ˆéªŒçŸ¥è¯†</li><li>Ï†(x) = [1, temperature(x), temperature(x)^2]   task to simple blocks</li></ul></li><li>Saturation(é¥±å’Œ)ï¼š<ul><li>äº§å“æ¨è</li><li>Ï†(x) = N(x) è´­ä¹°äº§å“çš„äººæ•°ï¼ˆå—æ¬¢è¿ç¨‹åº¦ï¼‰å’Œç›¸å…³æ€§ï¼Œä¸å…·æœ‰çº¿æ€§å…³ç³»</li><li>Ï†(x) = logN(x) è½¬æ¢ç‰¹å¾ï¼Œå–å¯¹æ•°ï¼ˆN with a large dynamic rangeï¼‰</li><li>Ï†(x) = [1[0 &lt; N(x) â‰¤ 10], 1[10 &lt; N(x) â‰¤ 100],â€¦]ç¦»æ•£åŒ–ï¼ŒèŒƒå›´è¶³å¤Ÿç²¾ç»†çš„è¯ï¼Œå¯ä»¥éå¸¸çµæ´»åœ°æ•æ‰å¸¸è§„å…³ç³»</li></ul></li><li>Interaction between features(ç‰¹å¾ç»„åˆ)ï¼š<ul><li>æ ¹æ®èº«é«˜ã€ä½“é‡é¢„æµ‹å¥åº·ç—…äººçŠ¶å†µ</li><li>Ï†(x) = [height(x), weight(x)] #æ²¡èƒ½æ•è·èº«é«˜ä½“é‡çš„å…³ç³»</li><li>Ï†(x) = (52 + 1.9(height(x) âˆ’ 60) âˆ’ weight(x))^2 #ç»„åˆè¾“å…¥å¾—åˆ°æ–°çš„ç‰¹å¾ï¼Œåˆ©ç”¨äº†å¤–ç•ŒçŸ¥è¯†</li><li>Ï†(x) = [1, height(x), weight(x), height(x)^2, weight(x)^2, height(x)weight(x)] #æ·»åŠ åŒ…å«å¤šä¸ªåº¦é‡çš„ç‰¹å¾</li></ul></li></ul><p>Linear in whatï¼Ÿ </p><ul><li>Linear in w?  Yes</li><li>Linear in Ï†(x)?  Yes </li><li>Linear in x?  No! (x not necessarily even a vectorï¼Œå¯ä»¥æ˜¯å›¾ç‰‡ã€æ–‡å­—)</li></ul><p>å°ç»“ï¼š</p><ul><li>ä»ç‰¹å¾æå–çš„è§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰<strong>ä»»æ„</strong>ç‰¹å¾ï¼Œå¸¦æ¥xçš„æåº¦éçº¿æ€§çš„å‡½æ•°</li><li>ä»å­¦ä¹ çš„è§’åº¦æ¥çœ‹ï¼Œçº¿æ€§åœ¨æœ‰æ•ˆä¼˜åŒ–æƒé‡æ–¹é¢èµ·ç€é‡è¦ä½œç”¨ï¼ˆå› ä¸ºå®ƒä¼šå¯¼è‡´å‡¸ä¼˜åŒ–é—®é¢˜ï¼‰</li><li><strong>çº¿æ€§æ¨¡å‹å¾ˆå¼ºå¤§</strong>ï¼</li><li>å°†æ‰‹å·¥å®šä¹‰ç‰¹å¾è‡ªåŠ¨åŒ–â€”&gt; ç¥ç»ç½‘ç»œ</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;èƒ½ä¸èƒ½ä½¿ç”¨çº¿æ€§åˆ†ç±»å™¨å¾—åˆ°å½¢çŠ¶ä¸ºåœ†åœˆçš„å†³ç­–è¾¹ç•Œï¼Ÿ&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="machine learning" scheme="https://yikayiyo.github.io/tags/machine-learning/"/>
    
  </entry>
  
  <entry>
    <title>jupyter notebookæ·»åŠ kernel</title>
    <link href="https://yikayiyo.github.io/2017/08/03/jupyter%20notebook%E6%B7%BB%E5%8A%A0kernel/"/>
    <id>https://yikayiyo.github.io/2017/08/03/jupyter%20notebook%E6%B7%BB%E5%8A%A0kernel/</id>
    <published>2017-08-03T02:20:33.000Z</published>
    <updated>2017-08-03T09:18:02.000Z</updated>
    
    <content type="html"><![CDATA[<p>å®‰è£…jupyteræ—¶ä½¿ç”¨äº†æ¨èçš„Anacondaï¼Œpythoné»˜è®¤ç¯å¢ƒpython3ã€‚<br>æ·»åŠ python2çš„æ–¹æ³•å¦‚ä¸‹ï¼Œäº²æµ‹æœ‰æ•ˆ - 0-</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">conda create -n py27 python=<span class="number">2.7</span></span><br><span class="line">source activate py27</span><br><span class="line">conda install notebook ipykernel</span><br><span class="line">ipython kernel install --user</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å®‰è£…jupyteræ—¶ä½¿ç”¨äº†æ¨èçš„Anacondaï¼Œpythoné»˜è®¤ç¯å¢ƒpython3ã€‚&lt;br&gt;æ·»åŠ python2çš„æ–¹æ³•å¦‚ä¸‹ï¼Œäº²æµ‹æœ‰æ•ˆ - 0-&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=
      
    
    </summary>
    
    
    
      <category term="python" scheme="https://yikayiyo.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>ã€Šç¼–ç ã€‹è¯»åæ„Ÿ</title>
    <link href="https://yikayiyo.github.io/2017/07/31/%E7%BC%96%E7%A0%81%E8%AF%BB%E5%90%8E%E6%84%9F/"/>
    <id>https://yikayiyo.github.io/2017/07/31/%E7%BC%96%E7%A0%81%E8%AF%BB%E5%90%8E%E6%84%9F/</id>
    <published>2017-07-31T14:33:33.000Z</published>
    <updated>2017-08-01T10:47:34.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¾ˆæœ‰è¶£çš„ä¹¦ã€‚</p><p>æ—©ç‚¹è¯»åˆ°è¿™æœ¬ä¹¦çš„è¯ï¼Œå­¦ä¹ è®¡ç®—æœºåŸºç¡€çŸ¥è¯†çš„æ—¶å€™åº”è¯¥ä¼šä¸€è¾¹å­¦ä¸€è¾¹æ„Ÿå¹â€œå“‡ï¼æœ‰æ„æ€ï¼â€å§ã€‚</p><p>è®¡ç®—æœºåœ¨ä»Šå¤©å¦‚æ­¤æ™®åŠï¼Œç°ä»£äººäº«å—ä¾¿åˆ©çš„æ—¶å€™å¦‚æœæƒ³æƒ³è¿™ä¸œè¥¿æ˜¯æ€ä¹ˆå‘æ˜å‡ºæ¥çš„ï¼Œä¸€å®šå¾—æƒŠå¹â€œä¸å¯æ€è®®â€ã€‚</p><p>ç›²æ–‡ã€æ‘©æ–¯ç ã€ç¯æ³¡ã€ç”µæ± ã€ç»§ç”µå™¨ã€åè¿›åˆ¶ã€bitã€äºŒè¿›åˆ¶ã€é—¨ç”µè·¯ç­‰ç­‰ï¼Œä¹¦ä¸­è®°å½•äº†è¿™äº›æ¢ç´¢æ˜¯å¦‚ä½•ä¸€æ­¥ä¸€æ­¥å½±å“ç€ç°ä»£ç§‘æŠ€çš„ã€‚</p><p><strong>æ¯ä¸€ç§è¯­è¨€éƒ½å¯ä»¥çœ‹ä½œæ˜¯ä¸€å¥—ç¼–ç </strong>ã€‚</p><p>ç¼–ç æ˜¯ä¸ºäº†æ»¡è¶³äººçš„æŸä¸ªéœ€æ±‚å‡ºç°çš„ï¼Œè€Œè¯­è¨€æ˜¯ä¸ºäº†äº¤æµã€‚</p><p>è§„åˆ™ä¸ä¸€æ ·æ—¶ï¼ŒåŒä¸€ä¸ªç‰©ä½“åœ¨ç¼–ç ç©ºé—´æ‰€å¤„çš„ä½ç½®å°±ä¸ä¸€æ ·äº†ã€‚</p><p>å¦‚æœåªæœ‰ä¸€é—¨è¯­è¨€ï¼Œä¸€ç§ç¼–ç ï¼Œå°±ä¸éœ€è¦ç¿»è¯‘äº†ã€‚</p><p>äººç±»èµ·åˆåœ¨ä¸åŒçš„åŒºåŸŸå½¢æˆäº†ä¸åŒçš„è¯­è¨€ï¼Œå¦‚ä»Šäº¤æµå¦‚æ­¤é¢‘ç¹ï¼Œå›å½’ä¸€ç§è¯­è¨€æ˜¯ä¸æ˜¯æœ‰ä¸€ç§å®¿å‘½çš„æ„Ÿè§‰ã€‚</p><p>God is watching you.</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å¾ˆæœ‰è¶£çš„ä¹¦ã€‚&lt;/p&gt;
&lt;p&gt;æ—©ç‚¹è¯»åˆ°è¿™æœ¬ä¹¦çš„è¯ï¼Œå­¦ä¹ è®¡ç®—æœºåŸºç¡€çŸ¥è¯†çš„æ—¶å€™åº”è¯¥ä¼šä¸€è¾¹å­¦ä¸€è¾¹æ„Ÿå¹â€œå“‡ï¼æœ‰æ„æ€ï¼â€å§ã€‚&lt;/p&gt;
&lt;p&gt;è®¡ç®—æœºåœ¨ä»Šå¤©å¦‚æ­¤æ™®åŠï¼Œç°ä»£äººäº«å—ä¾¿åˆ©çš„æ—¶å€™å¦‚æœæƒ³æƒ³è¿™ä¸œè¥¿æ˜¯æ€ä¹ˆå‘æ˜å‡ºæ¥çš„ï¼Œä¸€å®šå¾—æƒŠå¹â€œä¸å¯æ€è®®â€ã€‚&lt;/p&gt;
&lt;p&gt;ç›²æ–‡ã€æ‘©æ–¯ç ã€ç¯æ³¡ã€ç”µæ± ã€ç»§ç”µå™¨
      
    
    </summary>
    
    
    
      <category term="æ‚" scheme="https://yikayiyo.github.io/tags/%E6%9D%82/"/>
    
      <category term="è¯»ä¹¦ç¬”è®°" scheme="https://yikayiyo.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
</feed>
